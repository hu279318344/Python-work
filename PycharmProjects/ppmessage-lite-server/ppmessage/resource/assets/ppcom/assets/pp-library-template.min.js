!function(){function PPMessage(jQuery){function extend(e,t){e.prototype=function(e){function n(){}return e?Object.create(t.prototype):(n.prototype=t.prototype,new n)}(void 0!==Object.create),e.prototype.constructor=e}var fn={$:jQuery,Service:{},View:{},Modal:{},Controller:{},Factory:{},Configuration:{},Toolkit:{}},ppJQuery=fn.$,$=fn.$,Service=fn.Service,View=fn.View,Modal=fn.Modal,Controller=fn.Controller,Factory=fn.Factory,Ctrl=Controller,Configuration=fn.Configuration,Toolkit=fn.Toolkit,$timeout=setTimeout,$clearTimeout=clearTimeout,$onResult=function(e,t){t&&t(e)};Configuration={api_key:"{ppcom_api_key}",api_secret:"{ppcom_api_secret}",assets_path:"{ppcom_assets_path}",portal:"{portal}",api:"{api}",auth:"{auth}",web_socket_url:"{web_socket_url}",file_upload_url:"{file_upload_url}",file_download_url:"{file_download_url}"},function(e,t){"use strict";var n=function(t,n){this.$element=e(t),this.options=e.extend({},self.DEFAULTS,n),this.$scroll=e(n.scroll),this.flags={prevented:!1,moving:!1,touched:!1,isTouch:!1,refreshed:!1},this.positions={startY:0,startX:0,lastStep:0,delta:0}};n.key="pulltorefresh",n.DEFAULTS={orientation:"down",sensibility:5,refresh:70,click:1e-6,lockRefresh:!1,resetRefresh:!0,autoInit:!0,resetSpeed:"100ms",simulateTouch:!0,threshold:20,scroll:t},n.namespace=function(e){return[e,n.key].join(".")},n.support={touch:window.Modernizr&&Modernizr.touch===!0||function(){return!!("ontouchstart"in window||window.DocumentTouch&&t instanceof DocumentTouch)}()},n.events=function(){if(n.support.touch)return{start:n.namespace("touchstart"),move:n.namespace("touchmove"),end:n.namespace("touchend")};var e={start:n.namespace("mousedown"),move:n.namespace("mousemove"),end:n.namespace("mouseup")};return window.navigator.msPointerEnabled&&(e={start:n.namespace("MSPointerDown"),move:n.namespace("MSPointerMove"),end:n.namespace("MSPointerUp")}),window.navigator.pointerEnabled&&(e={start:n.namespace("pointerdown"),move:n.namespace("pointermove"),end:n.namespace("pointerup")}),e}(),n.prototype.construct=function(){var i=this;i.$element.on(n.events.start,i.proxy(i.onTouchStart,i)).on(n.events.move,i.proxy(i.onTouchMove,i)).on(n.events.end,i.proxy(i.onTouchEnd,i)),i.options.simulateTouch&&(i.$element.on(n.namespace("mousedown"),i.proxy(i.onTouchStart,i)),e(t).on(n.namespace("mousemove"),i.$element,i.proxy(i.onTouchMove,i)).on(n.namespace("mouseup"),i.$element,i.proxy(i.onTouchEnd,i)))},n.prototype.destroy=function(){this.remove_transition(this.$element[0].style),this.remove_transform(this.$element[0].style),e(t).off(n.namespace("")),this.$element.off(n.namespace("")),this.$element.removeData("pulltorefresh")},n.prototype.proxy=function(){var t=!!Function.prototype.bind;return t?function(e,t){return e.bind(t)}:e.proxy?e.proxy:function(e,t){var n,i,o;if("string"==typeof t&&(n=e[t],t=e,e=n),"function"!=typeof e)return i=Array.prototype.slice.call(arguments,2),o=function(){return e.apply(t||this,i.concat(slice.call(arguments)))},o.guid=e.guid=e.guid||jQuery.guid++,o}}(),n.prototype.transform=function(e,t){e.webkitTransform="translate(0, "+t+"px) translateZ(0)",e.msTransform=e.MsTransform=e.MozTransform=e.OTransform=e.transform="translateY("+t+"px)"},n.prototype.transition=function(e,t){e.webkitTransitionDuration=e.MozTransitionDuration=e.msTransitionDuration=e.OTransitionDuration=e.transitionDuration=t},n.prototype.remove_transition=function(e){e.webkitTransitionDuration=e.MozTransitionDuration=e.msTransitionDuration=e.OTransitionDuration=e.transitionDuration=null},n.prototype.remove_transform=function(e){e.webkitTransform=e.msTransform=e.MsTransform=e.MozTransform=e.OTransform=e.transform=null},n.prototype.getAxis=function(e,t){return{x:t?(e.targetTouches||e.originalEvent.targetTouches)[0].pageX:e.pageX||e.clientX,y:t?(e.targetTouches||e.originalEvent.targetTouches)[0].pageY:e.pageY||e.clientY}},n.prototype.onTouchStart=function(e){var t="touchstart"===e.type,i=this.getAxis(e,t);return this.$scroll.scrollTop()>0||void((t||1===e.which)&&(this.flags.touched=!0,this.flags.refreshed=!1,this.flags.isTouch=t,this.positions.startY=i.y,this.positions.startX=i.x,this.$element.trigger(n.namespace("start"),[i.y]),this.transition(this.$element[0].style,"0ms")))},n.prototype.onTouchMove=function(e){var t,i,o,r,a="touchmove"===e.type;if(this.flags.touched&&(!this.flags.isTouch||"mousemove"!==e.type)){if(!this.flags.prevented&&e.target&&(e.target.click||e.target.onclick)&&(this.flags.prevented=!0),r=this.getAxis(e,a),t=r.y-this.positions.startY,this.positions.delta=t,Math.abs(r.x-this.positions.startX)>this.options.threshold)return void this.reset();if(!(t<0&&"down"==this.options.orientation||t>=0&&"up"==this.options.orientation))return(t<0?t*-1:t)>=this.options.refresh&&!this.flags.refreshed&&(this.$element.trigger(n.namespace("refresh"),[r.y]),this.flags.refreshed=!0,this.options.resetRefresh)?void this.reset():void(this.flags.refreshed&&this.options.lockRefresh||(i=parseInt(t/this.options.sensibility,10),this.positions.lastStep!=i&&(o=parseInt(100*t/this.options.refresh,10),this.$element.trigger(n.namespace("move"),o),this.positions.lastStep=i),this.transform(this.$element[0].style,t),e.stopPropagation(),e.preventDefault()))}},n.prototype.reset=function(){this.transition(this.$element[0].style,this.options.resetSpeed),this.transform(this.$element[0].style,0),this.flags.touched=!1,this.flags.isTouch=!1,this.flags.refreshed=!1,this.positions.startY=!1,this.positions.delta=0},n.prototype.onTouchEnd=function(t){if(this.flags.touched){var i=this.positions.delta;this.flags.prevented=!1,this.positions.startY=0,this.positions.startX=0,this.reset(),this.$element.trigger(n.namespace("end")),t.stopPropagation(),t.preventDefault();var o=t.target.click||t.target.onclick;o&&Math.abs(i)<=this.options.click&&e(t.target).trigger("click")}};var i=e.fn.pullToRefresh;e.fn.pullToRefresh=function(t){return this.each(function(){var i=e(this),o=i.data(n.key),r=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);return o||"destroy"!=t?(o||(i.data(n.key,o=new n(this,r)),r.autoInit&&o.construct()),void("string"==typeof t&&o[t].apply(o))):n.destroy()})},e.fn.pullToRefresh.Constructor=n,e.fn.pullToRefresh.noConflict=function(){return e.fn.pullToRefresh=i,this}}($,"#pp-conversation-content"),function(e){e.extend(e.easing,{easeInQuart:function(e,t,n,i,o){return i*(t/=o)*t*t*t+n}})}($),function(){Service._booted=!1,Service.bootMe=function(e){Service._booted&&!e||(Service.$cookies=new Service.PPCookies,Service.$tools=new Service.PPTools,Service.$errorHint=new Service.ErrorHint,Service.$publicApi=new Service.PublicAPI,Service.$startUp=new Service.PPStartUp(Service.$api,Service.$device),Service.$conversationManager.init(),Service._booted=!0)}}(),function(e){function t(){}e.BaseService=t}(Service),function(e){function t(){}t.MSG_SUBMIT_SOUND_URL=Configuration.assets_path+"submit.mp3",t.MSG_DELIVERED_SOUND_URL=Configuration.assets_path+"delivered.mp3",t.MSG_NOTIFICATION_SOUND_URL=Configuration.assets_path+"notification.mp3",t.ICON_DEFAULT_LAUNCHER=Configuration.assets_path+"img/logo_1.png",t.DEFAULT_HEADER_TITLE="PPMessage",t.ICON_DEFAULT_USER=Configuration.assets_path+"img/logo_1.png",t.USER_DEFAULT_NAME="Anonymous",t.STYLE={PANEL_WIDTH:368},t.EVENT={NEW_MESSAGE_ARRIVED:"message:NEW_ARRIVED",ON_TEXTAREA_HEIGHT_CHANGED:"textarea:height-change"},t.MESSAGE={TYPE_TEXT:"TEXT",TYPE_IMAGE:"IMAGE",TYPE_FILE:"FILE",TYPE_WELCOME:"WELCOME",TYPE_TIMESTAMP:"TIMESTAMP",TO_TYPE:"P2S"},t.MAX_UPLOAD_SIZE=41943040,t.MAX_UPLOAD_SIZE_STR="4MB",t.MESSAGE_TYPE={NOTI:"NOTI",SYS:"SYS"},t.FILE={ROOT:"PP"},t.MESSAGE_SUBTYPE={FILE:"FILE",TEXT:"TEXT",IMAGE:"IMAGE",MENU:"MENU",EVENT:"EVENT",LOGOUT:"LOGOUT"},t.I18N={"zh-CN":{START_CONVERSATION_HINT:"按“回车键”发送",START_CONVERSATION_MOBILE_HINT:"",ERROR_TEXT_TOO_LONG:"字数太长",WELCOME_MSG:"您好，请问有什么可以帮助您的？",CLOSE_BUTTON_HINT:"结束会话",MINIZE_BUTTON_HINT:"最小化",MAXIMUM_UPLOAD_SIZE_HINT:"最大文件大小为",PPMESSAGE:"皮皮消息",HOVER_CARD_TEXTAREA_HINT:"开始对话",DEFAULT_SERVE_NAME:"客服",UPLOADING_HINT:"正在上传",SEND:"发送",WAITING_AVALIABLE_CONVERSATION:"正在等待客服...",WAITING_LENGTH_HINT:"正在排队中，当前共有%s人正在等待",WAITING_HINT:"正在排队中...",LOAD_HISTORY_HINT:"点击加载历史消息",LOAD_HISTORY_MOBILE_HINT:"下拉加载历史消息",LOADING_HISTORY:"正在加载...",NO_MORE_HISTORY:"没有更多历史消息",IMAGE:"图片",FILE:"文件",SEND_ERROR:"发送失败",SERVICE_NOT_AVALIABLE:"服务不可用",CANCELED:"已取消",SENDING:"正在发送",CLOSE:"关闭",CONSULT_WORKING_TIME:"服务时间",CONTACT_NUMBER:"联系电话",ONLINE:"在线",OFFLINE:"离线",SYSTEM_MSG:"系统消息",TYPING:"对方正在输入...",CONVERSATIONS:"会话",WRITE_TO_REPLY:"回复",VIEW_MORE:"查阅更多",SMS:"短信",EMAIL:"邮件",NUMBER_MISSING_A_FEW_DIGITS:"该号码似乎不正确",EMAIL_ADDRESS_DOESNT_LOOK_QUITE_RIGHT:"该电子邮件地址似乎不正确",GET_NOTIFIED:"接受通知",YOULL_BE_NOTIFIED:"您将会通过以下方式获取通知",timeFormat:function(t){return e.$tools.formatTime(t,{year:"年",month:"月",day:"日",today:"今天",yesterday:"昨天"})}},en:{START_CONVERSATION_HINT:'Press "Enter key" to send',START_CONVERSATION_MOBILE_HINT:"",ERROR_TEXT_TOO_LONG:"Text is too long",WELCOME_MSG:"Hello, what can I do for you ?",CLOSE_BUTTON_HINT:"Close Conversation",MINIZE_BUTTON_HINT:"Minimization",MAXIMUM_UPLOAD_SIZE_HINT:"The maximum upload size is ",PPMESSAGE:"PPMessage",HOVER_CARD_TEXTAREA_HINT:"Start a conversation",DEFAULT_SERVE_NAME:"Service",UPLOADING_HINT:"Uploading",SEND:"Send",WAITING_AVALIABLE_CONVERSATION:"Waiting service ...",WAITING_LENGTH_HINT:"There are total %s person in the queue",LOAD_HISTORY_HINT:"Click to load history",LOAD_HISTORY_MOBILE_HINT:"Pull to load history",LOADING_HISTORY:"Loading...",NO_MORE_HISTORY:"No more history",IMAGE:"Image",FILE:"File",SEND_ERROR:"Send Error",SERVICE_NOT_AVALIABLE:"Service Not Avaliable",CANCELED:"Cancled",SENDING:"Sending",CLOSE:"Close",CONSULT_WORKING_TIME:"Online Time",CONTACT_NUMBER:"Contact Number",ONLINE:"Online",OFFLINE:"Offline",SYSTEM_MSG:"System message",TYPING:"Typing...",CONVERSATIONS:"Conversations",WRITE_TO_REPLY:"Write to reply",VIEW_MORE:"View More",SMS:"SMS",EMAIL:"Email",NUMBER_MISSING_A_FEW_DIGITS:"This number is missing a few digits",EMAIL_ADDRESS_DOESNT_LOOK_QUITE_RIGHT:"This email doesn't look quite right",GET_NOTIFIED:"Get notified",YOULL_BE_NOTIFIED:"You'll be notified here and by",timeFormat:function(t){return e.$tools.formatTime(t,{year:"-",month:"-",day:"",today:"Today",yesterday:"Yesterday"})}}},t.i18n=function(t){return e.Constants.I18N[e.$language.getLanguage()][t]},e.Constants=t}(Service),function(e){function t(){var t=null,n=null,i=null,o=null,r=function(t,n){e.$debug.d("[PPAPI] [Error]: ",t),e.$errorHint.warn(e.ErrorHint.ERROR_SERVICE_NOT_AVALIABLE),n&&n(t)},a=function(t,n){e.$debug.d("[PPAPI] [Fail]: ",t),n&&n(t)},s=function(t,n){e.$debug.d("[PPAPI] [Success]: ",t),n&&n(t)},p=function(e,t,n){if(e&&void 0!==e.error_code){var i=!1;switch(e.error_code){case 0:i=!0}i?s(e,t):a(e,n)}else a(e,n)},u=function(t,n){e.$debug.d("[PPAPI] [Request]: ",t,n)};this._post=function(n,i,o,a){if(null==t)return e.$debug.d("[PPAPI] [Error]: ","no token"),void e.$errorHint.warn(e.ErrorHint.ERROR_SERVICE_NOT_AVALIABLE);var s=Configuration.api+n;$.support.cors=!0,$.ajax({url:s,type:"post",data:e.$json.stringify(i),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"OAuth "+t},cache:!1,crossDomain:!0,beforeSend:function(){u(s,i)},success:function(e){p(e,o,a)},error:function(e,t,n){r(t,a)}})},this.init=function(e,t,r){o=e,n=t,i=r},this.getPPComToken=function(e,o){var a=Configuration.auth+"/token",p="client_id="+n+"&client_secret="+i+"&grant_type=client_credentials";$.support.cors=!0,$.ajax({url:a,type:"post",data:p,headers:{"Content-Type":"application/x-www-form-urlencoded"},cache:!1,crossDomain:!0,beforeSend:function(){u(a,p)},success:function(n){t=n.access_token,s(n,e)},error:function(e,t,n){r(t,o)}})},this.request=function(e,t,n,i){this._post(e,$.extend({},t),n,i)},this.updateUser=function(e,t,n){this._post("/PP_UPDATE_USER",$.extend({},e),t,n)},this.getConversationList=function(e,t,n){this._post("/PP_GET_USER_CONVERSATION_LIST",$.extend({},e),t,n)},this.getConversation=function(e,t,n){this.getConversationList(e,t,n)},this.createConversation=function(e,t,n){this._post("/PP_CREATE_CONVERSATION",$.extend({},e),t,n)},this.sendMessage=function(e,t,n){this._post("/PP_SEND_MESSAGE",e,t,n)},this.ackMessage=function(e,t,n){this._post("/ACK_MESSAGE",$.extend({},e),t,n)},this.createAnonymousUser=function(e,t,n){this._post("/PPCOM_CREATE_ANONYMOUS",$.extend({},e),t,n)},this.getUserUuid=function(e,t,n){this._post("/PPCOM_GET_USER_UUID",$.extend({},e),t,n)},this.getUserDetailInfo=function(e,t,n){this._post("/GET_YVOBJECT_DETAIL",$.extend({},e),t,n)},this.pageMessageHistory=function(e,t,n){this._post("/PP_PAGE_HISTORY_MESSAGE",$.extend({},e),t,n)},this.getAppInfo=function(e,t,n){this._post("/PP_GET_APP_INFO",$.extend({},e),t,n)},this.getConversationUserList=function(e,t,n){this._post("/PP_GET_CONVERSATION_USER_LIST",$.extend({},e),t,n)},this.getPPComDefaultConversation=function(e,t,n){this._post("/PPCOM_GET_DEFAULT_CONVERSATION",$.extend({},e),t,n)},this.createPPComConversation=function(e,t,n){this._post("/PPCOM_CREATE_CONVERSATION",$.extend({},e),t,n)},this.getConversationInfo=function(e,t,n){this._post("/PP_GET_CONVERSATION_INFO",$.extend({},e),t,n)},this.getIPInfo=function(e,t,n){this._post("/PP_GET_IP_INFO",$.extend({},e),t,n)},this.trackEvent=function(e,t,n){this._post("/PPCOM_TRACK_EVENT",$.extend({},e),t,n)},this.getAppUuid=function(){return o},this.getApiToken=function(){return t}}e.$api=new t}(Service),Service.$rootCache=function(){var e={},t=function(t){return e[t]},n=function(t,n){e[t]=n},i=function(t){return void 0!==e[t]};return{get:t,set:n,exist:i}}(),function(e){function t(){}t.prototype._api=function(e,t,n){if(arguments.length>1){if(n=n||{},"number"==typeof n.expires){var i=new Date;i.setMilliseconds(i.getMilliseconds()+1e3*n.expires),n.expires=i}return document.cookie=[e,"=",t,n.expires&&"; expires="+n.expires.toUTCString(),n.path&&"; path="+n.path,n.domain&&"; domain="+n.domain,n.secure?"; secure":""].join("")}for(var o,r=document.cookie?document.cookie.split("; "):[],a=0;a<r.length;a++){var s=r[a].split("="),p=s[0],t=s[1];if(p===e){o=t;break}}return o},t.prototype.set=function(e,t,n){return this._api(e,t,n)},t.prototype.get=function(e){return this._api(e)},e.PPCookies=t}(Service),function(e){function t(){}t.ERROR_ILLEGAL_APPUUID=1e4,t.ERROR_ILLEGAL_USER_EMAIL=10001,t.ERROR_IE9_OR_LOWER_BROWSER=10002,t.ERROR_SERVICE_NOT_AVALIABLE=10003,t.ERROR_ILLEGAL_USER_EMAIL_STYLE=10004,t._ERROR_INFO={1e4:"appUuid not provide, Please check your appUuid and try again",10001:"Can not find user by the user_email, please check your user_email and try again",10002:"Can not run ppMessage on IE 9 or lower version browser",10003:"Service not avaliable",10004:"Not a valid user_email"},t.prototype._getErrorDescription=function(e){for(var n in t._ERROR_INFO)if(n==e)return t._ERROR_INFO[n];return""},t.prototype._getErrorLogDescription=function(e){return"number"==typeof e?"PPMessage: [errorCode:"+e+", errorDescription:'"+this._getErrorDescription(e)+"']":e},t.prototype.warn=function(e){window.console&&window.console.warn&&console.warn(this._getErrorLogDescription(e))},t.prototype.error=function(e){window.console&&window.console.error&&console.error(this._getErrorLogDescription(e))},e.ErrorHint=t}(Service),function(e){var t=function(){function t(n){var i=$.extend({},t.DEFAULTS,n),o=function(e){return!!e.user_uuid&&(e.user_fullname&&e.user_fullname!=i.user_fullname||e.user_avatar&&e.user_avatar!=i.user_avatar)},r=function(e){return!!e.user_uuid&&e.is_online!==i.is_online};this.getInfo=function(){return i},this.update=function(t){if(!t.user_uuid)return this;var n=o(t),a=r(t);return i=$.extend({},i,t),n&&e.$pubsub.publish("user/infochange/"+i.user_uuid,this),a&&e.$pubsub.publish("user/infochange/state/"+i.user_uuid,this),this}}function n(e){return new t(e)}function i(e){return d[e]}function o(e,t){e&&t&&(d[e]=t)}function r(){d={}}function a(e){return!!e&&void 0!==d[e]}function s(t,r){if(a(t.user_uuid))return u(t),void(r&&r(i(t.user_uuid)));if(t.user_uuid&&t.user_fullname&&t.user_avatar){var s=n(t);return o(t.user_uuid,s),void(r&&r(s))}e.$api.getUserDetailInfo({uuid:t.user_uuid,type:"DU"},function(i){var a=$.extend({},{user_email:i.email,user_fullname:i.fullname?i.fullname:e.Constants.USER_DEFAULT_NAME,user_uuid:i.uuid,user_avatar:i.icon?e.$tools.getFileDownloadUrl(i.icon):e.Constants.ICON_DEFAULT_USER},t),s=n(a);o(t.user_uuid,s),r&&r(s)},function(e){r&&r(null)})}function p(){return d}function u(e){e&&e.user_uuid&&a(e.user_uuid)&&i(e.user_uuid).update(e)}function c(t){if(t){var n=t.uuid||t.user_uuid,i=e.$tools.icon.get(t.user_icon||t.icon||t.user_avatar),o=t.user_fullname,r=t.is_mobile_online||t.is_browser_online,a=t.is_browser_online,s=t.is_mobile_online,p=t.user_signature?t.user_signature:"";return{user_uuid:n,user_fullname:o,user_avatar:i,user_signature:p,is_online:r,is_browser_online:a,is_mobile_online:s}}}function l(e){if(e&&e.user_uuid){var t=e.user_uuid;return a(t)?i(t).update(e):(o(t,n(e)),i(t))}}var d={};return t.DEFAULTS={is_portal_user:!1,is_anonymous:!0,ppcom_trace_uuid:null,user_fullname:e.Constants.USER_DEFAULT_NAME,user_avatar:e.Constants.ICON_DEFAULT_USER,user_uuid:"",device_uuid:"",user_signature:"",is_browser_online:!1,is_mobile_online:!1,is_online:!1},{createUser:n,getUser:i,getOrCreateUser:l,asyncGetUser:s,getUsers:p,setUser:o,updateUser:u,adapter:c,clear:r,exist:a}}();e.$users=t}(Service),Service.$user=function(){function e(e){if(e)return Service.$users.getUser(e)}function t(t){if(t){var n=e(t),i=n&&n.getInfo();return i}}var n=null;return{getUser:function(){return n?e(n):null},setUser:function(e){n=e.user_uuid,Service.$users.setUser(n,Service.$users.createUser(e))},offline:function(){if(n){var i=t(n);i&&i.device_uuid&&i.is_online&&e(n).update({user_uuid:n,is_online:!1})}},online:function(){if(n){var i=t(n);i&&i.device_uuid&&!i.is_online&&e(n).update({user_uuid:n,is_online:!0})}},clear:function(){n=null},quickId:function(){return n},quickDeviceUUID:function(){var e=t(n);return e&&e.device_uuid}}}(),function(){var e=function(){var e=null,t=null,n="pp-id",i={user_id:null,user_createtime:null,app_uuid:null,api_key:null,api_secret:null,user_email:null,user_name:null,user_icon:null,language:window.navigator.userLanguage||window.navigator.language,view:{launcher_bottom_margin:"20px",launcher_right_margin:"20px",launcher_is_show:!0}},o=function(t){d(),e=$.extend({},i,t),e.api_key=Configuration.api_key,e.api_secret=Configuration.api_secret},r=function(){return e},a=function(){return null==e?null:null!=t?t:t={user_id:e.user_id,user_createtime:e.user_createime,user_email:e.user_email,user_fullname:e.user_name,user_avatar:e.user_icon,user_uuid:null,device_uuid:null,is_portal_user:!0,is_anonymous:e.user_id&&e.user_createtime,ppcom_trace_uuid:function(){var e=Service.$cookies.get(n)||function(){var e=Service.$tools.getUUID();return Service.$cookies.set(n,e,{expires:47304e4}),e}();return e}()}},s=function(e){t=$.extend(a(),e)},p=function(){return e.language},u=function(){return e.app_uuid},c=function(){return e.api_key},l=function(){return e.api_secret},d=function(){e=null,t=null};return{init:o,getSettings:r,getUserSettings:a,updateUserSettings:s,getLanguage:p,getAppUuid:u,getApiKey:c,getApiSecret:l,clear:d}}();Service.$ppSettings=e}(),function(e){function t(){var e=!0,t=!1,n=!("undefined"==typeof console||"undefined"==typeof console.log),i=n&&!("unknown"==typeof console.log.apply||"undefined"==typeof console.log.apply),o="↓↓↓↓↓↓↓↓↓↓",r="font-size:28px; color:blue;";this.h=function(){if(n){if(e){var t="%c"+o;this.d(t,r)}return this}},this.d=function(){if(n){if(e)if(t)t=!1;else{var o=Array.prototype.slice.call(arguments);i?console.log.apply(console,o):console.log(o)}return this}},this.error=function(){if(n){if(e)if(t)t=!1;else{var o=Array.prototype.slice.call(arguments);i?console.error.apply(console,o):console.error(o)}return this}},this.close=function(e){return this},this.debug=function(t){return e=t,this}}e.$debug=new t}(Service),function(e){e.$device=function(){var t,n=(window,736),i="pp-device-id",o=31536e4,r=navigator.userAgent,a=navigator.platform,s=/iPhone|iPad|iPod/i.test(r),p=/Android/i.test(r),u=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(r),c=/Windows Phone/i.test(r)||/iemobile/i.test(r)||/WPDesktop/i.test(r),l=a.toUpperCase().indexOf("MAC")>=0,d=a.toUpperCase().indexOf("WIN")>-1,f=a.toUpperCase().indexOf("LINUX")>-1,g={MAC:"MAB",LIN:"LIB",WIN:"WIB"},h=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],m="unknown";for(var v in h){var b=h[v];if(b.r.test(r)){m=b.s;break}}var x="unknown";switch(/Windows/.test(m)&&(x=/Windows (.*)/.exec(m)[1],m="Windows"),m){case"Mac OS X":x=/Mac OS X (10[\.\_\d]+)/.exec(r)[1];break;case"Android":x=/Android ([\.\_\d]+)/.exec(r)[1];break;case"iOS":x=/OS (\d+)_(\d+)_?(\d+)?/.exec(navigator.appVersion||""),x=x[1]+"."+x[2]+"."+(0|x[3])}var y,w=window.navigator.appName,C=window.navigator.appVersion;(y=r.indexOf("Opera"))!=-1?(w="Opera",C=r.substring(y+6),(y=r.indexOf("Version"))!=-1&&(C=r.substring(y+8))):(y=r.indexOf("MSIE"))!=-1?(w="Microsoft Internet Explorer",C=r.substring(y+5)):(y=r.indexOf("Chrome"))!=-1?(w="Chrome",C=r.substring(y+7)):(y=r.indexOf("Safari"))!=-1?(w="Safari",C=r.substring(y+7),(y=r.indexOf("Version"))!=-1&&(C=r.substring(y+8))):(y=r.indexOf("Firefox"))!=-1?(w="Firefox",C=r.substring(y+8)):(nameOffset=r.lastIndexOf(" ")+1)<(y=r.lastIndexOf("/"))&&(w=r.substring(nameOffset,y),C=r.substring(y+1),w.toLowerCase()==w.toUpperCase()&&(w=window.navigator.appName));var S;return(S=C.indexOf(";"))!=-1&&(C=C.substring(0,S)),(S=C.indexOf(" "))!=-1&&(C=C.substring(0,S)),this.getDeviceWidth=function(){return $(window).width()},this.getDeviceHeight=function(){return $(window).height()},this.inMobile=function(){return $(window).width()<=n},this.inMobileWidth=this.inMobile,this.disableScroll=function(){$("html, body").css({overflow:"hidden",height:"100%"})},this.enableScroll=function(){$("html, body").css({overflow:"auto",height:"auto"})},this.isIOS=function(){return s},this.isAndroid=function(){return p},this.isMobileBrowser=function(){return u},this.isIE=function(){var e=r,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var n=e.indexOf("Trident/");if(n>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var o=e.indexOf("Edge/");return o>0&&parseInt(e.substring(o+5,e.indexOf(".",o)),10)},this.isIE9=function(){var e=this.isIE();return e&&9==e},this.isIE9OrLowerVersionBrowser=function(){var e=this.isIE();return e&&e<=9},this.isWindowsPlatform=function(){return d},this.isMac=function(){return l},this.isFirefox=function(){return"undefined"!=typeof InstallTrigger},this.getOSType=function(){return p||f?g.LIN:s||l?g.MAC:c||d?g.WIN:g.MAC},this.getDeviceId=function(){return t?t:t=e.$cookies.get(i)||function(){var t=e.$tools.getUUID();return e.$cookies.set(i,t,{expires:o}),t}()},this.getOSName=function(){return m},this.getOSVersion=function(){return x},this.getBrowserName=function(){return w},this.getBrowserVersion=function(){return C},this.getBrowserLanguage=function(){return window.navigator.userLanguage||window.navigator.language},this}()}(Service),Service.$encryption=function(){function e(e){function t(e){for(var t,n=l?"0123456789ABCDEF":"0123456789abcdef",i="",o=0;o<e.length;o++)t=e.charCodeAt(o),i+=n.charAt(t>>>4&15)+n.charAt(15&t);return i}function n(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>24-n%32&255);return t}function i(e,t){e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t;for(var n=Array(80),i=1732584193,o=-271733879,p=-1732584194,c=271733878,l=-1009589776,d=0;d<e.length;d+=16){for(var f=i,g=o,h=p,m=c,v=l,b=0;b<80;b++){b<16?n[b]=e[d+b]:n[b]=a(n[b-3]^n[b-8]^n[b-14]^n[b-16],1);var x=u(u(a(i,5),s(b,o,p,c)),u(u(l,n[b]),r(b)));l=c,c=p,p=a(o,30),o=i,i=x}i=u(i,f),o=u(o,g),p=u(p,h),c=u(c,m),l=u(l,v)}return Array(i,o,p,c,l)}function o(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(var n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}function r(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function a(e,t){return e<<t|e>>>32-t}function s(e,t,n,i){return e<20?t&n|~t&i:e<40?t^n^i:e<60?t&n|t&i|n&i:t^n^i}function p(e){return n(i(o(e),8*e.length))}function u(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n}function c(e){for(var t,n,i="",o=-1;++o<e.length;)t=e.charCodeAt(o),n=o+1<e.length?e.charCodeAt(o+1):0,55296<=t&&t<=56319&&56320<=n&&n<=57343&&(t=65536+((1023&t)<<10)+(1023&n),o++),t<=127?i+=String.fromCharCode(t):t<=2047?i+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?i+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(i+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return i}var l=0;return t(p(c(e)))}return{hex_sha1:e}}(),function(e){var t=function(){var n="file-upload-",i={},o=t.ERROR_CODE,r=function(e,t){var n=new XMLHttpRequest;return"withCredentials"in n?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest,n.open(e,t)):n=null,n},a=function(t){var a=e.$json,s=null,p=t.type,u=n+e.$tools.getUUID(),c=null,l=null,d=null,f={uploadId:u,state:"RUNNING",progress:0},g=function(e){var t=null;switch(p){case"file":t=a.parse(e).fuuid;break;default:console.error("error type: %s",p)}return{fuuid:t}};switch(i[u]=this,p){case"file":s=Configuration.file_upload_url;break;default:console.error("can not handler: %s",p)}var h=r("post",s);switch("file"==p&&(h.upload.onprogress=function(e){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);"RUNNING"==f.state&&(f.progress=t,d&&d(t))}}),h.onerror=function(e){l&&l(o.SERVICE_NOT_AVALIABLE)},h.onabort=function(e){l&&l(o.CANCEL)},h.onload=function(e){f.state="FINISH",f.progress=100,c&&c(g(h.responseText))},p){case"file":var m=new FormData;m.append("file",t.content),m.append("upload_type","file"),m.append("subtype","FILE"),m.append("user_uuid",e.$user.getUser().getInfo().user_uuid),h.send(m)}this.progress=function(e){return d=e,this},this.done=function(e){return c=e,this},this.fail=function(e){return l=e,this},this.cancel=function(){"CANCEL"!=f.state&&(f.state="CANCEL",h.abort())},this.query=function(){return f}};this.upload=function(e){return new a(e)},this.cancel=function(e){e&&i[e]&&i[e].cancel()},this.clear=function(){var e=this;$.each(i,function(t,n){e.cancel(t)})}};t.ERROR_CODE={SERVICE_NOT_AVALIABLE:0,CANCEL:1},e.Uploader=t,e.$uploader=new t}(Service),Service.$language=function(){function e(){return i}function t(e){switch(e&&(e=e.toLowerCase()),e){case"zh":case"zh-cn":case"zh-hk":case"zh-tw":case"zh-sg":i="zh-CN";break;case"en":case"en-us":i="en";break;default:i=n}}var n="en",i=n;return{getLanguage:e,setLanguage:t}}(),function(e){function t(){var t=this,i={get:function(n){var i=t.getFileDownloadUrl(n);return i||e.Constants.ICON_DEFAULT_USER}};this.scrollbarWidth=n(),this.getUUID=function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:7&n|8).toString(16)});return t},this.isImage=function(e){var t=!1;if(e){var n=e.lastIndexOf(".");if(n!=-1&&0!=n){var i=e.substring(n+1);i&&(i=i.toLowerCase()),"jpg"!=i&&"jpeg"!=i&&"png"!=i&&"gif"!=i||(t=!0)}}return t},this.messageAdapter=function(e){return e},this.getMessageUploadId=function(t){var n="";switch(t.messageType){case e.PPMessage.TYPE.FILE:n=t.message.file.fileUploadId;break;case e.PPMessage.TYPE.IMAGE:n=t.message.image.fileUploadId}return n},this.isMessageSendError=function(t){return t.messageState==e.PPMessage.STATE.ERROR||"CANCELED"==t.messageState},this.isUploading=function(t){return t.messageState==e.PPMessage.STATE.BEGIN_UPLOAD},this.getFileDownloadUrl=function(t,n){if(t){var i=/(^https?:\/\/)|(^w{3})/.test(t),o=i?t:Configuration.file_download_url+t;return n&&(o+="?file_name="+e.$gb2312utf8.GB2312ToUTF8(n)),o}},this.getRemoteTextFileContent=function(e,t,n){var i=this.getFileDownloadUrl(e);$.get(i,function(e){t&&t(e)}).fail(function(){n&&n()})},this.getTimestamp=function(e){e.length>=19&&(e=e.substring(0,19));var t=new Date(e.replace("-","/"));return t.getTime()},this.padNumber=function(e){return e<10?"0"+e.toString():e.toString()},this.formatTime=function(e,n){var i=new Date(e),o=i.getFullYear(),r=i.getMonth(),a=i.getUTCDate(),s=i.getHours(),p=i.getMinutes(),u=new Date,c=u.getFullYear(),l=u.getMonth(),d=u.getUTCDate(),f=n.year,g=n.month,h=n.day,m=n.today,v=n.yesterday;return o==c&&r==l&&a==d?m+" "+t.padNumber(s)+":"+t.padNumber(p):u.getTime()-i.getTime()<=864e5?v+" "+t.padNumber(s)+":"+t.padNumber(p):o<c?o+f+t.padNumber(r+1)+g+t.padNumber(a)+h+" "+t.padNumber(s)+":"+t.padNumber(p):o==c&&r<=l?t.padNumber(r+1)+g+t.padNumber(a)+h+" "+t.padNumber(s)+":"+t.padNumber(p):o+f+t.padNumber(r+1)+g+t.padNumber(a)+h+" "+t.padNumber(s)+":"+t.padNumber(p)},this.validateEmail=function(e){var t=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return t.test(e)},this.validatePhoneNumber=function(e){var t=/^(00)|(\+)\d+/g;return t.test(e)},this.cssNum=function(e){return parseFloat(e)},this.reverseArray=function(e){return e&&0!==e.length?e.reverse():e},this.icon=i,this.isNull=function(e){return null===e||void 0===e},this.isApiResponseEmpty=function(e){if(!e)return!0;if(0!==e.error_code)return!1;var t=$.extend({},e);return delete t.error_code,delete t.error_string,delete t.uri,$.isEmptyObject(t)},this.format=function(e){var t=[].slice.call(arguments,1),n=0;return e.replace(/%s/g,function(){return t[n++]})},this.timeago=function(t){var n=e.$ppSettings.getLanguage(),i=n?n.toLowerCase():n;return i&&"zh-cn"===i&&(i="zh_CN"),(new timeago).format(t,i)}}function n(){var e=$("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),t=$("<div>").css({width:"100%"}).appendTo(e).outerWidth();return e.remove(),100-t}e.PPTools=t}(Service),Service.$ppmatc=function(){function e(){return 0==c?void Service.$errorHint.warn("Service.$ppmatc already started!"):(Service.$debug.d("Service.$ppmatc start!"),c=!1,p=void 0!==window._ppmatc&&window._ppmatc||[],void(s=window.setInterval(i,u)))}function t(){s&&(window.clearInterval(s),s=void 0),c=!0,Service.$debug.d("Service.$ppmatc stop!")}function n(){return!c}function i(){if(p&&p.length>0){var e=p.pop();r(o(e),e)}}function o(e){function t(e){return e&&l in e&&e[l].ent_user_name&&e[l].ent_user_id&&e[l].ent_user_createtime}function n(e){return e&&d in e&&e[d].track_event_name&&e[d].track_event_data}function i(e){return e&&f in e&&e[f].app_uuid}return t(e)?l:n(e)?d:i(e)?f:g}function r(e,t){switch(Service.$debug.d("Exec event: ",e,t),e){case l:var n=Service.$ppSettings.getSettings();PP.shutdown(),n.ent_user=t[l],PP.boot(n);break;case d:a(t);break;case f:t[f].app_uuid!==Service.$ppSettings.getAppUuid()?PP.boot(t[f]):(PP.hide(),View.$settings.init(t[f]),View.$settings.getLaunchStyle().mode.toLowerCase()===View.Settings.LAUNCH_MODE.CUSTOM?(View.$launcher.hideLauncher(),View.$conversation.makeConversationPanelVisible()):$(".pp-launcher").show());
break;case g:Service.$errorHint.warn("[Service.$ppmatc] Unsupported event: ",t)}}function a(e){Service.$api.trackEvent({app_uuid:Service.$app.appId(),user_uuid:Service.$user.quickId(),device_uuid:Service.$user.quickDeviceUUID(),event_name:e.event_name,event_data:e.event_data})}var s,p,u=3e3,c=!0,l="ent_user",d="track_event",f="pp_settings",g="UNKNOWN";return{start:e,stop:t,isStarted:n}}(),function(e){function t(t,n){var i=e.ErrorHint,o=function(n,i,o){t.createAnonymousUser({app_uuid:e.$ppSettings.getAppUuid(),ppcom_trace_uuid:n},i,o)},r=function(n,i,o,r){if(n.user_fullname||n.user_avatar){var a={app_uuid:e.$ppSettings.getAppUuid(),user_uuid:n.user_uuid,user_fullname:n.user_fullname,user_icon:n.user_avatar,user_email:n.user_email};t.updateUser(a,o,r)}else e.$ppSettings.updateUserSettings({user_fullname:i.user_fullname,user_avatar:i.user_avatar}),o&&o()},a=function(i,o,r){t.request("/PPCOM_CREATE_DEVICE",{is_browser_device:!0,app_uuid:e.$ppSettings.getAppUuid(),user_uuid:i.user_uuid,device_ostype:n.getOSType(),ppcom_trace_uuid:i.ppcom_trace_uuid,device_id:n.getDeviceId()},function(t){e.$ppSettings.updateUserSettings({device_uuid:t.device_uuid}),o&&o(t)},function(e){r&&r(e)})},s=function(t,n,i){return function(){e.$user.setUser(t),View.Style.init(),$(document.body).append((new View.PPContainer).getElement()),e.$messageReceiverModule.start({user_uuid:t.user_uuid,device_uuid:t.device_uuid,app_uuid:e.$ppSettings.getAppUuid()}),setTimeout(function(){View.$conversation.prepare(),n&&n()})}},p=function(t,n,i){var p=t.ppcom_trace_uuid;o(p,function(o){e.$ppSettings.updateUserSettings({user_uuid:o.user_uuid}),r(t,{user_fullname:o.user_fullname,user_avatar:null},null,null),a(t,s(t,n,i),null)},i)},u=function(n,i,o){e.$ppSettings.getSettings();t.getUserUuid({app_uuid:e.$ppSettings.getAppUuid(),ent_user_id:n.user_id,ent_user_createtime:n.user_createtime,user_email:n.user_email,user_icon:n.user_avatar,user_fullname:n.user_fullname,ppcom_trace_uuid:n.ppcom_trace_uuid},function(p){t.getUserDetailInfo({uuid:p.user_uuid,type:"DU"},function(t){e.$ppSettings.updateUserSettings({user_uuid:t.uuid}),r(n,{user_fullname:t.fullname,user_avatar:t.icon},null,null),a(n,s(n,i,o),null)},function(e){})},function(){o&&o(e.ErrorHint.ERROR_ILLEGAL_USER_EMAIL)})};this.startUp=function(t,o,r){if(n.isIE9OrLowerVersionBrowser())return void(r&&r(i.ERROR_IE9_OR_LOWER_BROWSER));var a={};$.extend(!0,a,t),e.$ppSettings.init(a),View.$settings.init(a),e.$ppSettings.getAppUuid()?(e.$api.init(e.$ppSettings.getAppUuid(),e.$ppSettings.getApiKey(),e.$ppSettings.getApiSecret()),e.$language.setLanguage(e.$ppSettings.getLanguage()),e.$api.getPPComToken(function(t){e.$api.getAppInfo({app_uuid:e.$ppSettings.getAppUuid()},function(t){e.$app.set(t);var n=e.$ppSettings.getUserSettings();n.is_anonymous?u(n,o,r):p(n,o,r)},function(e){r&&r(i.ERROR_SERVICE_NOT_AVALIABLE)})},function(e){r&&r(i.ERROR_SERVICE_NOT_AVALIABLE)})):r&&r(i.ERROR_ILLEGAL_APPUUID)}}t.bootServices=function(t){e.bootMe(t),View.bootMe(t)},e.PPStartUp=t}(Service),function(e){function t(){this._booted=!1,this._onShowEvent=null,this._onHideEvent=null}t.prototype._clearData=function(){e.$uploader.clear(),e.$notification.reset(),Ctrl.$conversationPanel.stopPolling()},t.prototype.boot=function(t,n){if(e.$ppmatc.isStarted()||e.$ppmatc.start(),t&&!this._booted){this._booted=!0;var i=this;e.$startUp.startUp(t,function(){i._booted=!0,$.isFunction(n)&&n(!0)},function(t){i._booted=!1,i._clearData(),e.$errorHint.warn(t),$.isFunction(n)&&n(!1,t)})}},t.prototype.show=function(){if(this._booted){var e=Ctrl.$launcher.get();e&&(e.showMessageBox(),this._onShowEvent&&"function"==typeof this._onShowEvent&&this._onShowEvent())}},t.prototype.hide=function(){if(this._booted){var e=Ctrl.$sheetheader;e&&(e.minimize(),this._onHideEvent&&"function"==typeof this._onHideEvent&&this._onHideEvent())}},t.prototype.isOpen=function(){return this._booted&&Ctrl.$conversationPanel.isOpen()},t.prototype.onShow=function(e){this._onShowEvent=e},t.prototype.onHide=function(e){this._onHideEvent=e},t.prototype.shutdown=function(){this._booted&&($("#pp-container").remove(),this._booted=!1,this._clearData())},t.prototype.update=function(t){if(!this._booted)return!1;var n=t,i=e.$api,o=e.$user.getUser();return!n||!o||n.app_uuid!=i.getAppUuid()||n.user_email!=o.getInfo().user_email},e.PublicAPI=t}(Service),function(e){function t(){}t.reposity={},t.clear=function(){t.reposity={}},t.prototype.get=function(e){return t.reposity[e]},t.prototype.set=function(e,n){t.reposity[e]=n},t.prototype.remove=function(e){delete t.reposity[e]},e.BaseStorage=t}(Service),function(e){var t=function(){function e(e){return n.parseJSON(e)}function t(e){return JSON.stringify(e)}var n=$;return{parse:e,stringify:t}}();e.$json=t}(Service),function(e){function t(e,t){if(!e){if(t=t||"Assertion failed","undefined"!=typeof Error)throw new Error(t);throw t}}e.assert=t}(fn),Service.$schedule=function(){function e(e,t){var i,r,a,s=e,p=t,u=!1,c=!1;this.after=function(e,t){return i=e,a=t||n,this},this.onCancel=function(e){return r=e,this},this.cancel=function(){u=!0,void 0!==r&&r()},this.finished=function(){return c},this.start=function(){void 0!==o[p]&&$clearTimeout(o[p].timer),$.isFunction(s)&&s();var e=$.isFunction(i)&&$timeout(function(){!u&&i(),c=!0,o[p]=void 0},a);o[p]={task:this,timer:e}}}function t(e,t,n){var o=t,a=n||i;$.isFunction(e)&&o&&void 0===r[o]&&(r[o]={event:e},e(),$timeout(function(){r[o]=void 0},a))}var n=2e3,i=2e3,o=[],r=[];return{schedule:function(t,n){return new e(t,n)},cancelAll:function(){$.each(o,function(e,t){t.finished()||t.cancel()})},cancel:function(e){var t=$.inArray(e,o);t!==-1&&(e&&$clearTimeout(o[e].timer),o[e]=void 0)},once:function(e,n,i){t(e,n,i)}}}(),Service.$task=function(){function e(e,t,n){o[e]=$timeout(t,n||a)}function t(e){o[e]&&($clearTimeout(o[e].timer),o[e]=void 0)}function n(e,t,n){r[e]=setInterval(t,n||a)}function i(e){r[e]&&(clearInterval(r[e]),r[e]=void 0)}var o=[],r=[],a=1e3;return{plan:e,cancel:t,repeat:n,cancelRepeat:i}}(),Service.KEYS={APP_INFO:"app_info"},Service.$monitor=function(){function e(e,t){Service.$pubsub.publish(e,t)}function t(e,t){Service.$pubsub.subscribe(e,t)}var n="Monitor/",i={show:n+"S",hide:n+"H",resume:n+"R",watch:n+"W",unwatch:n+"UW",typing:n+"T"};return{Event:i,report:e,watch:t}}();var __Monitor=Service.$monitor,__MonitorEvent=__Monitor.Event;return function(){Service.$gb2312utf8={Dig2Dec:function(s){var retV=0;if(4==s.length){for(var i=0;i<4;i++)retV+=eval(s.charAt(i))*Math.pow(2,3-i);return retV}return-1},Hex2Utf8:function(s){var retS="",tempS="",ss="";if(16==s.length){tempS="1110"+s.substring(0,4),tempS+="10"+s.substring(4,10),tempS+="10"+s.substring(10,16);for(var sss="0123456789ABCDEF",i=0;i<3;i++)retS+="%",ss=tempS.substring(8*i,8*(eval(i)+1)),retS+=sss.charAt(this.Dig2Dec(ss.substring(0,4))),retS+=sss.charAt(this.Dig2Dec(ss.substring(4,8)));return retS}return""},Dec2Dig:function(e){for(var t="",n=0,i=0;i<4;i++)n=Math.pow(2,3-i),e>=n?(t+="1",e-=n):t+="0";return t},Str2Hex:function(s){for(var c="",n,ss="0123456789ABCDEF",digS="",i=0;i<s.length;i++)c=s.charAt(i),n=ss.indexOf(c),digS+=this.Dec2Dig(eval(n));return digS},GB2312ToUTF8:function(e){var t=escape(e),n=t.split("%"),i="";""!=n[0]&&(i=n[0]);for(var o=1;o<n.length;o++)"u"==n[o].substring(0,1)?(i+=this.Hex2Utf8(this.Str2Hex(n[o].substring(1,5))),n[o].length&&(i+=n[o].substring(5))):(i+=unescape("%"+n[o]),n[o].length&&(i+=n[o].substring(5)));return i}}}(),function(e){!function(e){var t={},n=-1;e.publish=function(e,n){if(!t[e])return!1;for(var i=t[e],o=i?i.length:0;o--;)i[o].func(e,n);return this},e.subscribe=function(e,i){t[e]||(t[e]=[]);var o=(++n).toString();return t[e].push({token:o,func:i}),o},e.unsubscribe=function(e){for(var n in t)if(t[n])for(var i=0,o=t[n].length;i<o;i++)if(t[n][i].token===e)return t[n].splice(i,1),e;return this},e.clear=function(){t={},n=-1}}(e.$pubsub||(e.$pubsub={}))}(Service),Service.$polling=function(){function e(e){var t=$.extend(s,e);t.eventID&&t.apiFunc&&(p[t.eventID]||(p[t.eventID]={handler:void 0},i(t)))}function t(e){e&&e.eventID&&(n(e)||(p[e.eventID].handler&&$clearTimeout(p[e.eventID].handler),p[e.eventID]=void 0))}function n(e){return void 0===p[e.eventID]}function i(e){e.apiFunc.call(Service.$api,e.apiRequestParams,function(t){n(e)||(o(e,t,!0),r(e))},function(t){n(e)||(o(e,t,!1),r(e))})}function o(e,t,n){e.onGet&&e.onGet(t,n)}function r(e){p[e.eventID].handler=$timeout(function(){n(e)||i(e)},e.delay)}var a=3e3,s={eventID:void 0,apiFunc:void 0,apiRequestParams:void 0,delay:a,onGet:void 0},p={};return{run:e,cancel:t}}(),!function(e,t){"object"==typeof module&&module.exports?module.exports=t(e):e.timeago=t(e)}("undefined"!=typeof window?window:this,function(){function e(e){return e instanceof Date?e:isNaN(e)?/^\d+$/.test(e)?new Date(t(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/T/," ").replace(/Z/," UTC").replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(e)):new Date(t(e))}function t(e){return parseInt(e)}function n(e,n,i){n=l[n]?n:l[i]?i:"en";var o=0,r=e<0?1:0;for(e=Math.abs(e);e>=d[o]&&o<f;o++)e/=d[o];return e=t(e),o*=2,e>(0===o?9:1)&&(o+=1),l[n](e,o)[r].replace("%s",e)}function i(t,n){return n=n?e(n):new Date,(n-e(t))/1e3}function o(e){for(var t=1,n=0,i=Math.abs(e);e>=d[n]&&n<f;n++)e/=d[n],t*=d[n];return i%=t,i=i?t-i:t,Math.ceil(i)}function r(e){return e.dataset.timeago?e.dataset.timeago:e.getAttribute?e.getAttribute(g):e.attr?e.attr(g):void 0}function a(e,t){function a(r,p,u,c){var l=i(p,e);r.innerHTML=n(l,u,t),s["k"+c]=setTimeout(function(){a(r,p,u,c)},1e3*o(l))}var s={};return t||(t="en"),this.format=function(o,r){return n(i(o,e),r,t)},this.render=function(e,t){void 0===e.length&&(e=[e]);for(var n=0;n<e.length;n++)a(e[n],r(e[n]),t,++p)},this.cancel=function(){for(var e in s)clearTimeout(s[e]);s={}},this.setLocale=function(e){t=e},this}function s(e,t){return new a(e,t)}var p=0,u="second_minute_hour_day_week_month_year".split("_"),c="秒_分钟_小时_天_周_月_年".split("_"),l={en:function(e,t){if(0===t)return["just now","right now"];var n=u[parseInt(t/2)];return e>1&&(n+="s"),[e+" "+n+" ago","in "+e+" "+n]},zh_CN:function(e,t){if(0===t)return["刚刚","片刻后"];var n=c[parseInt(t/2)];return[e+n+"前",e+n+"后"]}},d=[60,60,24,7,365/7/12,12],f=6,g="datetime";return s.register=function(e,t){l[e]=t},s}),Service.$app=function(){var e={};return{setAppName:function(t){e.app_name=t},setAppWelcome:function(t){e.app_welcome_message=t},set:function(t){e=$.extend({},e,t)},app:function(){return e},appName:function(){return e.app_name},appId:function(){return e.app_uuid||e.uuid}}}(),Service.$conversation=function(){function e(e,t){t&&t.length>0&&(r[e]=t)}function t(e){var t=r[e]||[];return o(t)}function n(e,t,n){function a(e){return n&&n.include?e:o(e)}return n&&n.reuse&&void 0!==r[e]?void $onResult(i(a(r[e])),t):(r[e]=void 0,void Service.$api.getConversationUserList({app_uuid:Service.$ppSettings.getAppUuid(),conversation_uuid:e},function(n){n&&0===n.error_code?r[e]=function(){var e=[];return n.list&&$.each(n.list,function(t,n){var i=Service.$users.adapter(n);e.push(Service.$users.getOrCreateUser(i).getInfo())}),e}():r[e]=[],$onResult(i(a(r[e])),t)},function(n){r[e]=[],$onResult(i(a(r[e])),t)}))}function i(e){return e}function o(e){if(!e)return e;var t,n=e.slice();return $.each(n,function(e,n){n.user_uuid===Service.$user.quickId()&&(t=e)}),void 0!==t&&n.splice(t,1),n}var r={};return{setUser:e,getUser:t,asyncGetUser:n}}(),Service.$messageStore=function(){function e(e,t){n[e]=t}function t(e){if(e){var t,i=n[e];if(i){var o=Modal.$conversationContentGroup.get(i);o&&(t=o.find(e))}return t}}var n={};return{map:e,find:t}}(),Service.$conversationManager=function(){function e(){var e=Service.$pubsub;e.subscribe(v.CONVERSATION_UUID_AVALIABLE,function(t,n){Service.$conversationAgency.requestInfo(n,function(t){if(t){var i=!Service.$conversationAgency.isDefaultConversationAvaliable();i?Service.$conversation.asyncGetUser(n,function(){o(t),e.publish(v.AVALIABLE,t)}):(g(c(t)),e.publish(v.AVALIABLE,t))}})})}function t(){return f(b)}function n(){Service.$conversationAgency.enableDebug(!1),Service.$conversationAgency.request(function(e){o(e),Service.$pubsub.publish(v.AVALIABLE,e)})}function i(e){return d()?void $onResult(d(),e):void Service.$conversationAgency.request(function(t){t?o(t):h(),$onResult(d(),e)})}function o(e){g(c(e,!0)),p(e.token),Service.$conversationAgency.tellDefaultConversationAvaliable(e)}function r(e){if(void 0!==e)p(e);else if(void 0!==m)return l(m)}function a(e){return x?void $onResult(f(b),e):void Service.$api.getConversationList({user_uuid:Service.$user.getUser().getInfo().user_uuid,app_uuid:Service.$ppSettings.getAppUuid()},function(t){if(t&&0===t.error_code){var n=(t.list||[]).slice();n&&$.each(n,function(e,t){g(c(t))})}x=!0,$onResult(f(b),e)},function(t){x=!0,$onResult(f(b),e)})}function s(e,t){function n(e){var t;return $.each(b,function(n,i){i.peer_uuid===e&&(t=i)}),t}var i=void 0!==e.user_uuid?n(e.user_uuid):void 0;return Service.$tools.isNull(i)?void Service.$conversationAgency.create(e,function(e){e?(g(c(e)),$onResult(l(e.uuid),t)):($onResult(void 0,t),h())}):void $onResult(i,t)}function p(e){var t=l(e);void 0!==t&&($.each(b,function(e,t){t.active=!1}),t.ts=Date.now(),t.active=!0,m=e),u(e)}function u(e){var t,n,i=d();void 0!==i&&(t=i.app_welcome,n=i.app_name,i.vip=!1,delete i.app_welcome,delete i.app_name);var o=l(e);o&&(o.vip=!0,t&&(o.app_welcome=t),n&&(o.app_name=n))}function c(e,t){return e.token=e.uuid,e.ts=Service.$tools.getTimestamp(e.updatetime),e.vip="boolean"==typeof t&&t,e}function l(e){var t,n=b.length;for(t=0;t<n;++t)if(e===b[t].token)return b[t]}function d(){var e,t=b.length;for(e=0;e<t;e++)if(b[e].vip)return b[e]}function f(e){function t(e,t){var n=e.ts,i=t.ts;return i-n}return!e||e.length<=1?e:e.sort(t)}function g(e){var t;$.each(b,function(n,i){void 0===t&&i.token===e.token&&(t=i)}),void 0===t?b.push(e):(e.vip=t.vip,$.extend(t,e))}function h(){Service.$pubsub.publish(v.WAITING)}var m,v={WAITING:"CONVERSATION_MANAGER/WAITING",AVALIABLE:"CONVERSATION_MANAGER/AVALIABLE",CONVERSATION_UUID_AVALIABLE:"NOTIFY_CONVERSATION/AVALIABLE"},b=[],x=!1;return{EVENT:v,init:e,all:t,simulateConversationAvaliable:n,asyncGetDefaultConversation:i,activeConversation:r,vipConversation:d,asyncGetList:a,find:l,asyncGetConversation:s}}(),Service.$sheetHeader=function(){function e(e){e=e||c}function t(){return l||c}function n(e){return l?void $onResult(l,e):(l=Service.$app.appName()||c,void $onResult(l,e))}function i(e){d=e}function o(){return d}function r(){f++}function a(){return f}function s(e){f=f-e<0?0:f-e}function p(){return g}function u(e){g=e}var c=Service.Constants.DEFAULT_HEADER_TITLE,l="",d=!0,f=0,g=!1;return{setHeaderTitle:e,getHeaderTitle:t,asyncGetHeaderTitle:n,close:i,closed:o,incrUnreadCount:r,unreadCount:a,decrUnreadCount:s,isShowDropDownButton:p,showDropDownButton:u}}(),Service.$conversationAgency=function(){function e(e){return c===u.DONE&&p?void $onResult(p,e):(c=u.REQUESTING,void Service.$api.getPPComDefaultConversation({app_uuid:Service.$app.appId(),user_uuid:Service.$user.quickId(),device_uuid:Service.$user.quickDeviceUUID()},function(t){a(t)||(p=t,c=u.DONE),$onResult(p,e)},function(t){$onResult(p,e)}))}function t(e,t){return e?void Service.$api.getConversationInfo({app_uuid:Service.$app.appId(),user_uuid:Service.$user.quickId(),conversation_uuid:e},function(e){$onResult(e,t)},function(e){$onResult(void 0,t)}):void $onResult(void 0,t)}function n(e,t){c=u.REQUESTING,Service.$api.createPPComConversation({user_uuid:Service.$user.getUser().getInfo().user_uuid,app_uuid:Service.$ppSettings.getAppUuid(),device_uuid:Service.$user.quickDeviceUUID(),member_list:void 0!==e.user_uuid?[e.user_uuid]:void 0},function(e){var n=void 0;a(e)||(n=e,c=u.DONE),$onResult(n,t)},function(e){$onResult(void 0,t)})}function i(){c===u.REQUESTING&&(c=u.CANCEL)}function o(){return void 0!==p}function r(e){p=e}function a(e){return l||0!==e.error_code||Service.$tools.isApiResponseEmpty(e)}function s(e){l=e}var p,u={REQUESTING:0,DONE:1,CANCEL:2},c=u.REQUESTING,l=!1;return{enableDebug:s,request:e,requestInfo:t,create:n,cancel:i,tellDefaultConversationAvaliable:r,isDefaultConversationAvaliable:o}}(),Service.$flags=function(){var e={af:{dialCode:"93",areaCodes:null,priority:0},al:{dialCode:"355",areaCodes:null,priority:0},dz:{dialCode:"213",areaCodes:null,priority:0},as:{dialCode:"1684",areaCodes:null,priority:0},ad:{dialCode:"376",areaCodes:null,priority:0},ao:{dialCode:"244",areaCodes:null,priority:0},ai:{dialCode:"1264",areaCodes:null,priority:0},ag:{dialCode:"1268",areaCodes:null,priority:0},ar:{dialCode:"54",areaCodes:null,priority:0},am:{dialCode:"374",areaCodes:null,priority:0},aw:{dialCode:"297",areaCodes:null,priority:0},au:{dialCode:"61",areaCodes:null,priority:0},at:{dialCode:"43",areaCodes:null,priority:0},az:{dialCode:"994",areaCodes:null,priority:0},bs:{dialCode:"1242",areaCodes:null,priority:0},bh:{dialCode:"973",areaCodes:null,priority:0},bd:{dialCode:"880",areaCodes:null,priority:0},bb:{dialCode:"1246",areaCodes:null,priority:0},by:{dialCode:"375",areaCodes:null,priority:0},be:{dialCode:"32",areaCodes:null,priority:0},bz:{dialCode:"501",areaCodes:null,priority:0},bj:{dialCode:"229",areaCodes:null,priority:0},bm:{dialCode:"1441",areaCodes:null,priority:0},bt:{dialCode:"975",areaCodes:null,priority:0},bo:{dialCode:"591",areaCodes:null,priority:0},ba:{dialCode:"387",areaCodes:null,priority:0},bw:{dialCode:"267",areaCodes:null,priority:0},br:{dialCode:"55",areaCodes:null,priority:0},io:{dialCode:"246",areaCodes:null,priority:0},vg:{dialCode:"1284",areaCodes:null,priority:0},bn:{dialCode:"673",areaCodes:null,priority:0},bg:{dialCode:"359",areaCodes:null,priority:0},bf:{dialCode:"226",areaCodes:null,priority:0},bi:{dialCode:"257",areaCodes:null,priority:0},kh:{dialCode:"855",areaCodes:null,priority:0},cm:{dialCode:"237",areaCodes:null,priority:0},ca:{dialCode:"1",areaCodes:["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"],priority:1},cv:{dialCode:"238",areaCodes:null,priority:0},bq:{dialCode:"599",areaCodes:null,priority:1},ky:{dialCode:"1345",areaCodes:null,priority:0},cf:{dialCode:"236",areaCodes:null,priority:0},td:{dialCode:"235",areaCodes:null,priority:0},cl:{dialCode:"56",areaCodes:null,priority:0},cn:{dialCode:"86",areaCodes:null,priority:0},cx:{dialCode:"61",areaCodes:null,priority:2},cc:{dialCode:"61",areaCodes:null,priority:1},co:{dialCode:"57",areaCodes:null,priority:0},km:{dialCode:"269",areaCodes:null,priority:0},cd:{dialCode:"243",areaCodes:null,priority:0},cg:{dialCode:"242",areaCodes:null,priority:0},ck:{dialCode:"682",areaCodes:null,priority:0},cr:{dialCode:"506",areaCodes:null,priority:0},ci:{dialCode:"225",areaCodes:null,priority:0},hr:{dialCode:"385",areaCodes:null,priority:0},cu:{dialCode:"53",areaCodes:null,priority:0},cw:{dialCode:"599",areaCodes:null,priority:0},cy:{dialCode:"357",areaCodes:null,priority:0},cz:{dialCode:"420",areaCodes:null,priority:0},dk:{dialCode:"45",areaCodes:null,priority:0},dj:{dialCode:"253",areaCodes:null,priority:0},dm:{dialCode:"1767",areaCodes:null,priority:0},"do":{dialCode:"1",areaCodes:["809","829","849"],priority:2},ec:{dialCode:"593",areaCodes:null,priority:0},eg:{dialCode:"20",areaCodes:null,priority:0},sv:{dialCode:"503",areaCodes:null,priority:0},gq:{dialCode:"240",areaCodes:null,priority:0},er:{dialCode:"291",areaCodes:null,priority:0},ee:{dialCode:"372",areaCodes:null,priority:0},et:{dialCode:"251",areaCodes:null,priority:0},fk:{dialCode:"500",areaCodes:null,priority:0},fo:{dialCode:"298",areaCodes:null,priority:0},fj:{dialCode:"679",areaCodes:null,priority:0},fi:{dialCode:"358",areaCodes:null,priority:0},fr:{dialCode:"33",areaCodes:null,priority:0},gf:{dialCode:"594",areaCodes:null,priority:0},pf:{dialCode:"689",areaCodes:null,priority:0},ga:{dialCode:"241",areaCodes:null,priority:0},gm:{dialCode:"220",areaCodes:null,priority:0},ge:{dialCode:"995",areaCodes:null,priority:0},de:{dialCode:"49",areaCodes:null,priority:0},gh:{dialCode:"233",areaCodes:null,priority:0},gi:{dialCode:"350",areaCodes:null,priority:0},gr:{dialCode:"30",areaCodes:null,priority:0},gl:{dialCode:"299",areaCodes:null,priority:0},gd:{dialCode:"1473",areaCodes:null,priority:0},gp:{dialCode:"590",areaCodes:null,priority:0},gu:{dialCode:"1671",areaCodes:null,priority:0},gt:{dialCode:"502",areaCodes:null,priority:0},gg:{dialCode:"44",areaCodes:null,priority:1},gn:{dialCode:"224",areaCodes:null,priority:0},gw:{dialCode:"245",areaCodes:null,priority:0},gy:{dialCode:"592",areaCodes:null,priority:0},ht:{dialCode:"509",areaCodes:null,priority:0},hn:{dialCode:"504",areaCodes:null,priority:0},hk:{dialCode:"852",areaCodes:null,priority:0},hu:{dialCode:"36",areaCodes:null,priority:0},is:{dialCode:"354",areaCodes:null,priority:0},"in":{dialCode:"91",areaCodes:null,priority:0},id:{dialCode:"62",areaCodes:null,priority:0},ir:{dialCode:"98",areaCodes:null,priority:0},iq:{dialCode:"964",areaCodes:null,priority:0},ie:{dialCode:"353",areaCodes:null,priority:0},im:{dialCode:"44",areaCodes:null,priority:2},il:{dialCode:"972",areaCodes:null,priority:0},it:{dialCode:"39",areaCodes:null,priority:0},jm:{dialCode:"1876",areaCodes:null,priority:0},jp:{dialCode:"81",areaCodes:null,priority:0},je:{dialCode:"44",areaCodes:null,priority:3},jo:{dialCode:"962",areaCodes:null,priority:0},kz:{dialCode:"7",areaCodes:null,priority:1},ke:{dialCode:"254",areaCodes:null,priority:0},ki:{dialCode:"686",areaCodes:null,priority:0},xk:{dialCode:"383",areaCodes:null,priority:0},kw:{dialCode:"965",areaCodes:null,priority:0},kg:{dialCode:"996",areaCodes:null,priority:0},la:{dialCode:"856",areaCodes:null,priority:0},lv:{dialCode:"371",areaCodes:null,priority:0},lb:{dialCode:"961",areaCodes:null,priority:0},ls:{dialCode:"266",areaCodes:null,priority:0},lr:{dialCode:"231",areaCodes:null,priority:0},ly:{dialCode:"218",areaCodes:null,priority:0},li:{dialCode:"423",areaCodes:null,priority:0},lt:{dialCode:"370",areaCodes:null,priority:0},lu:{dialCode:"352",areaCodes:null,priority:0},mo:{dialCode:"853",areaCodes:null,priority:0},mk:{dialCode:"389",areaCodes:null,priority:0},mg:{dialCode:"261",areaCodes:null,priority:0},mw:{dialCode:"265",areaCodes:null,priority:0},my:{dialCode:"60",areaCodes:null,priority:0},mv:{dialCode:"960",areaCodes:null,priority:0},ml:{dialCode:"223",areaCodes:null,priority:0},mt:{dialCode:"356",areaCodes:null,priority:0},mh:{dialCode:"692",areaCodes:null,priority:0},mq:{dialCode:"596",areaCodes:null,priority:0},mr:{dialCode:"222",areaCodes:null,priority:0},mu:{dialCode:"230",areaCodes:null,priority:0},yt:{dialCode:"262",areaCodes:null,priority:1},mx:{dialCode:"52",areaCodes:null,priority:0},fm:{dialCode:"691",areaCodes:null,priority:0},md:{dialCode:"373",areaCodes:null,priority:0},mc:{dialCode:"377",areaCodes:null,priority:0},mn:{dialCode:"976",areaCodes:null,priority:0},me:{dialCode:"382",areaCodes:null,priority:0},ms:{dialCode:"1664",areaCodes:null,priority:0},ma:{dialCode:"212",areaCodes:null,priority:0},mz:{dialCode:"258",areaCodes:null,priority:0},mm:{dialCode:"95",areaCodes:null,priority:0},na:{dialCode:"264",areaCodes:null,priority:0},nr:{dialCode:"674",areaCodes:null,priority:0},np:{dialCode:"977",areaCodes:null,priority:0},nl:{dialCode:"31",areaCodes:null,priority:0},nc:{dialCode:"687",areaCodes:null,priority:0},nz:{dialCode:"64",areaCodes:null,priority:0},ni:{dialCode:"505",areaCodes:null,priority:0},ne:{dialCode:"227",areaCodes:null,priority:0},ng:{dialCode:"234",areaCodes:null,priority:0},nu:{dialCode:"683",areaCodes:null,priority:0},nf:{dialCode:"672",areaCodes:null,priority:0},kp:{dialCode:"850",areaCodes:null,priority:0},mp:{dialCode:"1670",areaCodes:null,priority:0},no:{dialCode:"47",areaCodes:null,priority:0},om:{dialCode:"968",areaCodes:null,priority:0},pk:{dialCode:"92",areaCodes:null,priority:0},pw:{dialCode:"680",areaCodes:null,priority:0},ps:{dialCode:"970",areaCodes:null,priority:0},pa:{dialCode:"507",areaCodes:null,priority:0},pg:{dialCode:"675",areaCodes:null,priority:0},py:{dialCode:"595",areaCodes:null,priority:0},pe:{dialCode:"51",areaCodes:null,priority:0},ph:{dialCode:"63",areaCodes:null,priority:0},pl:{dialCode:"48",areaCodes:null,priority:0},pt:{dialCode:"351",areaCodes:null,priority:0},pr:{dialCode:"1",areaCodes:["787","939"],priority:3},qa:{dialCode:"974",areaCodes:null,priority:0},re:{dialCode:"262",areaCodes:null,priority:0},ro:{dialCode:"40",areaCodes:null,priority:0},ru:{dialCode:"7",areaCodes:null,priority:0},rw:{dialCode:"250",areaCodes:null,priority:0},bl:{dialCode:"590",areaCodes:null,priority:1},sh:{dialCode:"290",areaCodes:null,priority:0},kn:{dialCode:"1869",areaCodes:null,priority:0},lc:{dialCode:"1758",areaCodes:null,priority:0},mf:{dialCode:"590",areaCodes:null,priority:2},pm:{dialCode:"508",areaCodes:null,priority:0},vc:{dialCode:"1784",areaCodes:null,priority:0},ws:{dialCode:"685",areaCodes:null,priority:0},sm:{dialCode:"378",areaCodes:null,priority:0},st:{dialCode:"239",areaCodes:null,priority:0},sa:{dialCode:"966",areaCodes:null,priority:0},sn:{dialCode:"221",areaCodes:null,priority:0},rs:{dialCode:"381",areaCodes:null,priority:0},sc:{dialCode:"248",areaCodes:null,priority:0},sl:{dialCode:"232",areaCodes:null,priority:0},sg:{dialCode:"65",areaCodes:null,priority:0},sx:{dialCode:"1721",areaCodes:null,priority:0},sk:{dialCode:"421",areaCodes:null,priority:0},si:{dialCode:"386",areaCodes:null,priority:0},sb:{dialCode:"677",areaCodes:null,priority:0},so:{dialCode:"252",areaCodes:null,priority:0},za:{dialCode:"27",areaCodes:null,priority:0},kr:{dialCode:"82",areaCodes:null,priority:0},ss:{dialCode:"211",areaCodes:null,priority:0},es:{dialCode:"34",areaCodes:null,priority:0},lk:{dialCode:"94",areaCodes:null,priority:0},sd:{dialCode:"249",areaCodes:null,priority:0},sr:{dialCode:"597",areaCodes:null,priority:0},sj:{dialCode:"47",areaCodes:null,priority:1},sz:{dialCode:"268",areaCodes:null,priority:0},se:{dialCode:"46",areaCodes:null,priority:0},ch:{dialCode:"41",areaCodes:null,priority:0},sy:{dialCode:"963",areaCodes:null,priority:0},tw:{dialCode:"886",areaCodes:null,priority:0},tj:{dialCode:"992",areaCodes:null,priority:0},tz:{dialCode:"255",areaCodes:null,priority:0},th:{dialCode:"66",areaCodes:null,priority:0},tl:{dialCode:"670",areaCodes:null,priority:0},tg:{dialCode:"228",areaCodes:null,priority:0},tk:{dialCode:"690",areaCodes:null,priority:0},to:{dialCode:"676",areaCodes:null,priority:0},tt:{dialCode:"1868",areaCodes:null,priority:0},tn:{dialCode:"216",areaCodes:null,priority:0},tr:{dialCode:"90",areaCodes:null,priority:0},tm:{dialCode:"993",areaCodes:null,priority:0},tc:{dialCode:"1649",areaCodes:null,priority:0},tv:{dialCode:"688",areaCodes:null,priority:0},vi:{dialCode:"1340",areaCodes:null,priority:0},ug:{dialCode:"256",areaCodes:null,priority:0},ua:{dialCode:"380",areaCodes:null,priority:0},ae:{dialCode:"971",areaCodes:null,priority:0},gb:{dialCode:"44",areaCodes:null,priority:0},us:{dialCode:"1",areaCodes:null,priority:0},uy:{dialCode:"598",areaCodes:null,priority:0},uz:{dialCode:"998",areaCodes:null,priority:0},vu:{dialCode:"678",areaCodes:null,priority:0},va:{dialCode:"39",areaCodes:null,priority:1},ve:{dialCode:"58",areaCodes:null,priority:0},vn:{dialCode:"84",areaCodes:null,priority:0},wf:{dialCode:"681",areaCodes:null,priority:0},eh:{dialCode:"212",areaCodes:null,priority:1},ye:{dialCode:"967",areaCodes:null,priority:0},zm:{dialCode:"260",areaCodes:null,priority:0},zw:{dialCode:"263",areaCodes:null,priority:0},ax:{dialCode:"358",areaCodes:null,priority:1}},t=void 0;return{query:function(t){var n=e[t];return n?n:e.cn},asyncGetCountryCode:function(e){return void 0===t?void $onResult(t,e):void Service.$api.getIPInfo({app_uuid:Service.$app.appId()},function(n){n&&0===n.error_code&&(t=n.country_code.toLowerCase()),$onResult(t,e)},function(n){$onResult(t,e)})}}}(),function(e){function t(t){var n=e.$json,i=e.$tools,o=(e.$users,e.$user),r=e.Constants.MESSAGE_SUBTYPE,a=e.PPMessage.TYPE,s=t,p=function(e){var t="",n=e;switch(n.ms){case r.TEXT:t=a.TEXT;break;case r.IMAGE:t=a.IMAGE;break;case r.FILE:t=a.FILE}return t},u=function(e){return e.fi!=o.getUser().getInfo().user_uuid||"S2P"==e.tt},c=function(t){return t.ft===e.ApiMessage.TYPE_OG||t.ft===e.ApiMessage.TYPE_AP},l=function(t,n,o){var r=function(){o&&o(t.build(),n)};if(u(s))if(c(s))t.userName(e.Constants.i18n("SYSTEM_MSG")).userIcon(e.Constants.ICON_DEFAULT_USER),r();else{var a={user_uuid:s.fi,user_fullname:s.from_user&&s.from_user.user_fullname?s.from_user.user_fullname:void 0,user_avatar:s.from_user&&s.from_user.user_icon?i.getFileDownloadUrl(s.from_user.user_icon):void 0};e.$users.asyncGetUser(a,function(n){null!=n?t.userName(n.getInfo().user_fullname).userIcon(n.getInfo().user_avatar):t.userName(e.Constants.i18n("DEFAULT_SERVE_NAME")).userIcon(e.Constants.ICON_DEFAULT_USER),r()})}else r()},d=function(e,t){var o=!0;switch(s.ms){case r.TEXT:e.textMessageBody(s.bo);break;case r.IMAGE:e.imageMessageUrl(i.getFileDownloadUrl(n.parse(s.bo).orig));break;case r.FILE:var a=n.parse(s.bo).name,p=n.parse(s.bo).fid,u=i.getFileDownloadUrl(p,a),c=u;e.fileMessageLocalUrl(u).fileMessageName(a).fileMessageServerUrl(c);break;default:o=!1}t&&t(o)};this.asyncGetPPMessage=function(t){var n=new e.PPMessage.Builder(p(s)).id(s.id).timestamp(s.ts).messageState(e.PPMessage.STATE.FINISH).conversationId(s.ci).conversation({uuid:s.ci}).rawData(s).userId(s.fi).quick(!!s.is_quick_message).admin(u(s));d(n,function(e){l(n,e,t)})}}e.ApiMessageAdapter=t}(Service),function(e){function t(e){var t=e;this.getBody=function(){return t}}function n(n){var i={conversation_uuid:n,to_uuid:"",to_type:"",conversation_type:e.Constants.MESSAGE.TO_TYPE,message_type:e.Constants.MESSAGE_TYPE.NOTI,message_subtype:"",from_uuid:"",device_uuid:"",uuid:"",from_type:"DU",app_uuid:e.$ppSettings.getAppUuid(),is_browser_message:!0,is_service_user:!1};this.uuid=function(e){return i.uuid=e,this},this.type=function(e){return i.message_subtype=e,this},this.toType=function(e){return i.to_type=e,this},this.toId=function(e){return i.to_uuid=e,this},this.fromUuid=function(e){return i.from_uuid=e,this},this.deviceUuid=function(e){return i.device_uuid=e,this},this.build=function(){var e=$.extend({},i,!0);if(!e.to_uuid)throw new Error("to_uuid == null");if(!e.to_type)throw new Error("to_type == null");return new t(e)}}t.TYPE_OG="OG",t.TYPE_AP="AP",t.Builder=n,e.ApiMessage=t}(Service),Service.$messageSender=function(){function e(e,i){var o=$.extend({},h,i),a=e.getBody();t(a,o,a.conversation.uuid),o.upload?n(a,o):r(a,o)}function t(e,t,n){e.messageConversationId=n,e.messageIsConversationValid=!!n,l(e,g.BUILD_DONE,{conversationId:n})}function n(e,t){e.messageState=Service.PPMessage.STATE.BEGIN_UPLOAD;var n=Service.$uploader,r=Service.Uploader.ERROR_CODE,a=t.uploadContent,s=t.uploadType,p=Service.Constants.i18n,u=n.upload({type:s,content:a}).progress(function(t){l(e,g.UPLOADING,{uploadProgress:t})}).done(function(n){e.messageState=Service.PPMessage.STATE.SENDING,o(e,t,n.fuuid)}).fail(function(n){switch(e.messageState=Service.PPMessage.STATE.ERROR,n){case r.SERVICE_NOT_AVALIABLE:e.extra.errorDescription=p("SERVICE_NOT_AVALIABLE");break;case r.CANCEL:e.extra.errorDescription=p("CANCELED")}i(e,t)}).query().uploadId;l(e,g.BEGIN_UPLOAD,{uploadTaskId:u})}function i(e,t){l(e,g.UPLOAD_FAIL),r(e,t)}function o(e,t,n){l(e,g.UPLOAD_DONE,{fileId:n}),r(e,t)}function r(e,t){if(!e.messageIsConversationValid||e.messageState===Service.PPMessage.STATE.ERROR)return void p(e,t);var n=new Service.PPMessageAdapter(e).getApiMessageBody();try{Service.$notifyMsg.get(Service.$notification,n).send()}catch(i){p(e,t)}}function a(e,t,n){e.messageState=Service.PPMessage.STATE.FINISH,n&&s(e,n),l(e,g.SEND_DONE)}function s(e,t){}function p(e,t){e.messageState=Service.PPMessage.STATE.ERROR;var n=e.extra.errorDescription;n||(n=Service.Constants.i18n("SEND_ERROR")),e.extra.errorDescription=n,l(e,g.SEND_FAIL);
}function u(e){var t=Service.$messageStore.find(e);t&&a(t)}function c(e){var t=Service.$messageStore.find(e);t&&p(t)}function l(e,t,n){f.broadcast(e.messageId,{body:e,state:t,stateInfo:n||{}})}function d(){function e(e,t){Service.$pubsub.publish("msg/send/"+e,t)}var t={BUILD_DONE:"BUILD_DONE",BEGIN_UPLOAD:"BEGIN_UPLOAD",UPLOADING:"UPLOADING",UPLOAD_DONE:"UPLOAD_DONE",UPLOAD_FAIL:"UPLOAD_FAIL",SEND_DONE:"SEND_DONE",SEND_FAIL:"SEND_FAIL"};return{STATE:t,broadcast:e}}var f=d(),g=f.STATE,h={upload:!1,uploadType:"file",uploadContent:null};return{$messageStateBroadcast:f,send:e,notifySendDone:u,notifySendFail:c}}(),Service.$messageReceiverModule=function(){function e(){function e(){if(!h){var e;(e="hidden")in document?document.addEventListener("visibilitychange",n):(e="mozHidden")in document?document.addEventListener("mozvisibilitychange",n):(e="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",n):(e="msHidden")in document&&document.addEventListener("msvisibilitychange",n),h=void 0!==e,c=e,l=document.title}}function t(){h&&("hidden"===c?document.removeEventListener("visibilitychange",n):"mozHidden"===c?document.removeEventListener("mozvisibilitychange",n):"webkitHidden"===c?document.removeEventListener("webkitvisibilitychange",n):"msHidden"===c&&document.removeEventListener("msvisibilitychange",n)),h=!1,c=void 0,s()}function n(e){g=document[c],g||s()}function i(e){o()&&(u(),f=r(e),p())}function o(){return h&&void 0!==c&&!Service.$device.isMobileBrowser()&&g}function r(e){return Service.Constants.i18n("PPMESSAGE")+": "+e.getMessageSummary()+"... "}function a(e){e&&(document.title=e)}function s(){u(),l&&a(l)}function p(){var e=f,t=e.substring(m,e.length)+e.substring(0,m);m++,a(t),m>e.length&&(m=0),d=$timeout(p,200)}function u(){d&&($clearTimeout(d),d=void 0),f=void 0,m=0}var c,l,d,f,g=!1,h=!1,m=0;return{register:e,unregister:t,notify:i}}var t,n=function(e){return e&&View.$conversationContentContainer.visible()&&PP.isOpen()&&Service.$conversationManager.activeConversation()&&Service.$conversationManager.activeConversation().uuid===e},i=function(e){return Modal.$conversationContentGroup.get(e)},o=function(e){return!!Ctrl.$conversationQuickMessage.isEnabled()&&(Ctrl.$conversationQuickMessage.handleMessage(e),!0)},r=function(e,r){var a=Service.$pubsub,s=r.getBody(),p=s.conversation.uuid;if(t&&t.notify(r),Service.$debug.d("[New-Message] is quick message: ",Service.$messageToolsModule.isQuickMessage(s)),Service.$messageToolsModule.isQuickMessage(s)&&o(r))return Service.$debug.d("[New-Message] handle by quick message mode"),void i(p).addMessage(s);if(n(p))Service.$debug.d("[New-Message] handle by active conversation"),a.publish("msgArrived/chat",r);else{var u=i(p);u.addMessage(s),u.incrUnreadCount(),Ctrl.$sheetheader.incrUnread(),PP.isOpen()&&Ctrl.$conversationPanel.mode()===Ctrl.$conversationPanel.MODE.LIST?(Service.$debug.d("[New-Message] handle by list"),a.publish("msgArrived/group",r)):(Service.$debug.d("[New-Message] handle by launcher"),a.publish("msgArrived/launcher",r))}},a=function(n){n&&(Service.$notification.init({user_uuid:n.user_uuid,device_uuid:n.device_uuid,app_uuid:n.app_uuid}).start(),t&&t.unregister(),t=e(),t.register(),Service.$pubsub.subscribe("ws/msg",r))};return{start:a}}(),function(e){var t=function(){function t(t){if(!t||!t.messageType)return!1;var n=e.PPMessage.TYPE;return $.inArray(t.messageType.toUpperCase(),[n.TEXT,n.IMAGE,n.FILE])!==-1}function n(e){return t(e)&&e.quick}function i(){return"DU"}return{isMessage:t,isQuickMessage:n,toType:i}}();e.$messageToolsModule=t}(Service),function(e){function t(n){var i=n;this.setConversationId=function(e){return i.messageConversationId=e,this},this.setConversationIdValid=function(e){return i.messageIsConversationValid=e,this},this.setMessageState=function(e){return i.messageState=e,this},this.setRawData=function(e){return i.messageRawData=e,this},this.isConversationValid=function(){return i.messageIsConversationValid},this.getBody=function(){return i},this.getMessageState=function(){return i.messageState},this.getMessageSummary=function(){return t.getMessageSummary(i)},this.send=function(){var t=e.$sendSettingsFactory.get(i);e.$msgStateReceiverFactory.get(i.messageType).listen(i.messageId),e.$messageSender.send(this,t)}}function n(n){var i={messageId:e.$tools.getUUID(),messageTimestamp:Date.now()/1e3,messageType:n,messageToType:e.$messageToolsModule.toType(),messageState:t.STATE.SENDING,messageConversationId:"",messageIsConversationValid:!0,messageRawData:"",extra:{errorDescription:"",description:""},message:{text:{},file:{},image:{},welcome:{},timestamp:{time:Date.now()},smsEmail:{}},user:{id:null,admin:!1,name:"",avatar:e.Constants.ICON_DEFAULT_USER},conversation:void 0,quick:!1};this.id=function(e){return i.messageId=e,this},this.timestamp=function(e){return i.messageTimestamp=e,this},this.toType=function(e){return i.messageToType=e,this},this.conversationId=function(e){return i.messageConversationId=e,this},this.conversationIsValid=function(e){return i.messageIsConversationValid=e,this},this.rawData=function(e){return i.messageRawData=e,this},this.messageState=function(e){return i.messageState=e,this},this.extraDescription=function(e){return i.extra.description=e,this},this.conversation=function(e){return i.conversation=e,this},this.quick=function(e){return i.quick=e,this},this.admin=function(e){return i.user.admin=e,this},this.userName=function(e){return i.user.name=e,this},this.userIcon=function(e){return i.user.avatar=e,this},this.userId=function(e){return i.user.id=e,this},this.welcomeBody=function(e){return i.message.welcome=e,this},this.textMessageBody=function(e){return i.message.text.body=e,this},this.fileBody=function(e){return i.message.file=e,this},this.fileMessageLocalUrl=function(e){return i.message.file.fileUrl=e,this},this.fileMessageName=function(e){return i.message.file.fileName=e,this},this.fileMessageServerUrl=function(e){return i.message.file.fileServerUrl=e,this},this.imageBody=function(e){return i.message.image=e,this},this.imageMessageUrl=function(e){return i.message.image.url=e,this},this.timestampBody=function(e){return i.message.timestamp=e,this},this.build=function(){var n=$.extend({},i,!0);return void 0===n.conversation&&(n.conversation=e.$conversationManager.activeConversation()),new t(n)}}t.STATE={BEGIN_UPLOAD:"BEGIN_UPLOAD",SENDING:"SENDING",ERROR:"ERROR",FINISH:"FINISH"},t.TYPE={TEXT:"TEXT",IMAGE:"IMAGE",FILE:"FILE",WELCOME:"WELCOME",TIMESTAMP:"TIMESTAMP"},t.TO_TYPE={AP:"AP",OG:"OG"},t.getMessageSummary=function(n){var i="",o=n,r=t.TYPE,a=e.Constants.i18n;if(!o||!o.messageType)return"";switch(o.messageType){case r.TEXT:i=o.message.text.body;break;case r.FILE:i="["+a("FILE")+": "+o.message.file.fileName+"]";break;case r.IMAGE:i="["+a("IMAGE")+"]";break;case r.WELCOME:i="";break;default:i=""}return i},t.Builder=n,e.PPMessage=t}(Service),function(e){function t(t){var n=e.$json,i=(e.$messageToolsModule,t),o=function(t){var n="",i=t;switch(i.messageType){case e.Constants.MESSAGE.TYPE_TEXT:n=e.Constants.MESSAGE_SUBTYPE.TEXT;break;case e.Constants.MESSAGE.TYPE_FILE:n=e.Constants.MESSAGE_SUBTYPE.FILE;break;case e.Constants.MESSAGE.TYPE_IMAGE:n=e.Constants.MESSAGE_SUBTYPE.IMAGE}return n},r=function(t){var n="",i="application/octet-stream";switch(t.messageType){case e.PPMessage.TYPE.FILE:n=t.message.file.file.type||i;break;case e.PPMessage.TYPE.IMAGE:n=t.message.image.file.type||i;break;case e.PPMessage.TYPE.TEXT:n=t.message.image.file.type||i;break;default:n=i}return n},a=function(){return i.messageToType};this.getApiMessageBody=function(){var t=new e.ApiMessage.Builder(i.messageConversationId).uuid(i.messageId).type(o(i)).toType(a()).toId(i.conversation.token).fromUuid(e.$user.getUser().getInfo().user_uuid).deviceUuid(e.$user.getUser().getInfo().device_uuid).build().getBody();switch(i.messageType){case e.PPMessage.TYPE.TEXT:var s={fid:i.message.text.fuuid};t.message_body=i.message.text.body;break;case e.PPMessage.TYPE.FILE:var s={fid:i.message.file.fuuid,mime:r(i)};t.message_body=n.stringify(s);break;case e.PPMessage.TYPE.IMAGE:var s={fid:i.message.image.fuuid,mime:r(i)};t.message_body=n.stringify(s)}return t}}e.PPMessageAdapter=t}(Service),function(e){var t=function(){var t=function(t){var n=t;return sendSettings=function(){switch(n.messageType){case e.PPMessage.TYPE.IMAGE:return e.$imageMessageSendSettings.build(n);case e.PPMessage.TYPE.FILE:return e.$fileMessageSendSettings.build(n)}}(),sendSettings};return{get:t}}();e.$sendSettingsFactory=t}(Service),function(e){var t=function(){function e(e){return{upload:!0,uploadContent:e.message.file.file}}return{build:e}}();e.$fileMessageSendSettings=t}(Service),function(e){var t=function(){function e(e){return{upload:!0,uploadContent:e.message.image.file}}return{build:e}}();e.$imageMessageSendSettings=t}(Service),Service.$msgStateReceiverFactory=function(){return{get:function(e){switch(e){case Service.PPMessage.TYPE.TEXT:return Service.$msgStateTextReceiver;case Service.PPMessage.TYPE.FILE:return Service.$msgStateFileReceiver;case Service.PPMessage.TYPE.IMAGE:return Service.$msgStateImageReceiver;default:return{listen:function(){}}}}}}(),Service.$msgStateTextReceiver=function(){return{listen:function(e){var t=Service.$pubsub.subscribe("msg/send/"+e,function(e,n){var i=n.body,o=Service.$messageSender.$messageStateBroadcast.STATE;switch(n.state){case o.BUILD_DONE:Ctrl.$conversationContent.appendMessage(i),View.$userTextMessage.onSending(i);break;case o.UPLOAD_DONE:i.message.text.fuuid=n.stateInfo.fileId;break;case o.SEND_DONE:View.$userTextMessage.onSendDone(i),Service.$pubsub.unsubscribe(t);break;case o.SEND_FAIL:View.$userTextMessage.onSendFail(i),Service.$pubsub.unsubscribe(t)}})}}}(),Service.$msgStateFileReceiver=function(){function e(e){var t=Service.$pubsub.subscribe("msg/send/"+e,function(e,n){var i=n.body,o=Service.$messageSender.$messageStateBroadcast.STATE;switch(n.state){case o.BEGIN_UPLOAD:i.message.file.fileUploadId=n.stateInfo.uploadTaskId,Ctrl.$conversationContent.appendMessage(i),View.$composerContainer.focus(),View.$userFileMessage.onBeginUpload(i);break;case o.UPLOADING:var r=n.stateInfo.uploadProgress;View.$userFileMessage.onUploading(i,r);break;case o.UPLOAD_DONE:var a=n.stateInfo.fileId;i.message.file.fuuid=a,i.message.file.fileServerUrl=Service.$tools.getFileDownloadUrl(a,i.message.file.fileName),View.$userFileMessage.onUploadDone(i),View.$userFileMessage.onSending(i);break;case o.UPLOAD_FAIL:View.$userFileMessage.onUploadFail(i);break;case o.SEND_DONE:View.$userFileMessage.onSendDone(i),Service.$pubsub.unsubscribe(t);break;case o.SEND_FAIL:View.$userFileMessage.onSendFail(i),Service.$pubsub.unsubscribe(t)}})}return{listen:e}}(),Service.$msgStateImageReceiver=function(){function e(e){var t=Service.$pubsub.subscribe("msg/send/"+e,function(e,n){var i=n.body,o=Service.$messageSender.$messageStateBroadcast.STATE;switch(n.state){case o.BEGIN_UPLOAD:i.message.image.fileUploadId=n.stateInfo.uploadTaskId,Ctrl.$conversationContent.appendMessage(i),View.$composerContainer.focus(),View.$userImageMessage.onBeginUpload(i);break;case o.UPLOADING:var r=n.stateInfo.uploadProgress;View.$userImageMessage.onUploading(i,r);break;case o.UPLOAD_DONE:var a=n.stateInfo.fileId;i.message.image.fuuid=a,i.message.image.fileServerUrl=Service.$tools.getFileDownloadUrl(a),View.$userImageMessage.onUploadDone(i),View.$userImageMessage.onSending(i);break;case o.UPLOAD_FAIL:View.$userImageMessage.onUploadFail(i);break;case o.SEND_DONE:View.$userImageMessage.onSendDone(i),Service.$pubsub.unsubscribe(t);break;case o.SEND_FAIL:View.$userImageMessage.onSendFail(i),Service.$pubsub.unsubscribe(t)}})}return{listen:e}}(),Service.$notifyAuth=function(){function e(e,n){function i(){var n=Service.$api,i=Service.$json,o=Service.$device,r=Service.$ppSettings,a=e.getWsSettings(),s=n.getApiToken(),p=a.user_uuid,u=a.device_uuid,c=a.app_uuid,l={page_title:document.title,page_url:location.href,browser_os:o.getOSName(),browser_os_version:o.getOSVersion(),browser_name:o.getBrowserName(),browser_version:o.getBrowserVersion(),browser_language:o.getBrowserLanguage(),language_override:r.getLanguage(),document_referrer:document.referrer};e.write(i.stringify({type:t,api_token:s,app_uuid:c,user_uuid:p,device_uuid:u,extra_data:l,is_sider_device:!1,is_mobile_device:!1,is_service_user:!1}))}function o(){n&&(0!==n.error_code&&0!==n.code||(Service.$conversationManager.asyncGetDefaultConversation(void 0),Modal.$conversationContentGroup.tryLoadLostMessages()))}return{auth:i,dispatch:o}}var t="auth";return{get:e}}(),Service.$notifyMsg=function(){function e(e,i){function o(){var n=i;if(n){var o=Service.$json.stringify({type:t,send:n});e.write(o,function(){throw new Error("ws not open")})}}function r(){var e=void 0!==i.what&&i.what===n;e?a(i):s(i)}function a(e){var t=e.extra.uuid;t&&(0===e.code?Service.$messageSender.notifySendDone(t):Service.$messageSender.notifySendFail(t))}function s(e){e.pid&&p.ackMessage({list:[e.pid]}),new Service.ApiMessageAdapter(e).asyncGetPPMessage(function(e,t){t&&u.publish("ws/msg",e)})}var p=Service.$api,u=Service.$pubsub;Service.$debug;return{send:o,dispatch:r}}var t="send",n="SEND";return{get:e}}(),Service.$notification=function(){function e(e,i){n()?(t().send(e),Service.$debug.d("[Message][Send]",e)):i&&i(e)}function t(){return r}function n(){return null!=r&&r.readyState===WebSocket.OPEN}function i(){return o}var o=null,r=null,a=Configuration.web_socket_url,s=!("undefined"==typeof WebSocket),p=null,u=null,c=function(){null!=o&&null!=r&&Service.$notifyAuth.get(Service.$notification).auth()},l=function(e){Service.$debug.d("[WebSocket][Close]: ",e),null!=o&&(r=null,u&&u())},d=function(e){var t=Service.$json,n=Service.$debug,i="string"==typeof e.data&&function(){try{return t.parse(e.data)}catch(i){return void(i&&n.d(i))}}()||"object"==typeof e.data&&e.data;void 0!==i&&(n.d("[Message][Arrived][WsMessage]:",i),Service.$notifyFactory.get(Service.$notification,i).dispatch())},f=function(e){Service.$debug.error("[WebSocket][Error]: ",e),r=null},g=function(){null!=r&&r.close()},h=function(){null!=r&&r.readyState!=WebSocket.CONNECTING&&r.readyState!=WebSocket.CLOSED||m()},m=function(){y()},v=function(){null!=p&&(clearInterval(p),p=null)},b=function(){v(),p=setInterval(h,1e4)},x=function(e){return o=e,this},y=function(){s&&null!=o&&null==r&&(r=new WebSocket(a),r.onopen=c,r.onclose=l,r.onmessage=d,r.onerror=f,b())},w=function(e){u=e,g(),v()};return{init:x,start:y,reset:w,write:e,getWs:t,isWsOk:n,getWsSettings:i,onWebSocketMessage:d}}(),Service.$notifyFactory=function(){function e(e,i){var o,r=t(i);switch(r){case n.MSG:o=Service.$notifyMsg;break;case n.AUTH:o=Service.$notifyAuth;break;case n.SYS:o=Service.$notifySys;break;default:o=Service.$notifyUnknown}return o.get(e,i.msg?i.msg:i)}function t(e){var t=e.type;if(t===n.MSG)e.msg.mt===n.SYS&&(t=n.SYS);else if(t===n.ACK)switch(e.what){case i.AUTH:t=n.AUTH;break;case i.SEND:t=n.MSG}return t}var n={AUTH:"AUTH",ACK:"ACK",MSG:"MSG",ONLINE:"ONLINE",SYS:"SYS",TYPING:"TYPING",EFFECT:"EFFECT"},i={AUTH:"AUTH",SEND:"SEND"};return{get:e}}(),Service.$notifySys=function(){function e(e,n){function i(){n&&o(n)&&e.reset()}function o(e){return e&&e.ms&&e.ms===t}return{dispatch:i}}var t="LOGOUT";return{get:e}}(),Service.$notifyUnknown=function(){function e(e,t){function n(){Service.$debug.d("unknown msg : ",t)}return{dispatch:n}}return{get:e}}(),function(){View._booted=!1,View.bootMe=function(e){View._booted&&!e||(View.$settings=new View.PPSettings,View.$textUrlChecker=new View.TextUrlChecker,View._booted=!0)},View._pool={},View.add=function(e,t){View._pool[e]=t},View.find=function(e){return View._pool[e]}}(),function(e){function t(e,t,n){function i(e,t,n,i){var o={};t&&(n?($.each(t,function(e,t){if(void 0!==t||null!==t)switch(e){case"className":o["class"]=t;break;default:o[e]=t}}),!o["class"]&&o.id&&(o["class"]=o.id)):i&&(o.id=i,o["class"]=i));var r=document.createElement(e);for(var a in o)"event"!=a&&"selector"!=a&&r.setAttribute(a,o[a]);if(o.event){var s=i?"#"+i:o.selector,p=["click","mouseover","mouseleave","mousedown","keydown","keyup","change","input propertychange","focus","blur","init","dragenter","dragleave","dragover","drag","drop"];if(!s)throw new Error("No jQuerySelector");s&&$.each(o.event,function(e,t){if($.inArray(e,p)!=-1)switch(e){case"init":setTimeout(function(){t.apply(this,arguments)});break;case"change":setTimeout(function(){$(s).bind(e,function(e){t.apply(this,$(this))})});break;default:setTimeout(function(){$(s).on(e,function(e){t.apply(this,arguments)})})}})}return $(r)}var o=t&&"object"==typeof t,r=o?t.id:t,a=i(e,t,o,r),s=n;this.controller=s,this.getElement=function(){return a},this.getHTML=function(){return a[0].outerHTML},this.add=function(e){return a.append(e.getElement()[0].outerHTML),this},this.text=function(e){return a.text(e),this},this.html=function(e){return a.html(e),this},this.show=function(e){return a.css("display",e?"block":"none"),this},this.ctrl=function(e){s=e},this.getController=function(){return s},this.renderTo=function(e){}}e.PPElement=t,e.Element=t}(View),function(e){function t(){e.PPElement.call(this,"style",{id:"pp-styles",type:"text/css"}),this.text("@charset \"UTF-8\" .pp-container,.pp-location{z-index:2147483647;position:absolute;bottom:0;right:0}.pp-container p,.pp-p-no-margin{-webkit-margin-before:0!important;-webkit-margin-after:0!important;-webkit-margin-start:0!important;-webkit-margin-end:0!important}.pp-container a,.pp-container b,.pp-container div,.pp-container p,.pp-container span,.pp-container textarea,.pp-container u{font-family:'Helvetica Neue',Helvetica,Arial,sans-serif!important;font:normal normal 100% 'Helvetica Neue',Helvetica,Arial,sans-serif;font-style:normal;letter-spacing:normal;font-stretch:normal;font-variant:normal;-webkit-text-emphasis:none;text-shadow:none;text-transform:none;-webkit-font-smoothing:antialiased;word-wrap:break-word}.pp-container *,.pp-container :after,.pp-container :before{-webkit-box-sizing:content-box!important;-moz-box-sizing:content-box!important;box-sizing:content-box!important}.drop-file-here{border:3px dotted red!important}.pp-conversation-container{display:none}.pp-borderless-dismiss-bar{display:none;margin-bottom:10px;position:absolute;width:100%;z-index:1}.pp-borderless-dismiss-button,.pp-borderless-dismiss-view-more{background-color:#5d6c80;background-position:50%;position:relative;float:right;cursor:pointer}.pp-borderless-dismiss-view-more{display:inline-block;opacity:.8;color:#fff;font-size:13px;font-size:13px!important;line-height:32px!important;padding:0 8px;border-radius:16px;margin-right:70px}.pp-borderless-dismiss-button{background-size:8px 8px;background-repeat:no-repeat;border-radius:50%;display:block;width:32px;height:32px}.pp-text-link-user{color:#fff!important}.pp-text-link-admin{color:#455A64!important}.pp-container .pp-box-sizing{-webkit-box-sizing:content-box!important;-moz-box-sizing:content-box!important;box-sizing:content-box!important}.pp-container .pp-box-sizing-borderbox{-webkit-box-sizing:border-box!important;-moz-box-sizing:border-box!important;box-sizing:border-box!important}.pp-fixme{clear:both}.pp-selectable{-o-user-select:text;-moz-user-select:text;-webkit-user-select:text;user-select:text}.pp-unselectable{-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.pp-launcher-icon{position:absolute;bottom:0;right:0;width:50px;height:50px;max-width:50px;border-radius:25px;box-shadow:0 6px 13px 0 rgba(0,0,0,.23)}.pp-launcher-icon:hover{cursor:pointer}.pp-sheet-header{z-index:2147483002;box-shadow:0 1px 2px 0 rgba(0,0,0,.12);background:#fff;border-radius:10px 10px 0 0;overflow:hidden;position:absolute;top:0;right:0;width:100%;height:75px}.pp-sheet-header-title-container{position:absolute;left:0;top:0;width:100%;height:100%}.pp-container .pp-sheet-header-title{font-size:16px;line-height:75px;font-weight:500;color:#465C66;letter-spacing:.2px;max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:inline}.pp-sheet-header-button{position:relative;margin:0 20px 0 15px;height:75px;float:right}.pp-sheet-header-button-minimize-container{position:relative;margin:0;height:75px;width:75px;float:right;cursor:pointer}.pp-sheet-header-button:hover{cursor:pointer}.pp-sheet-header-minimize-button-icon{background-position:center center;width:16px;background-repeat:no-repeat;background-size:15px 15px;height:75px;position:relative;margin:auto}.pp-sheet-header .title-container{display:inline-block}.pp-sheet-header .clickable{cursor:pointer}.pp-sheet-header .down-icon{cursor:pointer;display:inline-block;height:10px;margin-left:5px;width:10px}.pp-container .pp-group-content-container{box-sizing:border-box;background-color:#fff;border-radius:0 0 10px 10px;bottom:0;display:none;position:relative;margin:0 auto 10px;overflow-y:auto;width:100%;top:75px}.pp-group-item{border-top:1px solid #f3f4f5;cursor:pointer;padding:32px 30px;-webkit-animation-name:pp-messenger-view-slide-right-in;animation-name:pp-messenger-view-slide-right-in;-webkit-animation-duration:.32s;animation-duration:.32s;-webkit-animation-timing-function:cubic-bezier(.23,1,.32,1);animation-timing-function:cubic-bezier(.23,1,.32,1);-webkit-animation-delay:.16s;animation-delay:.16s;-webkit-animation-fill-mode:both;animation-fill-mode:both}.pp-conversation-part,.pp-group-item-leave{-webkit-animation-duration:.32s;-webkit-animation-timing-function:cubic-bezier(.23,1,.32,1)}.pp-group-item-leave{-webkit-animation-name:pp-messenger-view-slide-left-out;animation-name:pp-messenger-view-slide-left-out;animation-duration:.32s;animation-timing-function:cubic-bezier(.23,1,.32,1);-webkit-animation-delay:0;animation-delay:0;-webkit-animation-fill-mode:both;animation-fill-mode:both}.pp-group-item:hover{background-color:#f7f8fa;border-top:1px solid #ebedf1}.pp-group-item:last-child{border-bottom:1px solid #f3f4f5}.pp-group-item-body{position:relative;margin-left:50px}.pp-group-item-meta{margin-bottom:2px;min-height:15px}.pp-group-item-meta::after{clear:both}.pp-group-item-body-author{float:left;color:rgba(73,76,93,.7)}.pp-group-item-body-unread-dot{display:inline-block;background-color:#1F8CEB;margin-right:9px;width:9px;height:9px;border-radius:50%;content:'';float:right;margin-top:3px}.pp-group-item-body-timestamp{float:right;text-align:right;color:rgba(73,76,93,.7)}.pp-group-item-body-author,.pp-group-item-body-timestamp{font-size:13px!important;max-width:49%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pp-group-item-content{position:relative}.pp-group-item-content-container{margin-right:25px;color:#3a3c4c;font-size:13px;min-height:15px;line-height:19px}.pp-group-item-content-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:13px!important;font-color:#3a3c4c}.pp-group-item-body-user-icon{background-size:16px 14px;background-repeat:no-repeat;display:inline-block;background-position:50%;width:16px;position:absolute;top:0;bottom:0;right:0}.pp-group-item *{cursor:pointer}.pp-group-item img{border-radius:50%;border:2px solid #fff;display:inline-block;position:absolute;width:20px;height:20px}.pp-group-item .pp-group-item-avatar-container{float:left;position:relative;width:35px;height:35px}.pp-conversation-part-msg-first-of-two-avatar,.pp-group-item .pp-group-item-first-of-two-avatar{top:6px;left:0;z-index:2}.pp-conversation-part-msg-second-of-two-avatar,.pp-group-item .pp-group-item-second-of-two-avatar{top:6px;right:0;z-index:2}.pp-conversation-part-msg-first-of-three-avatar,.pp-group-item .pp-group-item-first-of-three-avatar{top:-1;left:6px;z-index:2}.pp-conversation-part-msg-second-of-three-avatar,.pp-group-item .pp-group-item-second-of-three-avatar{top:15px;right:14px;z-index:3}.pp-conversation-part-msg-third-of-three-avatar,.pp-group-item .pp-group-item-third-of-three-avatar{top:15px;left:14px;z-index:1}.pp-group-item .pp-group-item-first-of-one-avatar{width:36px;height:36px}.pp-sheet-header .pp-sheet-header-body{display:none;padding:20px 0 0 80px}.pp-sheet-header .pp-sheet-header-title{color:#fff;font-size:16px;line-height:1.1em}.pp-sheet-header .pp-sheet-header-app-name{color:hsla(0,0%,100%,.8);font-size:13px;line-height:1.1em}.pp-sheet-header .pp-sheet-conversations-button{background-repeat:no-repeat;background-position:50%;width:75px;height:75px;float:left;display:none;position:relative}.pp-sheet-header .pp-sheet-header-button-icon{background-size:15px 12px;background-repeat:no-repeat;background-position:center;margin:0 auto;width:18px;height:100%;float:left}.pp-sheet-header .pp-header-buttons-close{background-position:50%;background-size:14px 14px;background-repeat:no-repeat;display:none;position:absolute;top:0;right:0}.pp-sheet-header .pp-header-buttons-back-contents,.pp-sheet-header .pp-header-buttons-close-contents{cursor:pointer;width:50px;height:50px;padding:8px;margin:13px;box-sizing:border-box!important;border-radius:8px}.pp-sheet-header .pp-header-buttons-back-contents:hover,.pp-sheet-header .pp-header-buttons-close-contents:hover,.pp-sheet-header .pp-sheet-header-team-profile-container:hover{background-color:rgba(0,0,0,.1)}.pp-sheet-header .pp-unread-count{border-radius:50%;font-size:11px;line-height:16px;background-color:red;text-align:center;color:#fff;position:absolute;width:16px;height:16px;top:11px;left:44px;cursor:pointer;display:none}.pp-relative-time{cursor:pointer}.pp-messenger-panel{width:368px;height:calc(100% - 95px - 20px);max-height:531px;position:fixed;right:20px;bottom:95px;border-radius:10px;z-index:2147483646;box-shadow:0 0 4px 1px rgba(0,0,0,.08);min-height:250px}.pp-container .pp-launcher-badge{position:absolute;right:-7px;top:0;border-radius:50%;font-size:12px;line-height:18px;background-color:#ff3c00;text-align:center;color:#fff;width:18px;height:18px;cursor:pointer;opacity:1;display:block;visibility:visible}.pp-launcher-button,.pp-launcher-button-container{width:60px;height:60px}.pp-launcher-button{background-repeat:no-repeat;border-radius:50%;border-style:solid;border-width:0;position:absolute;bottom:0;right:0;cursor:pointer;background-position:center;border-color:#004c88;box-shadow:0 6px 13px 0 rgba(0,0,0,.23)}.pp-launcher-button-container-inactive{transition:opacity,.1s;opacity:0;visibility:hidden}.pp-launcher-button-container-active{opacity:1;visibility:visible}.pp-launcher-button-minimized{-webkit-animation:pp-launcher-minimize .1s linear 0s both;animation:pp-launcher-minimize .1s linear 0s both;transition:background-image 0s linear .1s}.pp-launcher-button-maximize{-webkit-animation:pp-launcher-maximize .1s linear 0s both;animation:pp-launcher-maximize .1s linear 0s both}.pp-launcher-button-inactive{visibility:hidden}.pp-launcher-container{position:fixed;height:60px;z-index:2147483646}.pp-loading{box-sizing:border-box;display:none;height:100%;margin:0 auto;top:75px}.pp-loading-spinner{width:28px;height:28px;background-size:28px 28px;background-repeat:no-repeat;position:absolute;left:50%;top:50%;margin-left:-14px;animation:loading 1s linear 0s infinite both;-o-animation:loading 1s linear 0s infinite both;-moz-animation:loading 1s linear 0s infinite both;-webkit-animation:loading 1s linear 0s infinite both}.pp-loading-text{color:gray;font-size:14px!important;width:100%;position:absolute;text-align:center;top:calc(50% + 35px)}@-webkit-keyframes loading{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes loading{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes loading{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loading{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes pp-launcher-minimize{0%{-webkit-transform:scale(1);transform:scale(1)}100%{-webkit-transform:scale(0);transform:scale(0)}}@-keyframes pp-launcher-minimize{0%{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}100%{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}}@-webkit-keyframes pp-launcher-maximize{0%{-webkit-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);transform:scale(1)}}@-keyframes pp-launcher-maximize{0%{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}.pp-conversation-content-maximize{opacity:1;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);-webkit-transform-origin:bottom right;-ms-transform-origin:bottom right;transform-origin:bottom right;transition:opacity .1s linear .15s,-webkit-transform .25s ease-in-out;transition:transform .25s ease-in-out,opacity .1s linear .15s;transition:transform .25s ease-in-out,opacity .1s linear .15s,-webkit-transform .25s ease-in-out}.pp-conversation-sheet-minimized{opacity:0;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);-webkit-transform-origin:bottom right;-ms-transform-origin:bottom right;transform-origin:bottom right;transition:opacity .1s linear,visibility 0s linear .25s,-webkit-transform .25s ease-in-out;transition:transform .25s ease-in-out,opacity .1s linear,visibility 0s linear .25s;transition:transform .25s ease-in-out,opacity .1s linear,visibility 0s linear .25s,-webkit-transform .25s ease-in-out}.pp-composer{position:relative;margin:0 auto}#pp-composer-container{border-radius:0 0 10px 10px}.pp-composer-container-file-sendbutton-selector-container{cursor:pointer;float:right;position:relative}.pp-composer-container-send-button-container{display:none;background-repeat:no-repeat;background-position:center;background-size:14px;height:25px;width:25px;opacity:.4}.pp-composer-container-send-button-container:hover{opacity:1}.pp-composer-container-action-btn{background-position:center;cursor:pointer;height:15px;width:15px;float:right;top:5px;margin:0 2px 0 0;padding:5px;opacity:.4;background-size:15px 15px;background-repeat:no-repeat}.pp-composer-container-tools-container{position:absolute;bottom:15px;right:6px}.pp-composer-container-warning{bottom:60px;background:0 0;width:100%;text-align:center}.pp-composer-container-form{margin-bottom:0!important;padding:0!important;float:right;width:100%;position:relative}.pp-container .pp-composer-container-warning-span{font-size:14px;color:red}.pp-container .pp-composer-container-textarea{line-height:20px;border-radius:0 0 10px 10px;height:100%;width:100%;outline:0!important;resize:none;font-size:14px;padding:18px 100px 18px 30px;word-break:break-all;overflow:hidden;max-height:210px;min-height:40px;border:none;transition:background-color .2s ease,box-shadow .2s ease;color:#565867;background-color:#f0f3f5}.pp-container .pp-composer-container-textarea:focus{outline:0;background-color:#fff;box-shadow:0 0 100px 0 rgba(150,165,190,.24)}.pp-container .pp-conversation-part-pulltorefreshbutton{font-size:14px;color:gray;cursor:pointer}.pp-composer-container-input{display:none!important}.pp-conversation-part{margin-bottom:16px;opacity:1;-webkit-transform:translateX(0);transform:translateX(0);-webkit-animation-name:pp-messenger-view-slide-left-in;animation-name:pp-messenger-view-slide-left-in;animation-duration:.32s;animation-timing-function:cubic-bezier(.23,1,.32,1);-webkit-animation-delay:.23s;animation-delay:.23s;-webkit-animation-fill-mode:backwards;animation-fill-mode:backwards}@keyframes pp-messenger-view-slide-left-in{0%{opacity:0;-webkit-transform:translateX(8px);transform:translateX(8px)}to{opacity:1;-webkit-transform:translateX(0);transform:translateX(0)}}@-webkit-keyframes pp-messenger-view-slide-right-in{0%{opacity:0;-webkit-transform:translateX(-8px);transform:translateX(-8px)}to{opacity:1;-webkit-transform:translateX(0);transform:translateX(0)}}@keyframes pp-messenger-view-slide-right-in{0%{opacity:0;-webkit-transform:translateX(-8px);transform:translateX(-8px)}to{opacity:1;-webkit-transform:translateX(0);transform:translateX(0)}}.pp-conversation-part-welcome-outer-1{display:block;margin-bottom:16px}.pp-conversation-part-welcome-outer-2{border-top:0;border-bottom:1px solid #e4e5e7;padding:0 20px 20px}.pp-conversation-part-welcome-icon{bacground-size:28px 28px;background-repeat:no-repeat;width:28px;height:28px;margin:0 auto 15px}.pp-container .pp-conversation-part-welcome-body{font-weight:400;font-size:14px;color:#90A4AE;line-height:18px;text-align:center;display:block;-moz-user-select:text;-webkit-user-select:text;-ms-user-select:text}.pp-conversation-content{background-color:#FAFAFA;overflow-y:auto;position:absolute;top:75px;bottom:56px;right:0;width:100%;padding:30px 35px 40px;box-sizing:border-box;transition-timing-function:cubic-bezier(.1,.57,.1,1);-webkit-transition-timing-function:cubic-bezier(.1,.57,.1,1);transition-duration:0s;-webkit-transition-duration:0s;transform:translate(0,0) translateZ(0)}.pp-conversation-part-text-by-admin-outer{text-align:left;margin-bottom:16px;clear:both}.pp-conversation-part-text-by-admin-outer-2{position:relative;width:100%}.pp-conversation-part-text-by-admin-body-container{border-color:#dadee2;border-radius:4px;border-width:1px;border-style:solid;position:relative;max-width:90%;display:inline-block;background-color:#fff;color:#455A64;-moz-user-select:text;-webkit-user-select:text;-ms-user-select:text;top:3px}.pp-container .pp-conversation-part-text-by-admin-body{font-size:14px;font-weight:400;line-height:20px;padding:12px 17px;text-align:left;word-break:break-all;white-space:pre-wrap;color:#606273;background-color:#eff3f6}.pp-conversation-part-msg-by-admin-body-triangle{position:absolute;width:0;height:0;bottom:7.5px;border-style:solid;border-width:0 0 13px 5px;border-color:transparent transparent #fff}.pp-container .pp-conversation-part-text-by-admin-timestamp-container{font-size:12px;line-height:20px;color:#c9cbcf;position:relative;top:0;display:inline-block}.pp-conversation-part-image-by-user{text-align:right;margin-bottom:16px}.pp-conversation-part-image-by-user-o{text-align:right;margin-bottom:16px;position:relative;overflow:hidden;clear:both}.pp-conversation-part-image-by-user-img{cursor:pointer;border-radius:4px;margin:0 0 5px;padding:0;right:0;max-width:242px;float:right}.pp-container .pp-conversation-part-image-by-user-timestamp{position:relative;float:right;font-size:12px;line-height:20px;color:#c9cbcf;clear:both}.pp-conversation-part-image-by-admin-o{margin-bottom:16px;clear:both}.pp-conversation-part-image-by-admin-o1{position:relative;width:100%}.pp-conversation-part-image-by-admin-o3{overflow:hidden}.pp-conversation-part-image-by-admin-o4{max-width:242px;float:left;position:relative}.pp-conversation-part-image-by-admin-img{cursor:pointer;border-radius:4px;margin:3px 0 0;padding:0;width:100%}.pp-container .pp-conversation-part-image-by-admin-timestamp-container{position:relative;float:left;font-size:12px;line-height:20px;color:#c9cbcf}.pp-conversation-part-file-by-admin-outer{margin-bottom:16px;clear:both}.pp-conversation-part-file-by-admin-outer-2{position:relative;width:100%}.pp-conversation-part-file-by-admin-outer-4{float:left;position:relative;margin-top:3px}.pp-conversation-part-file-by-admin-outer-5{display:block;background-color:#dadfe3;border-radius:6px;padding:5px;overflow:hidden;border:1px solid #dadfe3}.pp-conversation-part-file-by-admin-upload-icon{position:relative;float:left;width:32px;height:32px;background-size:16px 15px;background-position:center;background-repeat:no-repeat;border-right:1px solid rgba(255,255,255,.3)}.pp-conversation-part-file-by-admin-outer-6{vertical-align:middle;margin:5px 10px 0;overflow:hidden}.pp-container .pp-conversation-part-file-by-admin-file-link{color:#8f919d;font-size:13px;font-weight:400;line-height:20px;position:relative;float:left;text-decoration:none;cursor:pointer;overflow:hidden;word-break:break-all;max-height:20px;margin-left:5px}.pp-container .pp-conversation-part-file-by-admin-timestamp-container{position:relative;float:left;font-size:12px;line-height:20px;color:#c9cbcf}.pp-conversation-part-file-by-user-o{width:100%;position:relative;overflow:hidden}.pp-conversation-part-file-by-user-o2{float:right;padding:5px;background-color:#dadfe3;border-radius:6px;border:1px solid #dadfe3;margin-bottom:5px;max-width:80%}.pp-conversation-part-file-by-user-upload-icon{float:left;width:32px;height:32px;background-size:16px 15px;background-position:center;background-repeat:no-repeat;border-right:1px solid rgba(255,255,255,.3)}.pp-conversation-part-file-by-user-link-container{max-height:20px;overflow:hidden;margin:5px 5px 0 32px}.pp-container .pp-conversation-part-file-by-user a{color:#8f919d;font-size:13px;font-weight:400;line-height:20px;text-decoration:none;word-break:break-all;margin:5px 5px 0 10px}.pp-container .pp-conversation-part-file-by-user-timestamp{font-size:12px;line-height:20px;color:#c9cbcf;clear:both;text-align:right}.pp-conversation-part-center{display:table;margin:0 auto 10px}.pp-uploading-bar,.pp-uploading-bar-remove{display:inline-block;vertical-align:middle}.pp-container .pp-conversation-part-timestamp-time{border-radius:4px;color:#a8b6c2;font-size:13px;padding:4px}.pp-uploading-bar{border-radius:4px;position:relative;width:50px;height:6px;border:1px solid #ccc;background-color:#fff;margin:0 5px}.pp-uploading-bar-state{transition:width .4s;border-radius:3px;background-color:#0071b2;position:absolute;top:0;left:0;bottom:0}.pp-uploading-bar-remove{background-size:14px 14px;background-repeat:no-repeat;opacity:.8;cursor:pointer;width:14px;height:14px;right:-22px;top:2px}.pp-container .pp-uploading-bar-outer{color:#c9cbcf;font-size:14px;display:block;float:right}.pp-launcher-preview-outer{height:100px;max-width:274px;float:right;margin-right:52px;width:100%;position:relative;margin-top:-60px}.pp-launcher-preview-outer-2{padding:10px;position:relative;float:right;cursor:pointer}.pp-launcher-preview-outer-3{border-radius:10px;background:#fff;padding:13px;position:relative;box-shadow:0 6px 13px 0 rgba(0,0,0,.23)}.pp-launcher-preview-close{background-size:18px 18px;background-repeat:no-repeat;cursor:pointer;width:20px;height:20px;float:left;margin-top:-20px;margin-left:-20px;display:none}.pp-launcher-preview{position:relative}.pp-launcher-preview-p-outer{overflow:hidden;max-height:37px;min-height:18px}.pp-launcher-preview-p{word-break:break-all;line-height:19px;color:#333}.pp-launcher-preview-triangle-container{float:right;margin-right:-15px;position:relative}.pp-launcher-preview-triangle{width:0;height:0;border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid #fff;margin-left:calc(100% - 12px);margin-top:18px}.pp-no-conversations-icon{background-size:79px 59px;background-repeat:no-repeat;display:block;width:79px;height:59px;margin:0 auto 10px}.pp-container .pp-no-conversations-p{color:#CDCFD2;width:96px;margin:auto;font-size:16px;text-align:center}.pp-no-conversations{margin-top:200px}.pp-composer-container{width:100%;background:0 0;position:absolute;bottom:0;right:0}.pp-composer-send-button{border-radius:4px;margin-left:8px;height:40px;float:right;text-decoration:none;padding:0 9px;display:inline-block;color:#fff;cursor:pointer;background:#CCC}.pp-admin-avatar,.pp-admin-avatar img{margin:0 auto;border-radius:50%}.pp-composer-send-button p{font-size:14px;line-height:25px}.pp-app-profile-container{padding:16px 16px 0}.pp-app-profile{padding:20px 12px 26px;background-color:#fff;overflow:hidden;box-shadow:0 0 3px rgba(0,0,0,.2);border-radius:5px}.pp-active-admins{text-align:center;color:#364850;padding-top:24px}.pp-container .pp-app-profile-text{padding:14px 30px 0;text-align:center;font-weight:400;font-size:13px;color:#78909C;line-height:19px}.pp-container .pp-app-profile-team{text-align:center;color:#455a64;font-weight:500;font-size:15px;line-height:1.8}.pp-active-admin{display:inline-block}.pp-admin-avatar img{width:48px;height:48px}.pp-active-admin .state{margin-top:10px;font-size:12px}.pp-active-admin .online{color:#A6D84F}.pp-active-admin .offline{color:#F90}.pp-container .pp-active-admin-name{font-size:12px;color:#90A4AE;text-align:center;padding-top:7px;width:80px;overflow:hidden;text-overflow:ellipsis}.pp-launcher-hovercard{background-color:#fafafb;border-radius:5px;border:1px solid rgba(0,0,0,.1);box-shadow:0 0 10px rgba(0,0,0,.08);width:340px;position:absolute;bottom:64px;right:-5px}.pp-launcher-hovercard-welcome{background-color:#fff;border-radius:5px 5px 0 0;border-bottom:1px solid #dfe0e1;box-shadow:0 1px 1px #f0f0f1;padding:26px 20px;overflow:hidden;cursor:pointer}.pp-launcher-hovercard-close{opacity:1;transition:opacity .2s ease-in-out;cursor:pointer;position:absolute;top:-30px;right:-1px;border-radius:40px;box-shadow:0 0 20px rgba(0,0,0,.12);padding:6px 10px 5px 22px;font-size:12px;color:#fff;background-position:10px center;line-height:12px;background-size:8px 8px;background-repeat:no-repeat}.pp-launcher-hovercard-textarea{padding:18px 16px;font-size:16px;border-radius:0 0 5px 5px;height:42px;cursor:pointer}.pp-container .pp-launcher-hovercard-textarea-textarea{width:100%;height:42px;background-color:#fff;font-weight:400;color:#455a64;resize:none;border:1px solid #cfd8dc;font-size:14px;line-height:20px;padding:10px 70px 5px 14px;border-radius:4px;outline:0}.pp-container .pp-textarea-focus{border-color:#74BEFF;box-shadow:0 0 4px 0 rgba(75,171,255,.38)}.pp-launcher-hovercard-admins{width:107px;position:relative;float:left;height:50px;padding-bottom:35px;cursor:pointer;text-align:center}.pp-launcher-hovercard-text{float:right;width:174px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;cursor:pointer}.pp-container .pp-launcher-hovercard-app-name{font-weight:700;font-size:14px;color:#37474f;margin-bottom:7px;cursor:pointer}.pp-container .pp-launcher-hovercard-welcome-text{font-size:12px;color:#78909c;line-height:1.5;cursor:pointer}.pp-launcher-hovercard:after,.pp-launcher-hovercard:before{top:100%;right:20px;border:solid transparent;content:' ';height:0;width:0;position:absolute;pointer-events:none}.pp-launcher-hovercard:before{border-color:rgba(204,204,204,0);border-top-color:rgba(0,0,0,.14);border-width:9px;margin-left:-6px}.pp-launcher-hovercard:after{border-color:rgba(250,250,251,0);border-top-color:#fafafb;border-width:8px;margin-left:-5px;right:21px}.pp-launcher-hovercard .groups-header{margin:30 auto 20;text-align:center;font-size:20px;color:#000}.pp-launcher-hovercard .groups-footer{margin:30 auto;text-align:center;clear:both;color:#989494}.pp-launcher-hovercard .groups-body{width:290px;margin:10 auto}.pp-launcher-hovercard .groups-body .item{background-color:#F3F3F3;border:1px solid #FBF0F0;border-radius:5px;box-shadow:2px 2px 1px #E6E3E3;clear:both;cursor:pointer;height:50px;margin-bottom:20px;padding:5 5 5 15px}.pp-launcher-hovercard .groups-body .left{float:left;width:50px}.pp-launcher-hovercard .groups-body .img-container{display:inline-block;margin-left:-22px;position:relative}.pp-launcher-hovercard .groups-body .img-container:first-child{margin-left:0}.pp-launcher-hovercard .groups-body .right{float:left;margin-left:10px}.pp-launcher-hovercard .group-name{margin-top:5px;font-size:16px;color:#3E3C3C}.pp-launcher-hovercard .online-time{font-size:14px;margin-top:5px;color:gray}.pp-launcher-hovercard img{width:46px;height:46px;margin:0 auto;border-radius:50%;border:2px solid #fff}.pp-launcher-admin-avatar{position:relative;display:inline-block;top:0;cursor:pointer;margin-left:-22px}.pp-launcher-admin-avatar:first-child{margin-left:0}.pp-launcher-admin-avatar img{width:46px;height:46px;margin:0 auto;border-radius:50%;border:2px solid #fff}.pp-container img.grayscale{-webkit-filter:grayscale(1);-webkit-filter:grayscale(100%);filter:grayscale(100%);filter:gray}#pp-container .pp-image-viewable{cursor:-webkit-zoom-in;cursor:zoom-in}#pp-container .pp-image-viewer-overlay{z-index:2147483647;position:fixed;top:0;right:0;bottom:0;left:0;background:#000;cursor:-webkit-zoom-out;cursor:zoom-out;opacity:0}#pp-container .pp-zoomed-image{z-index:2147483648;position:fixed;cursor:-webkit-zoom-out;cursor:zoom-out;transition:all .3s ease}.placeholder-fix::-webkit-input-placeholder{color:gray;-webkit-transition:all 1s ease;-ms-transition:all 1s ease;-moz-transition:all 1s ease;-o-transition:all 1s ease;transition:all 1s ease}.placeholder-fix::-moz-placeholder{color:gray;-webkit-transition:all 1s ease;-ms-transition:all 1s ease;-moz-transition:all 1s ease;-o-transition:all 1s ease;transition:all 1s ease}.placeholder-fix:-moz-placeholder{color:gray;-webkit-transition:all 1s ease;-ms-transition:all 1s ease;-moz-transition:all 1s ease;-o-transition:all 1s ease;transition:all 1s ease;text-indent:-100%;opacity:1}.placeholder-fix:focus::-webkit-input-placeholder{text-indent:-100%;opacity:1}.placeholder-fix:focus::-moz-placeholder{text-indent:-100%;opacity:1}@-webkit-keyframes pp-messenger-view-fade-in{0%{opacity:0}to{opacity:1}}@keyframes pp-messenger-view-fade-in{0%{opacity:0}to{opacity:1}}@-webkit-keyframes pp-messenger-view-fade-out{0%{opacity:1}to{opacity:0}}@keyframes pp-messenger-view-fade-out{0%{opacity:1}to{opacity:0}}@-webkit-keyframes pp-messenger-view-slide-left-out{0%{opacity:1;-webkit-transform:translateX(0);transform:translateX(0)}to{opacity:0;-webkit-transform:translateX(-8px);transform:translateX(-8px)}}@keyframes pp-messenger-view-slide-left-out{0%{opacity:1;-webkit-transform:translateX(0);transform:translateX(0)}to{opacity:0;-webkit-transform:translateX(-8px);transform:translateX(-8px)}}.pp-container .pp-conversation-part-error{color:red;display:block}.pp-conversation-part-text-by-user-outer{text-align:right;margin-bottom:16px}.pp-conversation-part-text-by-user-outer .pp-wrapper{text-align:right}.pp-container .pp-conversation-part-text-by-user-timestamp-outer{position:relative;top:0;font-size:12px;line-height:20px;color:#c9cbcf;margin-right:6px}.pp-conversation-part-text-by-user-body-outer{border-radius:4px;position:relative;max-width:80%;display:inline-block;min-height:36px}.pp-container .pp-conversation-part-text-by-user-body{font-size:14px;font-weight:400;line-height:20px;padding:12px 17px;text-align:left;-moz-user-select:text;-webkit-user-select:text;-ms-user-select:text;white-space:pre-wrap}.pp-conversation-part-msg-by-admin-avatar{margin-right:5px;border-radius:50%;bottom:10px;width:28px;height:28px;float:left;position:absolute;overflow:hidden}.pp-conversation-part-msg-by-admin-body-container{overflow:hidden;position:relative;margin-left:45px}.pp-conversation-part-msg-by-admin-avatar-container{margin-right:5px;bottom:10px;width:35px;height:35px;float:left;position:absolute;overflow:hidden}.pp-conversation-part-msg-by-admin-avatar-container img{border-radius:50%;border:2px solid #fff;display:inline-block;position:absolute;width:18px;height:18px}.pp-sheet-header .pp-sheet-header-team-profile{padding-left:60px;margin:5px 20px 5px 5px;-webkit-animation-name:pp-messenger-view-fade-in;animation-name:pp-messenger-view-fade-in;-webkit-animation-duration:.32s;animation-duration:.32s;-webkit-animation-timing-function:cubic-bezier(.23,1,.32,1);animation-timing-function:cubic-bezier(.23,1,.32,1);-webkit-animation-delay:.16s;animation-delay:.16s;-webkit-animation-fill-mode:both;animation-fill-mode:both}.pp-sheet-header .pp-sheet-header-team-profile-container{border-radius:8px;cursor:pointer;padding:12.5px 0 0 28px;height:50px}.pp-sheet-header .pp-sheet-header-team-profile-avatar-container{display:inline-block;vertical-align:middle;white-space:nowrap;float:left;padding-right:10px}.pp-sheet-header .pp-sheet-header-team-profile-avatar{position:relative;display:inline-block;border-radius:100%}.pp-sheet-header .pp-sheet-header-team-profile-avatar img{width:32px;height:32px;margin-left:-18px;line-height:32px;border-radius:100%;border:2px solid #1F8CEB}.pp-sheet-header .pp-sheet-header-team-profile-body{height:50px;box-sizing:border-box;border-radius:8px}.pp-sheet-header .pp-sheet-header-team-profile-app-name{color:#fff;font-size:17px;line-height:1.1em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin:0}.pp-sheet-header .pp-sheet-header-team-profile-description{color:hsla(0,0%,100%,.8);font-size:10px;line-height:1.3em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin:0;padding-top:10px}.pp-sheet-header .pp-sheet-header-team-profile-full{padding:18px 0 30px;box-sizing:border-box}.pp-sheet-header .pp-sheet-header-team-profile-full-team-name{color:#fff;font-size:17px;line-height:1.1em;white-space:nowrap;text-align:center;width:60%;margin:0 auto;overflow:hidden;text-overflow:ellipsis}.pp-sheet-header .pp-sheet-header-team-profile-full-description{color:#fff;font-weight:700;font-size:13px;line-height:1.1em;width:60%;text-align:center;margin:0 auto;padding-top:2px}.pp-sheet-header .pp-sheet-header-team-profile-full-avatar-container{width:100%;text-align:center;padding-top:22px;padding-bottom:18px}.pp-sheet-header .pp-sheet-header-team-profile-full-avatar{border-radius:50%;line-height:50px;display:inline-block;vertical-align:middle;padding-left:10px;padding-right:10px}.pp-sheet-header .pp-sheet-header-team-profile-full-avatar-container img{border-radius:50%;cursor:pointer;display:inline-block;padding-left:10px;padding-right:10px;text-align:center;width:50px;height:50px}.pp-sheet-header .pp-sheet-header-team-profile-full-name{color:#fff;font-size:13px;width:100%;max-width:85px;text-align:center;padding-top:6px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pp-sheet-header .pp-sheet-header-team-profile-full-hovercard-container{color:transparent;height:140px}#pp-container .pp-flag{display:none;position:absolute;top:12px;left:12px;z-index:1;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s;width:16px;height:16px;background-position:0 0;background-size:240px 240px;background-repeat:no-repeat}#pp-container .pp-flag.ad{background-position:-16px 0}#pp-container .pp-flag.ae{background-position:-32px 0}#pp-container .pp-flag.af{background-position:-48px 0}#pp-container .pp-flag.ag{background-position:-64px 0}#pp-container .pp-flag.ai{background-position:-80px 0}#pp-container .pp-flag.al{background-position:-96px 0}#pp-container .pp-flag.am{background-position:-112px 0}#pp-container .pp-flag.an{background-position:-128px 0}#pp-container .pp-flag.ao{background-position:-144px 0}#pp-container .pp-flag.ar{background-position:-160px 0}#pp-container .pp-flag.as{background-position:-176px 0}#pp-container .pp-flag.at{background-position:-192px 0}#pp-container .pp-flag.au{background-position:-208px 0}#pp-container .pp-flag.aw{background-position:-224px 0}#pp-container .pp-flag.az{background-position:0 -16px}#pp-container .pp-flag.ba{background-position:-16px -16px}#pp-container .pp-flag.bb{background-position:-32px -16px}#pp-container .pp-flag.bd{background-position:-48px -16px}#pp-container .pp-flag.be{background-position:-64px -16px}#pp-container .pp-flag.bf{background-position:-80px -16px}#pp-container .pp-flag.bg{background-position:-96px -16px}#pp-container .pp-flag.bh{background-position:-112px -16px}#pp-container .pp-flag.bi{background-position:-128px -16px}#pp-container .pp-flag.bj{background-position:-144px -16px}#pp-container .pp-flag.bm{background-position:-160px -16px}#pp-container .pp-flag.bn{background-position:-176px -16px}#pp-container .pp-flag.bo{background-position:-192px -16px}#pp-container .pp-flag.br{background-position:-208px -16px}#pp-container .pp-flag.bs{background-position:-224px -16px}#pp-container .pp-flag.bt{background-position:0 -32px}#pp-container .pp-flag.bw{background-position:-16px -32px}#pp-container .pp-flag.by{background-position:-32px -32px}#pp-container .pp-flag.bz{background-position:-48px -32px}#pp-container .pp-flag.ca{background-position:-64px -32px}#pp-container .pp-flag.cd{background-position:-80px -32px}#pp-container .pp-flag.cf{background-position:-96px -32px}#pp-container .pp-flag.cg{background-position:-112px -32px}#pp-container .pp-flag.ch{background-position:-128px -32px}#pp-container .pp-flag.ci{background-position:-144px -32px}#pp-container .pp-flag.ck{background-position:-160px -32px}#pp-container .pp-flag.cl{background-position:-176px -32px}#pp-container .pp-flag.cm{background-position:-192px -32px}#pp-container .pp-flag.cn{background-position:-208px -32px}#pp-container .pp-flag.co{background-position:-224px -32px}#pp-container .pp-flag.cr{background-position:0 -48px}#pp-container .pp-flag.cu{background-position:-16px -48px}#pp-container .pp-flag.cv{background-position:-32px -48px}#pp-container .pp-flag.cy{background-position:-48px -48px}#pp-container .pp-flag.cz{background-position:-64px -48px}#pp-container .pp-flag.de{background-position:-80px -48px}#pp-container .pp-flag.dj{background-position:-96px -48px}#pp-container .pp-flag.dk{background-position:-112px -48px}#pp-container .pp-flag.dm{background-position:-128px -48px}#pp-container .pp-flag.do{background-position:-144px -48px}#pp-container .pp-flag.dz{background-position:-160px -48px}#pp-container .pp-flag.ec{background-position:-176px -48px}#pp-container .pp-flag.ee{background-position:-192px -48px}#pp-container .pp-flag.eg{background-position:-208px -48px}#pp-container .pp-flag.eh{background-position:-224px -48px}#pp-container .pp-flag.er{background-position:0 -64px}#pp-container .pp-flag.es{background-position:-16px -64px}#pp-container .pp-flag.et{background-position:-32px -64px}#pp-container .pp-flag.fi{background-position:-48px -64px}#pp-container .pp-flag.fj{background-position:-64px -64px}#pp-container .pp-flag.fm{background-position:-80px -64px}#pp-container .pp-flag.fo{background-position:-96px -64px}#pp-container .pp-flag.fr{background-position:-112px -64px}#pp-container .pp-flag.ga{background-position:-128px -64px}#pp-container .pp-flag.gb{background-position:-144px -64px}#pp-container .pp-flag.gd{background-position:-160px -64px}#pp-container .pp-flag.ge{background-position:-176px -64px}#pp-container .pp-flag.gg{background-position:-192px -64px}#pp-container .pp-flag.gh{background-position:-208px -64px}#pp-container .pp-flag.gi{background-position:-224px -64px}#pp-container .pp-flag.gl{background-position:0 -80px}#pp-container .pp-flag.gm{background-position:-16px -80px}#pp-container .pp-flag.gn{background-position:-32px -80px}#pp-container .pp-flag.gp{background-position:-48px -80px}#pp-container .pp-flag.gq{background-position:-64px -80px}#pp-container .pp-flag.gr{background-position:-80px -80px}#pp-container .pp-flag.gt{background-position:-96px -80px}#pp-container .pp-flag.gu{background-position:-112px -80px}#pp-container .pp-flag.gw{background-position:-128px -80px}#pp-container .pp-flag.gy{background-position:-144px -80px}#pp-container .pp-flag.hk{background-position:-160px -80px}#pp-container .pp-flag.hn{background-position:-176px -80px}#pp-container .pp-flag.hr{background-position:-192px -80px}#pp-container .pp-flag.ht{background-position:-208px -80px}#pp-container .pp-flag.hu{background-position:-224px -80px}#pp-container .pp-flag.id{background-position:0 -96px}#pp-container .pp-flag.ie{background-position:-16px -96px}#pp-container .pp-flag.il{background-position:-32px -96px}#pp-container .pp-flag.im{background-position:-48px -96px}#pp-container .pp-flag.in{background-position:-64px -96px}#pp-container .pp-flag.iq{background-position:-80px -96px}#pp-container .pp-flag.ir{background-position:-96px -96px}#pp-container .pp-flag.is{background-position:-112px -96px}#pp-container .pp-flag.it{background-position:-128px -96px}#pp-container .pp-flag.je{background-position:-144px -96px}#pp-container .pp-flag.jm{background-position:-160px -96px}#pp-container .pp-flag.jo{background-position:-176px -96px}#pp-container .pp-flag.jp{background-position:-192px -96px}#pp-container .pp-flag.ke{background-position:-208px -96px}#pp-container .pp-flag.kg{background-position:-224px -96px}#pp-container .pp-flag.kh{background-position:0 -112px}#pp-container .pp-flag.ki{background-position:-16px -112px}#pp-container .pp-flag.km{background-position:-32px -112px}#pp-container .pp-flag.kn{background-position:-48px -112px}#pp-container .pp-flag.kp{background-position:-64px -112px}#pp-container .pp-flag.kr{background-position:-80px -112px}#pp-container .pp-flag.kw{background-position:-96px -112px}#pp-container .pp-flag.ky{background-position:-112px -112px}#pp-container .pp-flag.kz{background-position:-128px -112px}#pp-container .pp-flag.la{background-position:-144px -112px}#pp-container .pp-flag.lb{background-position:-160px -112px}#pp-container .pp-flag.lc{background-position:-176px -112px}#pp-container .pp-flag.li{background-position:-192px -112px}#pp-container .pp-flag.lk{background-position:-208px -112px}#pp-container .pp-flag.lr{background-position:-224px -112px}#pp-container .pp-flag.ls{background-position:0 -128px}#pp-container .pp-flag.lt{background-position:-16px -128px}#pp-container .pp-flag.lu{background-position:-32px -128px}#pp-container .pp-flag.lv{background-position:-48px -128px}#pp-container .pp-flag.ly{background-position:-64px -128px}#pp-container .pp-flag.ma{background-position:-80px -128px}#pp-container .pp-flag.mc{background-position:-96px -128px}#pp-container .pp-flag.md{background-position:-112px -128px}#pp-container .pp-flag.me{background-position:-128px -128px}#pp-container .pp-flag.mg{background-position:-144px -128px}#pp-container .pp-flag.mh{background-position:-160px -128px}#pp-container .pp-flag.mk{background-position:-176px -128px}#pp-container .pp-flag.ml{background-position:-192px -128px}#pp-container .pp-flag.mm{background-position:-208px -128px}#pp-container .pp-flag.mn{background-position:-224px -128px}#pp-container .pp-flag.mo{background-position:0 -144px}#pp-container .pp-flag.mq{background-position:-16px -144px}#pp-container .pp-flag.mr{background-position:-32px -144px}#pp-container .pp-flag.ms{background-position:-48px -144px}#pp-container .pp-flag.mt{background-position:-64px -144px}#pp-container .pp-flag.mu{background-position:-80px -144px}#pp-container .pp-flag.mv{background-position:-96px -144px}#pp-container .pp-flag.mw{background-position:-112px -144px}#pp-container .pp-flag.mx{background-position:-128px -144px}#pp-container .pp-flag.my{background-position:-144px -144px}#pp-container .pp-flag.mz{background-position:-160px -144px}#pp-container .pp-flag.na{background-position:-176px -144px}#pp-container .pp-flag.nc{background-position:-192px -144px}#pp-container .pp-flag.ne{background-position:-208px -144px}#pp-container .pp-flag.ng{background-position:-224px -144px}#pp-container .pp-flag.ni{background-position:0 -160px}#pp-container .pp-flag.nl{background-position:-16px -160px}#pp-container .pp-flag.no{background-position:-32px -160px}#pp-container .pp-flag.np{background-position:-48px -160px}#pp-container .pp-flag.nr{background-position:-64px -160px}#pp-container .pp-flag.nz{background-position:-80px -160px}#pp-container .pp-flag.om{background-position:-96px -160px}#pp-container .pp-flag.pa{background-position:-112px -160px}#pp-container .pp-flag.pe{background-position:-128px -160px}#pp-container .pp-flag.pf{background-position:-144px -160px}#pp-container .pp-flag.pg{background-position:-160px -160px}#pp-container .pp-flag.ph{background-position:-176px -160px}#pp-container .pp-flag.pk{background-position:-192px -160px}#pp-container .pp-flag.pl{background-position:-208px -160px}#pp-container .pp-flag.pr{background-position:-224px -160px}#pp-container .pp-flag.ps{background-position:0 -176px}#pp-container .pp-flag.pt{background-position:-16px -176px}#pp-container .pp-flag.pw{background-position:-32px -176px}#pp-container .pp-flag.py{background-position:-48px -176px}#pp-container .pp-flag.qa{background-position:-64px -176px}#pp-container .pp-flag.re{background-position:-80px -176px}#pp-container .pp-flag.ro{background-position:-96px -176px}#pp-container .pp-flag.rs{background-position:-112px -176px}#pp-container .pp-flag.ru{background-position:-128px -176px}#pp-container .pp-flag.rw{background-position:-144px -176px}#pp-container .pp-flag.sa{background-position:-160px -176px}#pp-container .pp-flag.sb{background-position:-176px -176px}#pp-container .pp-flag.sc{background-position:-192px -176px}#pp-container .pp-flag.sd{background-position:-208px -176px}#pp-container .pp-flag.se{background-position:-224px -176px}#pp-container .pp-flag.sg{background-position:0 -192px}#pp-container .pp-flag.si{background-position:-16px -192px}#pp-container .pp-flag.sk{background-position:-32px -192px}#pp-container .pp-flag.sl{background-position:-48px -192px}#pp-container .pp-flag.sm{background-position:-64px -192px}#pp-container .pp-flag.sn{background-position:-80px -192px}#pp-container .pp-flag.so{background-position:-96px -192px}#pp-container .pp-flag.sr{background-position:-112px -192px}#pp-container .pp-flag.st{background-position:-128px -192px}#pp-container .pp-flag.sv{background-position:-144px -192px}#pp-container .pp-flag.sy{background-position:-160px -192px}#pp-container .pp-flag.sz{background-position:-176px -192px}#pp-container .pp-flag.tc{background-position:-192px -192px}#pp-container .pp-flag.td{background-position:-208px -192px}#pp-container .pp-flag.tg{background-position:-224px -192px}#pp-container .pp-flag.th{background-position:0 -208px}#pp-container .pp-flag.tj{background-position:-16px -208px}#pp-container .pp-flag.tl{background-position:-32px -208px}#pp-container .pp-flag.tm{background-position:-48px -208px}#pp-container .pp-flag.tn{background-position:-64px -208px}#pp-container .pp-flag.to{background-position:-80px -208px}#pp-container .pp-flag.tr{background-position:-96px -208px}#pp-container .pp-flag.tt{background-position:-112px -208px}#pp-container .pp-flag.tv{background-position:-128px -208px}#pp-container .pp-flag.tw{background-position:-144px -208px}#pp-container .pp-flag.tz{background-position:-160px -208px}#pp-container .pp-flag.ua{background-position:-176px -208px}#pp-container .pp-flag.ug{background-position:-192px -208px}#pp-container .pp-flag.us{background-position:-208px -208px}#pp-container .pp-flag.uy{background-position:-224px -208px}#pp-container .pp-flag.uz{background-position:0 -224px}#pp-container .pp-flag.va{background-position:-16px -224px}#pp-container .pp-flag.vc{background-position:-32px -224px}#pp-container .pp-flag.ve{background-position:-48px -224px}#pp-container .pp-flag.vg{background-position:-64px -224px}#pp-container .pp-flag.vi{background-position:-80px -224px}#pp-container .pp-flag.vn{background-position:-96px -224px}#pp-container .pp-flag.vu{background-position:-112px -224px}#pp-container .pp-flag.ws{background-position:-128px -224px}#pp-container .pp-flag.ye{background-position:-144px -224px}#pp-container .pp-flag.za{background-position:-160px -224px}#pp-container .pp-flag.zm{background-position:-176px -224px}#pp-container .pp-flag.zw{background-position:-192px -224px}@media (max-width:736px){.pp-messenger-panel,.pp-sheet-header{width:100%;border-left:1px solid #e7e7e7;border-radius:0}.pp-messenger-panel{height:100%;max-height:100%;right:0!important;bottom:0;background-color:#fff;z-index:2147483646}.pp-messenger-panel-quick-message-mode{bottom:95px;right:20px!important}.pp-sheet-header{box-shadow:0 1px 2px 0 rgba(0,0,0,.08);background:#fff;position:fixed;top:0;right:0;border-bottom:1px solid #e7e7e7}.pp-sheet-header-button{position:relative;margin:0;height:48px;width:48px;float:right}.pp-sheet-header-button-icon{background-size:13px 13px;background-repeat:no-repeat;width:16px;height:100%;background-position:center center;margin:auto}.pp-sheet-header .pp-header-buttons-close{display:block}.pp-conversation-part-welcome-outer-2{border-top:0;padding:0 20px 20px;border-image:initial}.pp-composer-container{border-radius:0;width:100%;background:0 0;position:fixed;bottom:0;right:0}.pp-container .pp-composer-container-textarea{border-radius:0}.pp-no-conversations-icon{background-color:#fff}.pp-powered-by{display:none}.pp-conversation-content{bottom:49px}.pp-composer{max-width:100%}}");
}extend(t,e.PPElement),e.CssStyle=t}(View),function(e){function t(t,n){e.PPElement.call(this,"div",t,n)}extend(t,e.PPElement),e.PPDiv=t,e.Div=t}(View),function(e){function t(t,n){e.PPElement.call(this,"span",t,n)}extend(t,e.PPElement),e.Span=t}(View),function(e){function t(t,n){e.PPElement.call(this,"p",t,n)}extend(t,e.PPElement),e.P=t}(View),function(e){function t(t,n){e.PPElement.call(this,"img",t,n)}extend(t,e.PPElement),e.Img=t}(View),View.$sheetHeader=function(){function e(){var e=Ctrl.$sheetheader,t=View.PPDiv,n=(View.PPElement,Configuration.assets_path+"img/icon-back.png"),i=Configuration.assets_path+"img/close.png",o=function(){return new t({className:"pp-sheet-header-title-container",style:"background-color:"+View.Style.Color.main_color}).add(s())},r=function(){return new t({"class":"pp-sheet-conversations-button",style:"background-image:url("+n+")"}).add(new t({"class":"pp-header-buttons-back-contents"})).add(new t({"class":"pp-unread-count pp-font pp-box-sizing"}))},s=function(){return new t("pp-sheet-header-body").add(new t("pp-sheet-header-title").text(Service.Constants.i18n("CONVERSATIONS"))).add(new t("pp-sheet-header-app-name").text(Service.$app.app().app_name))},p=function(){return new t({"class":"pp-header-buttons-close",style:"background-image:url("+i+")"}).add(new t({"class":"pp-header-buttons-close-contents"}))},u=function(){$("#"+h).bind("click",e.onSheetHeaderClicked)},c=function(){var e="#pp-container .pp-header-buttons-back-contents";$(e).bind("click",function(){Ctrl.$conversationList.show(),a()})},l=function(){var e="#pp-container .pp-header-buttons-close";$(e).bind("click",function(){Ctrl.$sheetheader.minimize()})},d=function(){var e=".pp-sheet-conversations-button .pp-unread-count";$(e).bind("mouseover",function(){$(w).mouseover()}).bind("mouseleave",function(){$(w).mouseleave()}).bind("click",function(){$(w).click()})};t.call(this,{id:h,"class":h+" pp-box-sizing pp-unselectable"},e),this.add(o()).add(r()).add(p()),$timeout(function(){e.onSheetHeaderInit(),u(),c(),l(),d()})}function t(){Service.$sheetHeader.isShowDropDownButton()||Service.$sheetHeader.showDropDownButton(!0)}function n(){Service.$sheetHeader.showDropDownButton(!1)}function i(){$(b).find("i").attr("style","background: url("+Configuration.assets_path+"img/icon-down.png) 0 -795px")}function o(){$(b).find("i").attr("style","background: url("+Configuration.assets_path+"img/icon-down.png) 0 -2362px")}function r(){return $("#"+h).height()}function a(){}function s(){$("."+m+"body").hide()}function p(){s(),$("."+m+"team-profile").show()}function u(e){Service.$device.isMobileBrowser()?c(e):l(e)}function c(e){}function l(e){}function d(e){$("."+v).remove();var t=$(".pp-sheet-header-title-container"),n=Service.$conversation.getUser(e),i=Service.$conversationManager.find(e),o=Service.$app.app().welcome_message;t.prepend(f(n,i,o).getElement()[0].outerHTML),u(n)}function f(e,t,n){return new View.Div(v).add(new View.Div({className:v+"-container"}).add(g(e)).add(new View.Div(v+"-body").add(new View.P(v+"-app-name").text(t.conversation_name)).add(new View.P(v+"-description").text(Service.$app.appName()))))}function g(e){e=e||[];for(var t=new View.Div(v+"-avatar-container"),n=3,i=0;i<n&&i<e.length;){var o=e[i];t.add(new View.Div(v+"-avatar").add(new View.Img({src:o.user_avatar}))),i++}return t}extend(e,View.PPDiv);var h="pp-sheet-header",m="pp-sheet-header-",v=m+"team-profile",b=".pp-sheet-header-app-name",x=".pp-unread-count",y=".pp-sheet-conversations-button",w=y+" .pp-sheet-header-button-icon",b=".pp-sheet-header .title-container",C=function(){return new e},S=function(e){e>0?$(x).show().text(e):$(x).hide()},_=function(){$(y).show()},E=function(){$(y).hide()},k=function(e){$(b).text(e),$("."+m+"team-profile-app-name").text(e)};return{build:C,height:r,setUnreadCount:S,showGroupButton:_,hideGroupButton:E,showDropDownButton:t,hideDropDownButton:n,changeDropDownButtonToHideState:i,changeDropDownButtonToShowState:o,setTitle:k,showHeaderBody:a,showTeamProfile:p,reBuildTeamProfile:d}}(),View.$groupContent=function(){function e(){View.PPDiv.call(this,{"class":t}),Service.$pubsub.subscribe("msgArrived/group",function(e,t){var n=t.getBody().conversation.uuid,i=View.$groupContentItem;i.showUnread(n,Modal.$conversationContentGroup.get(n).unreadCount()),i.description(n,t.getMessageSummary()),i.timestamp(n,Service.$tools.timeago(1e3*t.getBody().messageTimestamp))})}extend(e,View.PPDiv);var t="pp-group-content-container",n="."+t,i=function(){return $(n).show(),this},o=function(){return $(n).hide(),this},r=function(e){$(n).empty();var t="";return $.each(e,function(e,n){t+=View.$groupContentItem.build(n).getHTML()}),$(n).append(t),this},a=function(){return $(n).is(":empty")},s=function(){return $(n).is(":visible")},p=function(){return new e};return{build:p,show:i,hide:o,update:r,focus:focus,empty:a,visible:s}}(),View.$groupContentItem=function(){function e(e){View.PPDiv.call(this,{"class":a,group_uuid:e.uuid});var t=e.name,n="",i=e.uuid,o=e.icon,s=e.summary,p=function(e){if(e=e||[],0===e.length)return new View.Img({src:o,className:"pp-group-item-first-of-one-avatar"});if(1===e.length)return new View.Img({src:e[0].user_avatar,className:"pp-group-item-first-of-one-avatar"});if(2===e.length){for(var t=new View.Div("pp-group-item-avatar-container"),n=e.length,i=["first","second"],r=0;r<n;r++)t.add(new View.Img({src:e[r].user_avatar,className:"pp-group-item-"+i[r]+"-of-two-avatar"}));return t}if(e.length>=3){for(var t=new View.Div("pp-group-item-avatar-container"),a=3,i=["first","second","third"],r=0;r<a;r++)t.add(new View.Img({src:e[r].user_avatar,className:"pp-group-item-"+i[r]+"-of-three-avatar"}));return t}},u=function(){return new View.PPDiv({className:"pp-group-item-body"}).add(new View.PPDiv({className:"pp-group-item-meta"}).add(new View.PPDiv({className:"pp-group-item-body-author"}).text(t)).add(new View.PPDiv({className:"pp-group-item-body-timestamp"}).text(n)).add(new View.PPDiv({className:"pp-group-item-body-unread-dot"}))).add(new View.PPDiv({className:"pp-group-item-content"}).add(new View.PPDiv({className:"pp-group-item-content-container"}).add(new View.PPDiv({className:"pp-group-item-content-text"}).text(s))).add(new View.Div({className:"pp-group-item-body-user-icon",style:r})))},l=function(){var e=c(i);e.click("click",function(){Ctrl.$conversationList.showItem(i)})};this.add(p(Service.$conversation.getUser(e.uuid))).add(u()),$timeout(l)}function t(e,t){c(e).find(p).text(t)}function n(e,t){c(e).find("."+u+"-timestamp").text(t)}function i(){$("."+a).addClass(a+"-leave")}var o=Configuration.assets_path+"img/icon-user-conversation.png",r="background-image:url("+o+")",a="pp-group-item";extend(e,View.PPDiv);var s="pp-group-item-content-text",p="."+s,u="pp-group-item-body",c=function(e){return $(".pp-group-content-container").find("div[group_uuid="+e+"]")},l=function(e,t){if(t>0){var n=c(e);n.find("."+u+"-unread-dot").show(),n.find("."+u+"-timestamp").css({color:View.Style.Color.main_color,"font-weight":"bold"})}},d=function(e){var t=c(e);t.find("."+u+"-unread-dot").hide(),t.find("."+u+"-timestamp").css({color:"","font-weight":""})},f=function(e){return $(".pp-group-content-container div[group_uuid="+e+"] img")},g=function(e,t){return e&&t?void f(e).attr("src",t.user_avatar).attr("user_uuid",t.user_uuid):f(e).attr("src")},h=function(t){return new e(t)};return{build:h,showUnread:l,hideUnread:d,groupIcon:g,description:t,timestamp:n,animateHide:i}}(),View.$loading=function(){function e(){var e=View.PPDiv;e.call(this,{id:t,"class":t+" pp-box-sizing"}),this.add(new e({id:"pp-loading-spinner",style:"background-image:url("+Configuration.assets_path+"img/spinner.png)"})).add(new View.P({className:"pp-loading-text"}))}extend(e,View.PPDiv);var t="pp-loading",n="#"+t,i=".pp-loading-text",o=function(){$(n).fadeIn()},r=function(){$(n).fadeOut(),$(i).hide().text("")},a=function(e){e&&$(i).show().text(e)},s=function(){return new e};return{build:s,show:o,hide:r,text:a}}(),View.$launcher=function(){function e(){var e=Ctrl.$launcher.get(),t=e.shouldShowLauncherWhenInit(),n=View.PPDiv;n.call(this,{id:"pp-launcher","class":"pp-launcher"},e);var i=this,o="background-image: url("+p+");background-color:"+View.Style.Color.launcher_background_color,r=e.getLauncherBottomMargin(),a=e.getLauncherRightMargin(),s="bottom:"+r+"; right:"+a;this.add(new n({id:"pp-launcher-container",style:s,event:{init:function(){e.onLauncherInit()}}},e).add(new n("pp-launcher-button-container").add(new n({id:"pp-launcher-button","class":"pp-launcher-button pp-unselectable",style:o,event:{click:function(){i.controller.onClickEvent()}}}))).add(new n({id:"pp-launcher-badge","class":"pp-launcher-badge pp-font",style:"display:none"},e))).show(t)}extend(e,View.PPDiv);var t="#pp-launcher-button",n="pp-launcher-button-maximize",i="pp-launcher-button-minimized",o="#pp-launcher-button-container",r="pp-launcher-button-container-active",a="pp-launcher-button-container-inactive",s={NORMAL:"normal",CLOSE:"close"},p=Configuration.assets_path+"img/icon-newacquire.png",u=Configuration.assets_path+"img/close.png",c=s.NORMAL,l=function(){return c},d=function(){return new e},f=function(){return View.$settings.getLaunchStyle().mode.toLowerCase()===View.Settings.LAUNCH_MODE.CUSTOM},g=function(){switch(View.$settings.getLaunchStyle().mode.toLowerCase()){case View.Settings.LAUNCH_MODE.CUSTOM:$(".pp-launcher").hide();break;case View.Settings.LAUNCH_MODE.NORMAL:$(t).removeClass(n).addClass(i),$(o).removeClass(r).addClass(a)}},h=function(e){var l=$(t);l.removeClass(i).addClass(n),$(o).removeClass(a).addClass(r),c=e;var d=c==s.NORMAL?p:u;l.css("background-image","url("+d+")")},m=function(){h(s.CLOSE),$("#pp-messenger").show(),View.$conversation.show()};return{STATE:s,build:d,shouldHideLauncher:f,hideLauncher:g,showLauncher:h,showMessageBox:m,state:l}}(),function(e){function t(){var t=e.PPDiv;t.call(this,{id:"pp-container","class":"pp-container pp-box-sizing pp-location"}),this.add(new e.CssStyle).add(e.$launcher.build()).add(new e.PPMessenger)}extend(t,e.PPDiv),e.PPContainer=t}(View),function(e){function t(){e.PPDiv.call(this,{id:"pp-messenger",style:"display:none"},null),this.add(new e.PPDiv("pp-messenger-box-container").add(e.$conversation.build()))}extend(t,e.PPDiv),e.PPMessenger=t}(View),View.$conversation=function(){function e(){View.PPDiv.call(this,{id:t,style:"background-color:"+View.Style.Color.base,"class":r+" pp-box-sizing"}),this.add(View.$sheetHeader.build()).add(View.$groupContent.build()).add(View.$conversationContentContainer.build()).add(View.$loading.build())}var t="pp-conversation",n="#"+t,i="pp-conversation-content-maximize",o="pp-conversation-sheet-minimized",r="pp-messenger-panel",a="."+r,s=Service.Constants.STYLE.PANEL_WIDTH,p=Service.$device.isMobileBrowser()||Service.$device.inMobileWidth()?0:20;return{build:function(){return new e},makeConversationPanelVisible:function(){$(n).removeClass(o).addClass(i)},show:function(){View.$conversation.prepare();var e=View.$settings,t=e.getLaunchStyle(),n=t.mode,i=t.position,o=t.bottom;switch(n.toLowerCase()){case View.Settings.LAUNCH_MODE.NORMAL:$(a).css({bottom:""}),View.$conversation.makeConversationPanelVisible();break;case View.Settings.LAUNCH_MODE.CUSTOM:$(a).css({bottom:o});var r=700;switch(i.toLowerCase()){case View.Settings.LAUNCH_POSITION.LEFT:$(a).animate({left:"+="+(s+p)+"px"},r);break;case View.Settings.LAUNCH_POSITION.RIGHT:$(a).animate({right:"+="+(s+p)+"px"},r)}}},hide:function(){var e=View.$settings,t=e.getLaunchStyle(),r=t.mode,u=t.position;switch(r.toLowerCase()){case View.Settings.LAUNCH_MODE.NORMAL:$(n).removeClass(i).addClass(o);break;case View.Settings.LAUNCH_MODE.CUSTOM:var c=700;switch(u.toLowerCase()){case View.Settings.LAUNCH_POSITION.LEFT:$(a).animate({left:"-="+(s+p)+"px"},c);break;case View.Settings.LAUNCH_POSITION.RIGHT:$(a).animate({right:"-="+(s+p)+"px"},c)}}},prepare:function(){var e=View.$settings,t=e.getLaunchStyle(),n=t.mode,i=t.position;switch(n.toLowerCase()){case View.Settings.LAUNCH_MODE.NORMAL:$(a).css({left:"",right:p+"px"});break;case View.Settings.LAUNCH_MODE.CUSTOM:switch(i.toLowerCase()){case View.Settings.LAUNCH_POSITION.LEFT:$(a).css({left:-s+"px",right:""});break;case View.Settings.LAUNCH_POSITION.RIGHT:$(a).css({left:"",right:-s+"px"})}}}}}(),View.$composerContainer=function(){function e(){var e=Ctrl.$composerContainer.get();View.PPDiv.call(this,{id:i,style:"background-color:"+View.Style.Color.base,"class":i+" pp-box-sizing-borderbox pp-font"},e);var t=this;this.add(t.getUploadingWarningHtml(e)).add(new View.PPDiv({id:"pp-composer"}).add(t.getComposerSendButtonContainer(e)).add(t.getComposerFormContainerHtml(e))),this.calcInputTextAreaRows()}extend(e,View.PPDiv),e.prototype.getUploadingWarningHtml=function(e){return new View.PPDiv("pp-composer-container-warning").add(new View.PPElement("span",{id:"pp-composer-container-warning-span","class":"pp-composer-container-warning-span pp-font"})).show(!1)},e.prototype.getComposerFormContainerHtml=function(e){var t=new View.PPDiv({style:"position: relative; overflow: hidden;"}),n=Service.$device.isMobileBrowser(),i=this,r=new View.PPElement("form",{id:"pp-composer-container-form",name:"pp-composer-container-form",enctype:"multipart/form-data",target:"pp-composer-uploadframe",method:"post"}),a=Service.Constants.i18n(n?"START_CONVERSATION_MOBILE_HINT":"START_CONVERSATION_HINT"),s="pp-composer-container-textarea pp-box-sizing-borderbox pp-font";return Service.$device.isIE()&&(s+=" pp-composer-container-textarea-min-height"),r.add(new View.PPElement("textarea",{id:o,"class":s,"data-min-rows":1,placeholder:a,style:e.getTextareaPaddingStyle(),rows:1,event:{keydown:function(t){e.onChatTextareaKeyDown(t)},focus:function(){e.onChatTextareaFocus()},blur:function(){e.onTextareaFocusOut()},init:function(){e.onTextareaInit()},"input propertychange":function(){e.onTextareaChange()}}},e)),r.add(new View.PPElement("input",{id:"pp-composer-container-content-txt",name:"content_txt",type:"hidden"})),r.add(new View.PPElement("input",{name:"upload_type",type:"hidden",value:"content_txt"})),r.add(new View.PPElement("iframe",{id:"pp-composer-uploadframe",name:"pp-composer-uploadframe",style:"display:none"})),r.add(i.getComposerToolsContainerHtml(e)),t.add(r),t},e.prototype.getComposerToolsContainerHtml=function(e){var t=new View.PPDiv("pp-composer-container-tools-container"),n=new View.Div("pp-composer-container-file-sendbutton-selector-container"),i="background-image: url("+Configuration.assets_path+"img/icon-upload.png)",o=Configuration.assets_path+"img/icon-send-button.png",r=Configuration.assets_path+"img/icon-mobile-send-button.png",a=Service.$device.isMobileBrowser()?r:o;return sendButtonBgStyle="background-image: url("+a+")",n.add(new View.PPElement("strong",{id:"pp-composer-container-file-selector","class":"pp-composer-container-action-btn pp-box-sizing",style:i,event:{click:function(){e.onFileSelectorBtnClicked()},mouseover:function(){e.onFileSelectorBtnMouseOver()},mouseleave:function(){e.onFileSelectorBtnMouseLeave()}}},e)),n.add(new View.Div({className:"pp-composer-container-send-button-container",style:sendButtonBgStyle,selector:".pp-composer-container-send-button-container",event:{click:function(){Ctrl.$composerContainer.get().sendText()}}})),t.add(n),t.add(new View.PPElement("input",{id:"pp-composer-container-input",type:"file",event:{change:function(t){t&&t.files&&$.each(t.files,function(t,n){e.onFileSelect(n)})}}},e)),t},e.prototype.getComposerSendButtonContainer=function(e){var t=e.isSendButtonShow(),n=Service.Constants.i18n("SEND");return new View.PPDiv({id:"pp-composer-send-button","class":"pp-composer-send-button pp-unselectable",style:"display:"+(t?"block":"none"),event:{mousedown:function(t){e.onSendButtonMouseDown(t)},init:function(){e.onSendButtonInit()}}}).add(new View.PPElement("p",{style:"padding-top: 7.5px;","class":"pp-p-no-margin"}).text(n))},e.prototype.calcInputTextAreaRows=function(){$(document).one("focus.textarea",r,function(){var e=this.value;this.value="",n=this.scrollHeight||this[0].scrollHeight,this.value=e,t=this.rows}).on("input.textarea",r,function(){s()})};var t,n,i="pp-composer-container",o="pp-composer-container-textarea",r="#"+o,a=function(){return Service.$device.inMobile()?28:Service.$device.isIE()?17:23},s=function(){var e=1,t=n,i=jQuery(r)[0],o=a();i&&i.rows&&i.scrollHeight&&(i.rows=e,i.rows=e+Math.ceil((i.scrollHeight-t)/o))};return{build:function(){return new e},fixInputRows:function(){s()},focus:function(){$(r).focus()},blur:function(){$(r).blur()}}}(),View.$conversationContent=function(){function e(e){var i=Ctrl.$conversationContent.init();if(View.PPDiv.call(this,{id:t,"class":t+" pp-unselectable pp-box-sizing-borderbox",event:{click:function(){i.onConversationContentClicked()},init:function(){i.onConversationContentInit()}}},i),e&&e.length>0)for(var o=0;o<e.length;++o)this.add(new View.PPConversationPart(e[o]));$timeout(function(){var e=Service.$device.isFirefox(),t=e?"DOMMouseScroll":"mousewheel",i=$(n);i.bind(t,function(t){if(!Ctrl.$conversationQuickMessage.isEnabled()){$(this).scrollTop(),e?-t.originalEvent.detail:t.originalEvent.wheelDelta/120}})})}extend(e,View.PPDiv);var t="pp-conversation-content",n="#"+t;return{build:function(t){return new e(t)},scrollToBottom:function(){$(n).stop().animate({scrollTop:$(n)[0].scrollHeight},600,"swing")},html:function(e){$(n).html(e)},append:function(e){$(n).append(e)},show:function(e){e?$(n).show():$(n).fadeIn()}}}(),View.$conversationContentContainer=function(){var e="pp-conversation-container",t="."+e,n=Configuration.assets_path+"img/close.png",i="background-image:url("+n+")",o="pp-borderless-dismiss",r=function(){$(t).hide()},a=function(e){e?$(t).show():$(t).fadeIn()},s=function(){return $(t).is(":visible")},p=function(){if(Ctrl.$conversationQuickMessage.isEnabled()){var e=$(".pp-conversation-content"),t=$("."+o+"-bar"),n=32,i=20,r=window.innerHeight-e.height()-$("#pp-composer").height()-Service.$tools.cssNum($(".pp-messenger-panel").css("bottom"))-Service.$tools.cssNum($(".pp-borderless-dismiss-bar").css("margin-bottom"))-n,a=0;a=r<i?window.innerHeight-Service.$tools.cssNum($(".pp-messenger-panel").css("bottom"))-$("#pp-composer").height()-i-10:e.height()+Service.$tools.cssNum(e.css("bottom")),t.css("bottom",a)}},u=function(){$("."+o+"-bar").slideUp()},c=function(){$("."+o+"-bar").slideDown()},l=function(){$("."+o+"-bar").hide()},d=function(){return new View.PPDiv(e).add(new View.Div({className:o+"-bar"}).add(new View.Div({className:o+"-button",style:i,selector:"."+o+"-button",event:{click:function(){Ctrl.$conversationQuickMessage.disable(),Ctrl.$conversationQuickMessage.enable()}}})).add(new View.Div({className:o+"-view-more",selector:"."+o+"-view-more",event:{click:function(){Ctrl.$launcher.get().onClickEvent()}}}).text(Service.Constants.i18n("VIEW_MORE")))).add(View.$conversationContent.build()).add(View.$composerContainer.build())},f=function(){var e=$(t);e.bind("mouseover",function(e){Ctrl.$conversationQuickMessage.isEnabled()&&(p(),c())}),e.bind("mouseleave",function(e){Ctrl.$conversationQuickMessage.isEnabled()&&u()})},g=function(){var e=$(t);e.unbind("mouseover"),e.unbind("mouseleave")};return{hide:r,show:a,visible:s,adjustDismissBarPosition:p,showDismissBar:u,hideDismissBar:c,hideDismissBarDirect:l,build:d,bindEvent:f,unbindEvent:g}}(),function(e){function t(t){var n=new Ctrl.PPUploadingBarCtrl,i="";switch(t.messageType){case Service.PPMessage.TYPE.FILE:i=t.message.file.fileUploadId;break;case Service.PPMessage.TYPE.IMAGE:i=t.message.image.fileUploadId}e.PPElement.call(this,"span",{id:"pp-uploading-bar-outer-"+i,"class":"pp-uploading-bar-outer pp-font"},n),this.text(Service.Constants.i18n("UPLOADING_HINT")),this.add(new e.PPDiv({id:"pp-uploading-bar-"+i,"class":"pp-uploading-bar"}).add(new e.PPDiv({id:"pp-uploading-bar-state-"+i,"class":"pp-uploading-bar-state"}))).add(new e.PPElement("span",{id:"pp-uploading-bar-remove-"+i,"class":"pp-uploading-bar-remove",style:"background-image:url("+Configuration.assets_path+"img/icon-upload-remove.png)",event:{click:function(){n.onUploadingBarRemoveBtnClicked(i,t)}}})),setTimeout(function(){n.init(t,i)})}extend(t,e.PPElement),e.PPUploadingBar=t}(View),View.$imageViewer=function(){function e(e,t){View.PPDiv.call(this,{"class":"pp-image-viewer"}),this.add(new View.PPDiv({"class":"pp-image-viewer-overlay"})).add(new View.PPElement("img",{"class":"pp-zoomed-image",src:e,style:t}))}extend(e,View.PPDiv);var t,n,i,o,r=".pp-image-viewer-overlay",a="#pp-container",s=".pp-image-viewer",p=".pp-image-viewer img",u=20,c=function(e){t=e,f(t),g(window.innerWidth,window.innerHeight,t),o="width:"+n.width+"px;height:"+n.height+"px;left:"+n.left+"px;top:"+n.top+"px"},l=function(){$(window).on("resize.pp-image-viewer",w),$(r).bind("click",x),$(s+" img").bind("click",x),$(document).on("keyup.pp-image-viewer",y)},d=function(){$(document).off("keyup.pp-image-viewer"),$(window).on("resize.pp-image-viewer")},f=function(e){n={width:e.width(),height:e.height(),left:e.offset().left-$(document).scrollLeft(),top:e.offset().top-$(document).scrollTop()}},g=function(e,t,n){var o=n[0],r=e-2*u,a=t-2*u,s=Math.min(r/o.naturalWidth,a/o.naturalHeight);s>1&&(s=1);var p=o.naturalWidth*s,c=o.naturalHeight*s,l=e/2-p/2,d=t/2-c/2;i={width:p,height:c,left:l,top:d}},h=function(t){return c(t),$(a).append(new e(t[0].src,o).getElement()[0].outerHTML),l(),$(p).animate(i,{duration:100,queue:!1,easing:"easeInQuart"}),$(r).animate({opacity:.8,queue:!1,easing:"easeInQuart"},200),this},m=function(){$(s).remove()},v=function(e,n){g(e,n,t),$(p).css(i)},b=function(){f(t),$(p).animate(n,{queue:!1,duration:200}),$(r).animate({opacity:0},{queue:!1,duration:500}),setTimeout(function(){m()},700),d()},x=function(){b()},y=function(e){27===e.keyCode&&b()},w=function(e){v(window.innerWidth,window.innerHeight)};return{show:h}}(),function(e){function t(t){var n=new Ctrl.AppProfileContainerCtrl(t),i=this;e.PPDiv.call(this,"pp-app-profile-container",n);var o=n.getAppTeamName(),r=n.getWelcomeText(),a=n.getActiveAdmins();this.add(new e.PPDiv("pp-app-profile").add(new e.PPDiv("pp-app-profile-activity").add(new e.PPDiv({id:"pp-app-profile-team","class":"pp-app-profile-team pp-font pp-selectable"}).text(o))).add(i.appendActiveAdminsHtmlElements(a)).add(new e.PPDiv({id:"pp-app-profile-text","class":"pp-app-profile-text pp-font pp-selectable"}).add(new e.PPElement("p").text(r))))}extend(t,e.PPDiv),t.prototype.appendActiveAdminsHtmlElements=function(t){var n=new e.PPDiv("pp-active-admins");return t&&$.each(t,function(t,i){i=Service.$users.getUser(i.user_uuid)&&Service.$users.getUser(i.user_uuid).getInfo(),n.add(new e.AppProfileContainerActiveAdmin(i))}),n},e.AppProfileContainer=t}(View),function(e){function t(t){e.PPDiv.call(this,{"class":"pp-active-admin",user_uuid:t.user_uuid});var n=t.is_online,i="state "+(n?"online":"offline"),o=function(e){return"["+(e?Service.Constants.i18n("ONLINE"):Service.Constants.i18n("OFFLINE"))+"]"},r=o(n);this.add(new e.PPDiv("pp-admin-avatar").add(new e.PPElement("img",{src:t.user_avatar}))).add(new e.PPDiv({"class":"pp-active-admin-name pp-font pp-selectable"}).text(t.user_fullname)).add(new e.PPDiv({"class":i+" pp-font"}).text(r)),Service.$pubsub.subscribe("user/infochange/"+t.user_uuid,function(e,n){var i=n.getInfo(),o=$("#pp-active-admins").find("div[user_uuid="+t.user_uuid+"]");o.length&&(o.find("img").attr("src",i.user_avatar),o.find(".pp-active-admin-name").text(i.user_fullname))}),Service.$pubsub.subscribe("user/infochange/state/"+t.user_uuid,function(e,n){var i=n.getInfo(),r=$("#pp-active-admins").find("div[user_uuid="+t.user_uuid+"]");if(r.length){var a=r.find(".state");i.is_online?a.removeClass("offline").addClass("online"):a.removeClass("online").addClass("offline"),a.text(o(i.is_online))}})}extend(t,e.PPDiv),e.AppProfileContainerActiveAdmin=t}(View),View.conversationPartTools=function(){function e(e){var t="#c9cbcf",n=e.extra.description,i=!1;return Service.$tools.isMessageSendError(e)?(t="red",n=e.extra.errorDescription):"SENDING"===e.messageState&&(n=Service.Constants.i18n("SENDING")),i=n&&n.length>0&&!Service.$tools.isUploading(e),{style:"color:"+t+"; display:"+(i?"block":"none"),text:n,show:i}}function t(e,t){var i=Service.$conversation.getUser(t);if(0===i.length)return new View.Img({className:n,src:e});if(1===i.length)return new View.Img({className:n,src:i[0].user_avatar});if(2===i.length){for(var o=new View.Div(n+"-container"),r=i.length,a=["first","second"],s=0;s<r;s++)o.add(new View.Img({src:i[s].user_avatar,className:"pp-conversation-part-msg-"+a[s]+"-of-two-avatar"}));return o}if(i.length>=3){for(var o=new View.Div(n+"-container"),p=3,a=["first","second","third"],s=0;s<p;s++)o.add(new View.Img({src:i[s].user_avatar,className:"pp-conversation-part-msg-"+a[s]+"-of-three-avatar"}));return o}}var n="pp-conversation-part-msg-by-admin-avatar";return{buildExtra:e,buildAvatars:t}}(),function(e){function t(t){var n=t.messageId;switch(e.PPDiv.call(this,{id:"pp-conversation-part-"+n,"class":"pp-conversation-part"}),t.messageType){case Service.PPMessage.TYPE.WELCOME:t&&this.add(new e.AppProfileContainer(t));break;case Service.PPMessage.TYPE.TEXT:this.add(t.user.admin?new e.PPConversationPartTextByAdmin(t):e.$userTextMessage.build(t));break;case Service.PPMessage.TYPE.IMAGE:this.add(t.user.admin?e.$adminImageMessage.build(t):e.$userImageMessage.build(t));break;case Service.PPMessage.TYPE.FILE:this.add(t.user.admin?new e.PPConversationPartFileByAdmin(t):e.$userFileMessage.build(t));break;case Service.PPMessage.TYPE.TIMESTAMP:this.add(new e.PPConversationPartTimestamp(t))}}extend(t,e.PPDiv),e.PPConversationPart=t}(View),View.$pulltoRefresh=function(){function e(e){var n=Ctrl.$pulltoRefreshController.get(),i=void 0!==e?e:n.getLoadHistortyHintText();View.PPDiv.call(this,{id:t,"class":t+" pp-conversation-part-center"}),this.text(i)}extend(e,View.PPDiv);var t="pp-conversation-part-pulltorefreshbutton",n="."+t,i=function(t){return new e(t)},o=function(){$(n).hide()},r=function(){$(n).show()},a=function(){return $(n)};return{build:i,hide:o,show:r,el:a}}(),function(e){function t(t){e.PPDiv.call(this,"pp-conversation-part-file-by-admin");var i=(t.user.avatar,t.user.name,t.user.id),o=t.message.file.fileUrl,r=t.message.file.fileName,a=t.messageId,s=function(e,t){var i="#pp-conversation-part-"+a,o=t.getInfo();$(i).find("."+n).attr("src",o.user_avatar)};Service.$pubsub.subscribe("user/infochange/"+i,s),this.add(new e.PPDiv("pp-conversation-part-file-by-admin-outer").add(new e.PPDiv("pp-conversation-part-file-by-admin-outer-2").add(e.conversationPartTools.buildAvatars(t.user.avatar,Service.$conversationManager.activeConversation().token)).add(new e.PPDiv("pp-conversation-part-msg-by-admin-body-container").add(new e.PPDiv("pp-conversation-part-file-by-admin-outer-4").add(new e.PPDiv("pp-conversation-part-file-by-admin-outer-5").add(new e.PPDiv({id:"pp-conversation-part-file-by-admin-upload-icon",style:"background-image:url("+Configuration.assets_path+"img/icon-attachment.png)"})).add(new e.PPDiv("pp-conversation-part-file-by-admin-outer-6").add(new e.PPElement("a",{href:o,download:r,"class":"pp-conversation-part-file-by-admin-file-link pp-font",title:r}).text(r)))).add(new e.PPDiv("pp-conversation-part-file-by-admin-timestamp-container").add(new e.PPElement("span",{"class":"pp-selectable pp-font",id:"pp-conversation-part-file-by-admin-timestamp-"+a}).text()))))))}var n="pp-conversation-part-msg-by-admin-avatar";extend(t,e.PPDiv),e.PPConversationPartFileByAdmin=t}(View),View.$userFileMessage=function(){function e(e){return new l(e)}function t(e){$(d+e.messageId).css({opacity:.6})}function n(e,t){t<0||t<=100&&$("#pp-uploading-bar-state-"+e.message.file.fileUploadId).css("width",t+"%")}function i(e){p(e)}function o(e){p(e)}function r(e){$("#pp-conversation-part-file-by-user-o2-"+e.messageId).css({opacity:1}),e.message.file.fileServerUrl&&$("#pp-conversation-part-file-by-user-a-"+e.messageId).attr("href",e.message.file.fileServerUrl),c(e)}function a(e){u(e,Service.Constants.i18n("SENDING"),void 0)}function s(e){u(e,e.extra.errorDescription,"red")}function p(e){$("#pp-uploading-bar-outer-"+e.message.file.fileUploadId).hide()}function u(e,t,n){$("#pp-conversation-part-file-by-user-timestamp-"+e.messageId).text(t).css({color:n,display:"block"})}function c(e){$("#pp-conversation-part-file-by-user-timestamp-"+e.messageId).text("").css({color:void 0,display:"none"})}function l(e){View.PPDiv.call(this,{id:"pp-conversation-part-file-by-user-"+e.messageId,"class":"pp-conversation-part-file-by-user"});var t=Service.$tools,n=Service.$tools.isMessageSendError(e),i=View.conversationPartTools.buildExtra(e),o=t.isUploading(e),r=Service.$device.isIE();this.add(new View.PPDiv({id:"pp-conversation-part-file-by-user-o-"+e.messageId,"class":"pp-conversation-part-file-by-user-o"}).add(new View.PPDiv({id:"pp-conversation-part-file-by-user-o2-"+e.messageId,"class":"pp-conversation-part-file-by-user-o2",style:n?"opacity: 0.6":""}).add(new View.PPDiv({id:"pp-conversation-part-file-by-user-upload-icon",style:"background-image:url("+Configuration.assets_path+"img/icon-attachment.png)"})).add(new View.PPDiv({"class":"pp-conversation-part-file-by-user-link-container",style:r?"margin-left: 0px;":null}).add(new View.PPElement("a",{id:"pp-conversation-part-file-by-user-a-"+e.messageId,"class":"pp-font",title:e.message.file.fileName,style:n?"cursor:default":"cursor:pointer",href:e.message.file.fileServerUrl?e.message.file.fileServerUrl:void 0}).text(e.message.file.fileName)))).add(new View.PPDiv({id:"pp-conversation-part-file-by-user-timestamp-"+e.messageId,"class":"pp-conversation-part-file-by-user-timestamp pp-selectable pp-font",style:i.style}).text(i.text)).add(new View.PPDiv({"class":"pp-fixme"}).add(new View.PPUploadingBar(e).show(o))))}var d="#pp-conversation-part-file-by-user-o2-";return{build:e,onBeginUpload:t,onUploading:n,onUploadDone:i,onUploadFail:o,onSendDone:r,onSending:a,onSendFail:s}}(),function(e){var t="pp-conversation-part-msg-by-admin-avatar";e.$adminImageMessage=function(){function n(n){e.PPDiv.call(this,"pp-conversation-part-image-by-admin");var i="#pp-conversation-part-"+n.messageId+" .pp-conversation-part-image-by-admin-img",r=function(){o()?e.$imageViewer.show($(i)):window.open(n.message.image.url)},a=function(){return o()?null:"cursor:pointer"};Service.$pubsub.subscribe("user/infochange/"+n.user.id,function(e,i){var o="#pp-conversation-part-"+n.messageId,r=i.getInfo();$(o).find("."+t).attr("src",r.user_avatar)}),this.add(new e.PPDiv("pp-conversation-part-image-by-admin-o").add(new e.PPDiv("pp-conversation-part-image-by-admin-o1").add(e.conversationPartTools.buildAvatars(n.user.avatar,Service.$conversationManager.activeConversation().token)).add(new e.PPDiv("pp-conversation-part-msg-by-admin-body-container").add(new e.PPDiv("pp-conversation-part-image-by-admin-o3").add(new e.PPDiv("pp-conversation-part-image-by-admin-o4").add(new e.PPElement("img",{src:n.message.image.url,selector:i,"class":"pp-conversation-part-image-by-admin-img pp-image-viewable",style:a(),event:{click:r}})))).add(new e.PPDiv("pp-conversation-part-image-by-admin-timestamp-container").add(new e.PPElement("span",{"class":"pp-selectable pp-font",id:"pp-conversation-part-image-by-admin-timestamp-"+n.messageId}).text())))))}extend(n,e.PPDiv);var i=function(e){return new n(e)},o=function(){return!0};return{build:i}}()}(View),function(e){e.$userImageMessage=function(){function t(t){e.PPDiv.call(this,"pp-conversation-part-image-by-user");var n=Service.$tools.isUploading(t),i=t.messageId,o="#pp-conversation-part-"+i+" .pp-conversation-part-image-by-user-img",r=e.conversationPartTools.buildExtra(t),a=Service.$tools.isMessageSendError(t)||n,s=(t.message.image.url,d()),p="pp-conversation-part-image-by-user-img"+(s?" pp-image-viewable":""),u=function(e){s?l($(o)):window.open($(o).attr("src"))},c=function(){var e="";return e+=a?"opacity: .6":"",s||(e+="cursor:pointer"),e},l=function(t){e.$imageViewer.show(t)};this.add(new e.PPDiv("pp-conversation-part-image-by-user-o").add(new e.PPElement("img",{
id:"pp-conversation-part-image-by-user-img-"+t.messageId,"class":p,src:t.message.image.data||t.message.image.url,style:c(),event:{click:u}})).add(new e.PPDiv({id:"pp-conversation-part-image-by-user-timestamp-"+t.messageId,"class":"pp-conversation-part-image-by-user-timestamp pp-selectable"}).add(new e.PPElement("span",{id:"pp-conversation-part-image-by-user-timestamp-span-"+t.messageId,"class":"pp-conversation-part-image-by-user-timestamp-span pp-font",style:r.style}).text(r.text)).show(!n)).add(new e.PPDiv({"class":"pp-fixme"}).add(new e.PPUploadingBar(t).show(n))))}function n(e,t){t<0||t<=100&&$("#pp-uploading-bar-state-"+e.message.image.fileUploadId).css("width",t+"%")}function i(e){u(e)}function o(e){u(e)}function r(e){l(e,Service.Constants.i18n("SENDING"),void 0)}function a(e){var t=g(e.messageId);$(t).css({opacity:.6})}function s(e){$(g(messageId)).css({opacity:.6,cursor:"default"}),l(e,e.extra.errorDescription,"red")}function p(e){$(g(e.messageId)).css({opacity:1}),c(e)}function u(e){$("#pp-uploading-bar-outer-"+e.message.image.fileUploadId).hide()}function c(e){$(h(e.messageId)).hide(),$(m(e.messageId)).text("").css({color:void 0,display:"none"})}function l(e,t,n){$(h(e.messageId)).show(),$(m(e.messageId)).text(t).css({color:n,display:"block"})}extend(t,e.PPDiv);var d=function(){return!0},f=function(e){return new t(e)},g=function(e){return"#pp-conversation-part-image-by-user-img-"+e},h=function(e){return"#pp-conversation-part-image-by-user-timestamp-"+e},m=function(e){return"#pp-conversation-part-image-by-user-timestamp-span-"+e};return{build:f,onBeginUpload:a,onUploading:n,onUploadDone:i,onUploadFail:o,onSending:r,onSendFail:s,onSendDone:p}}()}(View),function(e){function t(t){e.PPDiv.call(this,"pp-conversation-part-text-by-admin");var i=e.$textUrlChecker.match(t.message.text.body).trustAsHtml(),o=Ctrl.$conversationQuickMessage.isEnabled()&&Service.$messageToolsModule.isQuickMessage(t),r=o?"background-color:#FFF":"",a=o?"margin-left:3px":"";Service.$pubsub.subscribe("user/infochange/"+t.user.id,function(e,i){var o="#pp-conversation-part-"+t.messageId,r=i.getInfo();$(o).find("."+n).attr("src",r.user_avatar)}),this.add(new e.PPDiv("pp-conversation-part-text-by-admin-outer").add(new e.PPDiv("pp-conversation-part-text-by-admin-outer-2").add(e.conversationPartTools.buildAvatars(t.user.avatar,Service.$conversationManager.activeConversation().token)).add(new e.PPDiv("pp-conversation-part-msg-by-admin-body-container").add(new e.PPDiv({style:"padding-bottom: 10px;"}).add(new e.PPDiv({className:"pp-conversation-part-text-by-admin-body-container",style:a}).add(new e.PPDiv({id:"pp-conversation-part-text-by-admin-body","class":"pp-conversation-part-text-by-admin-body pp-font pp-text-link-admin pp-selectable",style:r}).html(i))).add(new e.Div("pp-conversation-part-text-by-admin-body-triangle pp-conversation-part-msg-by-admin-body-triangle").show(o))).add(new e.PPDiv("pp-conversation-part-text-by-admin-timestamp-container").add(new e.PPElement("span",{"class":"pp-selectable pp-font",id:"pp-conversation-part-text-by-admin-timestamp-"+t.messageId}))))))}var n="pp-conversation-part-msg-by-admin-avatar";extend(t,e.PPDiv),e.PPConversationPartTextByAdmin=t}(View),View.$userTextMessage=function(){function e(e){return new a(e)}function t(e){o(e,Service.Constants.i18n("SENDING"),void 0)}function n(e){r(e)}function i(e){o(e,e.extra.errorDescription,"red")}function o(e,t,n){$(u+e.messageId).find(".extra").text(t).css({color:n}).show()}function r(e){$(u+e.messageId).find(".extra").text("").css({color:void 0}).hide()}function a(e){s.call(this,"pp-conversation-part-text-by-user");var t=View.$textUrlChecker.match(e.message.text.body).trustAsHtml(),n=View.conversationPartTools.buildExtra(e);this.add(new s("pp-conversation-part-text-by-user-outer").add(new s("pp-wrapper").add(new s({className:"pp-conversation-part-text-by-user-body-outer",style:"background-color:"+View.Style.Color.main_color}).add(new s({id:"pp-conversation-part-text-by-user-body","class":"pp-conversation-part-text-by-user-body pp-font pp-text-link-user pp-selectable"}).html(t)))).add(new s("pp-conversation-part-text-by-user-timestamp-outer").add(new View.Span({"class":"extra pp-selectable",style:n.style}).text(n.text))))}var s=View.PPDiv,p="pp-conversation-part-",u="#"+p;return{build:e,onSendFail:i,onSending:t,onSendDone:n}}(),function(e){function t(t){e.PPDiv.call(this,{id:"pp-conversation-part-timestamp-"+t.messageId,"class":"pp-conversation-part-center pp-font"}),this.add(new e.PPDiv({"class":"pp-conversation-part-timestamp-time"}).text(t.message.timestamp.timeStr))}extend(t,e.PPDiv),e.PPConversationPartTimestamp=t}(View),function(e){function t(e,t,n){this.source=e,this.include=t,this.matchIndexArray=n}function n(){}t.prototype.trustAsHtml=function(e){if(!this.include)return this._encodeHtmlEntity(this.source);var t=this.source,n=this.matchIndexArray,i="",o=0,r=this;return $.each(n,function(n,a){i+=r._encodeHtmlEntity(t.substring(o,a.begin));var s=/^https?:\/\//.test(a.url)?a.url:"http://"+a.url;i+="<a href='"+s+"' target='_blank'",e&&(i+=" class='"+e+"'"),i+=">",i+=a.url,i+="</a>",o=a.end}),o<t.length&&(i+=this._encodeHtmlEntity(t.substring(o,t.length))),i},t.prototype._encodeHtmlEntity=function(e){var t=e;return t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;")},n.UrlPattern=/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[a-zA-Z0-9\/\-\.=_&%#?:;|]{2,}|www\.[^\s"']+\.[a-zA-Z0-9\/\-\.=_&%#?:;|]{2,})/g,n.prototype.match=function(e){for(var i,o=[],r=n.UrlPattern;null!==(i=r.exec(e));)o.push({begin:i.index,end:r.lastIndex,url:i[0]});return new t(e,0!=o.length,o)},e.TextUrlChecker=n}(View),View.Style=function(){function e(){return i.Color=t(),i}function t(){if(void 0!==n)return n;var e=Service.$app.app()&&Service.$app.app().ppcom_launcher_color||"#1F8CEB",t="white",i="#E4E4E4";return{main_color:e,launcher_background_color:e,base:t,base_darker:i,hovercard_close_btn:"rgba(40,45,50,.4)"}}var n,i={init:e};return i}(),function(e){function t(){this._ppSettings={view:{launch_style:{mode:"normal",position:void 0,bottom:95}}},this._launchMode=t.LAUNCH_MODE.NORMAL}t.DEFAULT_BOTTOM_MARGIN="20px",t.DEFAULT_RIGHT_MARGIN="20px",t.LAUNCH_MODE={NORMAL:"normal",CUSTOM:"custom"},t.LAUNCH_POSITION={LEFT:"left",RIGHT:"right"};var n=t.prototype;t.prototype.init=function(e){return e&&$.extend(this._ppSettings,e),this},t.prototype.getLauncherBottomMargin=function(){return this._getValueFromPPSettingsView("launcher_bottom_margin",t.DEFAULT_BOTTOM_MARGIN)},t.prototype.getLauncherRightMargin=function(){return this._getValueFromPPSettingsView("launcher_right_margin",t.DEFAULT_RIGHT_MARGIN)},t.prototype.isShowLauncher=function(){return this._getValueFromPPSettingsView("launcher_is_show",!0)},t.prototype._getValueFromPPSettingsView=function(e,t){var n=t;return this._ppSettings&&this._ppSettings.view&&e in this._ppSettings.view&&(n=this._ppSettings.view[e.toLowerCase()]),n},n.getLaunchStyle=function(){return this._getValueFromPPSettingsView("launch_style",{mode:"normal",position:void 0,bottom:95})},n.getSettings=function(){return this._ppSettings},e.PPSettings=t,e.Settings=e.PPSettings}(View),function(e){function t(e){var t=e;this.empty=function(e){$(e).empty()},this.show=function(e,t){$(e).css("display",t?"block":"none")},this.getModal=function(){return t},this.setModal=function(e){t=e}}e.PPBaseCtrl=t}(Ctrl),function(e){function t(t){e.PPBaseCtrl.call(this);var n=t.message.welcome;this.getAppTeamName=function(){return n.appTeamName},this.getWelcomeText=function(){return n.appWelcomeText},this.getActiveAdmins=function(){return n.activeAdmins}}extend(t,e.PPBaseCtrl),e.AppProfileContainerCtrl=t}(Ctrl),Ctrl.$composerContainer=function(){function e(){Ctrl.PPBaseCtrl.call(this);var e=Service.$tools,t=Service.$device,n=Service.Constants,i=t.isMobileBrowser(),o="#pp-composer-container",r="#pp-composer-container-textarea",a="#pp-composer-container-file-selector",s="#pp-composer-container-warning",p=".pp-composer-container-send-button-container",u=".pp-composer-container-file-sendbutton-selector-container",c=function(){var e=$(r)[0];if(e.setSelectionRange)e.focus(),e.setSelectionRange(0,0);else if(e.createTextRange){var t=e.createTextRange();t.moveStart("character",0),t.select()}};this.getTextareaPaddingStyle=function(){return"padding: 18px 45px 18px 30px"},this.hide=function(){$(o).css("margin-bottom","-59px")},this.show=function(e){$(o).animate({"margin-bottom":"0px"},200,function(){e&&e()})},this.onFileSelectorBtnClicked=function(){$("#pp-composer-container-input").trigger("click")},this.onFileSelectorBtnMouseOver=function(){$(a).css("opacity",1)},this.onFileSelectorBtnMouseLeave=function(){$(a).css("opacity",.4)},this.onChatTextareaFocus=function(){View.$conversationContent.scrollToBottom(),$(r).addClass("pp-textarea-focus")},this.onTextareaFocusOut=function(){$(r).removeClass("pp-textarea-focus")},this.onTextareaChange=function(){var e=$(r).val(),t=!!(e&&e.length>0);t?($(p).show(),$(a).hide(),i&&($(p).css("opacity","1.0"),$(u).css({"border-radius":"50%","background-color":View.Style.Color.main_color}))):($(p).hide(),$(a).show(),i&&$(u).css({"border-radius":"%","background-color":""}))},this.onChatTextareaKeyDown=function(e){13==e.which&&(e.preventDefault(),this.sendText(),this.onTextareaChange())},this.sendText=function(){var e=$(r).val();e&&($(r).val(""),$(r).focus(),$(r)[0].rows=1,new Service.PPMessage.Builder(Service.PPMessage.TYPE.TEXT).textMessageBody(e).build().send(),View.$conversationContentContainer.adjustDismissBarPosition()),this.disableSendButton(!0)},this.onTextareaInit=function(){t.isIE()&&$(r).val("")},this.onFileSelect=function(t){var i=e.isImage(t.name),o=new FileReader;if(o.onloadend=function(e){if(i)e.target&&e.target.result&&new Service.PPMessage.Builder(Service.PPMessage.TYPE.IMAGE).imageBody({file:t,url:t.name,data:e.target.result}).build().send();else{var n=t.name,o=t.name,r=-1;(r=n.lastIndexOf("\\"))>0&&(o=n.substring(r+1)),new Service.PPMessage.Builder(Service.PPMessage.TYPE.FILE).fileBody({fileUrl:n,file:t,fileName:o,fileSize:e.total}).build().send()}View.$conversationContentContainer.adjustDismissBarPosition()},o.onerror=function(e){Service.$debug.d("FileReader upload file error. filePath: %s, error: %s.",filePath,e)},t){var r=t.size;if(r>n.MAX_UPLOAD_SIZE){var a=n.i18n("MAXIMUM_UPLOAD_SIZE_HINT")+n.MAX_UPLOAD_SIZE_STR;$(s).css("display","block"),$("#pp-composer-container-warning-span").text(a),setTimeout(function(){$(s).animate({opacity:.01},3e3,function(){$(s).css("display","none"),$(s).css("opacity","1.0")})},2e3)}else o.readAsDataURL(t)}},this.isSendButtonShow=function(){return!1},this.onSendButtonInit=function(){this.disableSendButton(!0)},this.onSendButtonMouseDown=function(e){e.stopImmediatePropagation(),e.preventDefault(),this.sendText()},this.disableSendButton=function(e){$("#pp-composer-send-button").css("background",e?"#CCCCCC":"#0074b0")},this.resetCursor=c}extend(e,Ctrl.PPBaseCtrl);var t=null;return{get:function(){return null==t&&(t=new e),t}}}(),Ctrl.$conversationContent=function(){function e(e){r=e,Ctrl.$conversationPanel.mode(Ctrl.$conversationPanel.MODE.CONTENT),__Monitor.report(__MonitorEvent.show,r),t(e)}function t(e){View.$conversationContent.html(View.$pulltoRefresh.el());var t=u()&&u().getMessages()||[],n="";$.each(t,function(e,i){n+=new View.PPConversationPart(t[e]).getElement()[0].outerHTML}),View.$conversationContent.append(n);var i=Modal.$conversationContentGroup.get(o());Ctrl.$sheetheader.decrUnread(i.unreadCount()),i.clearUnread(),__Monitor.report(__MonitorEvent.resume,r)}function n(e,t){t&&View.$sheetHeader.reBuildTeamProfile(t.token),e&&__Monitor.report(__MonitorEvent.hide,e)}function i(){View.$conversationContentContainer.hide(),n(r),r=void 0}function o(){return r&&r.uuid}var r,a=200,s="#pp-conversation-content",p=function(){return Service.$pubsub.subscribe("msgArrived/chat",function(e,t){var n=t.getBody();n.conversation.uuid;h(n),View.$conversationContent.scrollToBottom()}),this},u=function(e){var t=e||o();return t&&Modal.$conversationContentGroup.get(t)},c=function(e,t){var n=$(s),i=n[0].scrollHeight,o="";$.each(e,function(t,n){o+=new View.PPConversationPart(e[t]).getElement()[0].outerHTML}),n.prepend(o),n.scrollTop(n[0].scrollHeight-i),t&&t()},l=function(e,t){var n=o();n&&f(n,function(n,i){e&&e(),u()&&u().setLoadable(i),c(n,function(){t&&t(n)})})},d=function(){Service.$device.isMobileBrowser()&&View.$composerContainer.blur()},f=function(e,t){u().getConversationHistory(e,t)},g=function(){$(s).append(View.$pulltoRefresh.build().getHTML())},h=function(e,t){function n(){$(s).append(new View.PPConversationPart(e).getElement()[0].outerHTML)}if(t)return void n();var i=u(e.conversation.uuid);if(i){var o=i.addMessage(e);o&&$(s).append(new View.PPConversationPartTimestamp(o).getElement()[0].outerHTML),n()}},m=function(e){u()&&u().updateMessageIdsArray(e)},v=function(){$(s).empty()},b=function(i,o,s){var p=o&&o.delay&&o.delay||a,u=o&&o.fadeIn&&o.fadeIn||!0;if(showCallback=function(){$timeout(function(){Ctrl.$pulltoRefreshController.get(Ctrl.$conversationContent).loadable(x()).onend(d).bindEvent(),Service.$device.isMobileBrowser()||View.$composerContainer.focus(),View.$conversationContentContainer.show(u),s&&s()},p)},Service.$device.isIOS()&&Service.$device.disableScroll(),i&&i.token){var c=r;c!==i?(n(c,i),e(i)):t(i),showCallback()}},x=function(){return u()&&u().isLoadable()};return{init:p,show:b,hide:i,onConversationContentClicked:d,onConversationContentInit:g,appendMessage:h,loadHistorys:l,updateMessageIdsArray:m,clear:v,isLoadable:x}}(),Ctrl.$conversationList=function(){function e(){function e(e){var t=[];return e&&$.each(e,function(e,n){var i,o,r,a=n.token,s=n.conversation_data||n;i=Service.$tools.icon.get(s.conversation_icon),o=s.conversation_name,t.push({uuid:a,icon:i,name:o,summary:r})}),t}function t(e){e&&$.each(e,function(e,t){var n=t.token,i=Modal.$conversationContentGroup.get(n),o=View.$groupContentItem;i.unreadCount()>0?o.showUnread(n,i.unreadCount()):o.hideUnread(n)})}Ctrl.$conversationPanel.mode(Ctrl.$conversationPanel.MODE.LIST),View.$loading.show(),Service.$conversationManager.asyncGetList(function(n){View.$groupContent.update(e(n)).show(),Ctrl.$conversationContent.hide(),View.$loading.hide(),t(n),i(n).load(function(e,t,n){View.$groupContentItem.description(e,t),View.$groupContentItem.timestamp(e,Service.$tools.timeago(n))})})}function t(e,t){function n(){View.$groupContentItem.animateHide(),View.$loading.show(),View.$groupContent.hide()}function i(t){o(e)}function o(e){if(void 0!==e){var t=Service.$conversationManager;t.activeConversation(e),Ctrl.$conversationContent.show(t.activeConversation(),{},a)}else r()}function r(){View.$loading.hide(),View.$groupContent.show(),t&&t(!1)}function a(){Ctrl.$conversationPanel.mode(Ctrl.$conversationPanel.MODE.CONTENT),View.$loading.hide(),View.$composerContainer.focus(),t&&t(!0)}var s=Service.$conversationManager,p=s.find(e);s.TYPE;void 0!==p&&(n(),i(p))}function n(){}function i(e){function t(t){e&&$.each(e,function(e,n){var i=Modal.$conversationContentGroup.get(n.token);if(i&&!i.isEmpty()){var o=i.getMessages()[i.getMessages().length-1];return void(t&&t(n.token,Service.PPMessage.getMessageSummary(o),1e3*o.messageTimestamp))}return n.latest_message?void new Service.ApiMessageAdapter(Service.$json.parse(n.latest_message.message_body)).asyncGetPPMessage(function(e,i){i&&t&&t(n.token,i?e.getMessageSummary():"",1e3*e.getBody().messageTimestamp)}):void(t&&t(n.token,"",(new Date).getTime()))})}return{load:t}}return{show:e,showItem:t,hide:n}}(),Ctrl.$conversationPanel=function(){function e(e){e===s.QUICK_MESSAGE&&Ctrl.$conversationQuickMessage.setLastMode(p),p=e}function t(){Service.$polling.cancel({eventID:u}),Service.$conversationAgency.cancel(),View.$loading.hide()}function n(n){if(!n)return p;switch(e(n),p){case s.LIST:o(),t();break;case s.CONTENT:View.$sheetHeader.showDropDownButton(),View.$sheetHeader.showGroupButton(),View.$sheetHeader.showTeamProfile(),t();break;case s.WAITING:o(),View.$groupContent.hide(),Ctrl.$conversationContent.hide(),View.$loading.show(),Ctrl.$sheetheader.setHeaderTitle(Service.Constants.i18n("WAITING_AVALIABLE_CONVERSATION")),a();break;case s.QUICK_MESSAGE:Ctrl.$conversationQuickMessage.enable()}}function i(){return View.$launcher.state()==View.$launcher.STATE.CLOSE}function o(){Service.$schedule.cancelAll(),View.$sheetHeader.hideGroupButton(),View.$sheetHeader.hideDropDownButton()}function r(){var e=Service.$pubsub,t=Service.$conversationManager,i=t.EVENT.WAITING,o=t.EVENT.AVALIABLE,r=200;e.subscribe(i,function(e,t){$timeout(function(){!Ctrl.$launcher.get().isLauncherShow()&&n(s.WAITING)},r)}),e.subscribe(o,function(e,t){n()===s.WAITING&&(Ctrl.$sheetheader.setHeaderTitle(),View.$sheetHeader.reBuildTeamProfile(Service.$conversationManager.activeConversation().token),View.$groupContent.hide(),Ctrl.$conversationContent.show(Service.$conversationManager.activeConversation(),{fadeIn:!1,delay:0},function(){n(s.CONTENT),View.$loading.hide(),View.$composerContainer.focus()}))})}function a(){Service.$polling.run({eventID:u,apiFunc:Service.$api.getPPComDefaultConversation,apiRequestParams:{app_uuid:Service.$app.appId(),user_uuid:Service.$user.quickId(),device_uuid:Service.$user.quickDeviceUUID()},onGet:function(e,t){if(t){var n=Service.Constants.i18n("WAITING_HINT");View.$loading.text(n),e.conversation_uuid&&Service.$pubsub.publish(Service.$conversationManager.EVENT.CONVERSATION_UUID_AVALIABLE,e.conversation_uuid)}}})}var s={LIST:"LIST",CONTENT:"CONTENT",WAITING:"WAITING",QUICK_MESSAGE:"QUICK_MESSAGE"},p=s.CONTENT,u="POLLING_QUEUE_LENGTH_EVENT_ID";return r(),{MODE:s,mode:n,setMode:e,isOpen:i,stopPolling:t}}(),Ctrl.$conversationQuickMessage=function(){function e(){return p}function t(){return e&&u}function n(){if(!u){if(Ctrl.$conversationPanel.isOpen())return void Service.$debug.d("[Quick-Message] Cannot enable quick message mode, ConversationPanel not open");u=!0,$("#pp-messenger").show(),View.$conversation.show(),$("#pp-composer").hide(),$("#pp-conversation").hide(),$(".pp-conversation-part-pulltorefreshbutton").hide(),$(".pp-messenger-panel").css({"background-color":"transparent","box-shadow":"none"}).addClass("pp-messenger-panel-quick-message-mode"),$(".pp-conversation-content").css({top:"initial",width:"330px","background-color":"transparent","margin-bottom":"0px",padding:"0px 20px 0px 0px","-webkit-mask-image":"linear-gradient(0deg,#000,#000,transparent)","mask-image":"linear-gradient(0deg,#000,#000,transparent)","overflow-y":"hidden","margin-right":"-16px"}),$(".pp-sheet-header").hide(),$("#pp-composer-container").css({"border-radius":"5px",width:"270px"}),$(".pp-composer-container-textarea").css({"border-radius":"5px","padding-top":"16px","padding-bottom":"16px"}).attr("placeholder",Service.Constants.i18n("WRITE_TO_REPLY")),$(".pp-conversation-container").css({height:"100%",overflow:"hidden",position:"relative"}),View.$conversationContentContainer.bindEvent()}}function i(){u&&(u=!1,c=void 0,l=void 0,$("#pp-composer").show(),$("#pp-conversation").show(),$(".pp-conversation-part-pulltorefreshbutton").show(),$(".pp-messenger-panel").css({"background-color":View.Style.Color.base,"box-shadow":""}).removeClass("pp-messenger-panel-quick-message-mode"),$(".pp-conversation-content").css({top:"",width:"","background-color":"","margin-bottom":"",padding:"","-webkit-mask-image":"","mask-image":"","overflow-y":"","margin-right":""}),$(".pp-sheet-header").show(),$("#pp-composer-container").css({"border-radius":"",width:""}),$(".pp-composer-container-textarea").css({"border-radius":"","padding-top":"18px","padding-bottom":"18px"}).attr("placeholder",Service.Constants.i18n(Service.$device.inMobile()?"START_CONVERSATION_MOBILE_HINT":"START_CONVERSATION_HINT")),$(".pp-conversation-container").css({height:"",overflow:"",position:""}),View.$conversationContentContainer.unbindEvent(),View.$conversationContentContainer.hideDismissBarDirect())}function o(e){var t=e.getBody(),n=function(){Ctrl.$conversationContent.clear(),$("#pp-composer").show(),$("#pp-conversation").show()},i=function(){return Service.$debug.d("[Quick-Message] activeId: ",c,t),c===t.messageConversationId&&(Ctrl.$conversationContent.appendMessage(t,!0),View.$conversationContentContainer.adjustDismissBarPosition(),View.$conversationContent.scrollToBottom(),!0)};return void 0===c?(c=t.messageConversationId,l===Ctrl.$conversationPanel.MODE.LIST?(Ctrl.$conversationList.showItem(c,function(e){Ctrl.$conversationPanel.setMode(Ctrl.$conversationPanel.MODE.QUICK_MESSAGE),n(),i()}),!0):(n(),i())):i()}function r(){return c}function a(e){l=e}function s(){return l}var p=!0,u=!1,c=void 0,l=void 0;return{isSupportQuickMessageMode:e,isEnabled:t,enable:n,disable:i,handleMessage:o,getActiveConversationId:r,setLastMode:a,getLastMode:s}}(),Ctrl.$launcher=function(){function e(){var e=this;this.onClickEvent=function(){Service.$publicApi.isOpen()?Service.$publicApi.hide():(this.setUnreadBadgeNum(0),this.setLauncherIcon(""),t=void 0,Service.$publicApi.show())},this.shouldShowLauncherWhenInit=function(){return!View.$launcher.shouldHideLauncher()},this.showMessageBox=function(){var e=Ctrl.$conversationPanel.mode(),t=Ctrl.$conversationQuickMessage.getLastMode();e===Ctrl.$conversationPanel.MODE.QUICK_MESSAGE&&Ctrl.$conversationQuickMessage.disable();if(View.$launcher.showMessageBox(),e===Ctrl.$conversationPanel.MODE.QUICK_MESSAGE){if(void 0!==Ctrl.$conversationQuickMessage.getActiveConversationId()){var n=Service.$conversationManager.activeConversation,i=n?n.token:void 0;return void(i&&Ctrl.$conversationList.showItem(i))}e=t,Ctrl.$conversationPanel.mode(e)}e===Ctrl.$conversationPanel.MODE.CONTENT&&Ctrl.$conversationContent.show(Service.$conversationManager.activeConversation(),{fadeIn:!1,delay:0},function(){View.$composerContainer.focus()}),e===Ctrl.$conversationPanel.MODE.LIST&&Ctrl.$conversationList.show()},this.onMouseOverEvent=function(){r=!0},this.onMouseLeaveEvent=function(){r=!1},this.isMouseOver=function(){return r},this.recordOpenConversationItem=function(e){i=e},this.getLauncherIcon=function(){return n||Service.Constants.ICON_DEFAULT_LAUNCHER},this.getLauncherBottomMargin=function(){return View.$settings.getLauncherBottomMargin()},this.getLauncherRightMargin=function(){return View.$settings.getLauncherRightMargin()},this.launcherInit=function(){},this.setLauncherIcon=function(e){n=e,$("#pp-launcher-icon").attr("src",this.getLauncherIcon())},this.isLauncherShow=function(){return this.shouldShowLauncherWhenInit()&&!$("#pp-launcher-button").hasClass("pp-launcher-button-minimized")},this.onLauncherInit=function(){},this.setUnreadBadgeNum=function(e){var t=e>0;o=t?e>99?99:e:0,t?$("#pp-launcher-badge").show():$("#pp-launcher-badge").hide(),$("#pp-launcher-badge").text(o)},this.getUnreadBadgeNum=function(){return o},this.clear=function(){o=0,n="",i=""},this.hideLauncher=function(){View.$launcher.hideLauncher(),this.setUnreadBadgeNum(0),this.setLauncherIcon(""),t=void 0},Service.$pubsub.subscribe("msgArrived/launcher",function(n,i){e.setUnreadBadgeNum(e.getUnreadBadgeNum()+1),e.setLauncherIcon(i.getBody().user.avatar),e.recordOpenConversationItem(i.getBody()),t=i.getBody()})}var t,n="",i="",o=0,r=!1,a=null;return{get:function(){return a||(a=new e),a}}}(),Ctrl.$pulltoRefreshController=function(){function e(){Ctrl.PPBaseCtrl.call(this);var e,t=Service.Constants,n=Service.$device,i=n.isMobileBrowser(),o=i?t.i18n("LOAD_HISTORY_MOBILE_HINT"):t.i18n("LOAD_HISTORY_HINT"),r=t.i18n("LOADING_HISTORY"),a=t.i18n("NO_MORE_HISTORY"),s=!0,p=this,u="#pp-conversation-part-pulltorefreshbutton",c="#pp-conversation-content",l=null,d=function(){$(c).pullToRefresh().on("start.pulltorefresh",function(e,t){Service.$debug.d("Start!! "+e+", "+t)}).on("move.pulltorefresh",function(e,t){Service.$debug.d("Move.. "+e+", "+t)}).on("end.pulltorefresh",function(e){Service.$debug.d("End.. "+e),l&&l(e)}).on("refresh.pulltorefresh",function(e,t){Service.$debug.d("Refresh.. "+e+", "+t),h()})},f=function(){$(u).remove()},g=function(t){var n=e.isLoadable(),i=n?o:a;$(c).prepend(View.$pulltoRefresh.build(i).getHTML()),m(n),p.bindEvent()},h=function(){s&&($(u).text(r),m(!1),e.loadHistorys(function(){f()},function(e){g(e)}))},m=function(e){s=e,$(u).css("cursor",s?"pointer":"default")};this.getLoadHistortyHintText=function(){return o},this.onLoadHistoryButtonClick=function(){i||h()},this.loadable=function(e){return m(e),$(u).text(e?o:a),this},this.bindEvent=function(){return i?d():View.$pulltoRefresh.el().bind("click",p.onLoadHistoryButtonClick),this},this.onend=function(e){return l=e,this},this.init=function(t){return t&&(e=t),this}}extend(e,Ctrl.PPBaseCtrl);var t=null;return{get:function(n){return null==t&&(t=new e),t.init(n)}}}(),Ctrl.$sheetheader=function(){function e(){u.isIOS()&&u.enableScroll(),View.$launcher.showLauncher(View.$launcher.STATE.NORMAL),View.$conversation.hide(),Service.$schedule.cancelAll(),Service.$sheetHeader.close(!1),p(),View.$settings.getLaunchStyle().mode.toLowerCase()===View.Settings.LAUNCH_MODE.NORMAL&&Ctrl.$conversationPanel.mode(Ctrl.$conversationPanel.MODE.QUICK_MESSAGE)}function t(){return Service.$sheetHeader.getHeaderTitle()}function n(){}function i(e){e=e||t(),Service.$sheetHeader.setHeaderTitle(e),View.$sheetHeader.setTitle(e)}function o(){return Service.$sheetHeader.closed()}function r(){Service.$sheetHeader.asyncGetHeaderTitle(function(e){i(e)})}function a(){Service.$sheetHeader.incrUnreadCount(),View.$sheetHeader.setUnreadCount(Service.$sheetHeader.unreadCount())}function s(e){Service.$sheetHeader.decrUnreadCount(e),View.$sheetHeader.setUnreadCount(Service.$sheetHeader.unreadCount())}function p(){Ctrl.$conversationPanel.stopPolling()}var u=Service.$device;return{onSheetHeaderInit:r,getHeaderTitle:t,onSheetHeaderClicked:n,setHeaderTitle:i,minimize:e,closed:o,incrUnread:a,decrUnread:s}}(),function(e){function t(){e.PPBaseCtrl.call(this);this.init=function(e,t){},this.onUploadingBarRemoveBtnClicked=function(e,t){Service.$uploader.cancel(e)}}extend(t,e.PPBaseCtrl),e.PPUploadingBarCtrl=t}(Ctrl),function(e){function t(e){var t=Service.$api,n=Service.$json,i=Service.$tools,o=Service.$notification,r=Service.$notifyMsg,a=e,s=this,p=Service.$device.isMobileBrowser(),u=!1,c=!1,l=!0,d=0,f=function(e){if(e){var t=Service.PPMessage.Builder,n={appTeamName:e.appTeamName,appWelcomeText:e.appWelcomeText,activeAdmins:e.activeAdmins},i=new t("WELCOME").messageState(Service.PPMessage.STATE.FINISH).conversationId(Service.$tools.getUUID()).welcomeBody(n).build().getBody();return i}},g=function(e){if(p);else if(e)return f(e)},h=function(e,t){return t&&(u=!0,e.push(t)),e},m=function(){return h([],g())},v=m(),b=[],x=function(e){return $.inArray(e,b)!=-1},y=function(e){return!!e.messageId&&x(e.messageId)},w=null,C=function(e,i){return e?void t.pageMessageHistory({conversation_uuid:e,max_uuid:w},function(e){w=e.list&&e.list.length>0?e.list[e.list.length-1].uuid:null;var t=[];!function o(e,i,r,a){e<i?new Service.ApiMessageAdapter(n.parse(r[e].message_body)).asyncGetPPMessage(function(n,s){s&&!y(n.getBody())&&t.push(n.getBody()),o(e+1,i,r,a)}):a&&a()}(0,e.list&&e.list.length||0,e.list||[],function(){var e=P(t);if(I(e),i){var n=e.length>0;1===e.length&&e[0].messageType===Service.PPMessage.TYPE.TIMESTAMP&&(n=!1),i(e,n)}})},function(e){i&&i([],!1)}):void(i&&i([],!1))},S=300,_=S,E=null,k=null,T=function(e){var t=E,n=e.messageTimestamp,i=Service.$messageToolsModule.isMessage(e);return E=i&&n?n:E,!(!i||!n)&&(!t||!(n-t<=_))},P=function(e){if(!e)return e;if(0===e.length)return null!=k&&(e.push(A(k)),k=null),e;var t=[],n=k||e[0].messageTimestamp;return $.each(e,function(e,i){var o=n-i.messageTimestamp>_;o&&t.unshift(A(n)),t.unshift(i),n=i.messageTimestamp}),k=e[e.length-1].messageTimestamp,t},I=function(e){if(e&&0!=e.length){var t=e.slice().reverse();$.each(t,function(e,t){v.unshift(t)})}},A=function(e){var t=1e3*e,n=Service.Constants.I18N[Service.$language.getLanguage()].timeFormat(t);return new Service.PPMessage.Builder("TIMESTAMP").id(i.getUUID()).timestampBody({time:t,timeStr:n}).messageState(Service.PPMessage.STATE.FINISH).build().getBody()},N=function(e){0!=v.length&&(e=e?e:function(){for(var e=v.length;e--;){var t=v[e];if(Service.$messageToolsModule.isMessage(t))return t.messageId}}(),void 0!==e&&null!==e&&t.pageMessageHistory({conversation_uuid:a,min_uuid:e},function(e){0==e.error_code&&e.list.length>0&&($.each(e.list,function(e,t){var n=t.message_body&&Service.$json.parse(t.message_body);r.get(o,n).dispatch()}),N(e.list[e.list.length-1].uuid))}))};this.updateMessageIdsArray=function(e){x(e)||b.push(e)},this.clear=function(){v=[],b=[],w=null,E=null},this.getConversationHistory=function(e,t){C(e,t)},this.addMessage=function(e){if(e.messageId&&y(e))return null;var t=T(e),n=null;return t&&(n=A(e.messageTimestamp),v.push(n)),v.push(e),Service.$messageStore.map(e.messageId,a),e.messageId&&s.updateMessageIdsArray(e.messageId),n},this.find=function(e){if(x(e)){for(var t=v.length;t--;)if(v[t].messageId===e)return v[t];return e}},this.isEmpty=function(){return 0==v.length},this.getMessages=function(){return v},this.setLoadable=function(e){l=e},this.isLoadable=function(){return l},this.canAddWelcomeInfo=function(){return this.isEmpty()&&!u},this.addWelcomeInfo=function(e){var t=g(e);return h(this.getMessages(),t),t},this.unreadCount=function(){return d},this.incrUnreadCount=function(){d++},this.clearUnread=function(){d=0},this.token=function(){return a},this.isAppendedSmsEmail=function(){return c},this.notifyAppendSmsEmail=function(e){c=e},this.tryLoadLostMessages=function(){N()}}e.ConversationContentModal=t}(Modal),Modal.$conversationContentGroup=function(){function e(e){return new Modal.ConversationContentModal(e)}function t(e){return void 0!==n[e]}var n={};return{get:function(i){var o;return o=t(i)?n[i]:n[i]=e(i)},set:function(e,i){if(!i)throw new Error("Modal == null");if(t(e))throw new Error("Modal "+e+" exist!");n[e]=i},exist:function(e){t(e)},tryLoadLostMessages:function(){$.each(n,function(e,t){t.tryLoadLostMessages()})}}}(),Service.PPStartUp.bootServices(),fn}function PPModule(e){var t=null,n=function(e){return null==t&&(t=PPMessage(e),window.PP&&(window.PP.fn=t)),t},i={version:"1.0.0.2",boot:function(t,i){t=t||window.ppSettings,t&&n(e).Service.$publicApi.boot(t,i)},show:function(){n(e).Service.$publicApi.show()},hide:function(){n(e).Service.$publicApi.hide()},open:function(){n(e).Service.$publicApi.show()},close:function(){n(e).Service.$publicApi.hide()},isOpen:function(){return n(e).Service.$publicApi.isOpen()},toggle:function(){n(e).Service.$publicApi.isOpen()?n(e).Service.$publicApi.show():n(e).Service.$publicApi.hide()},onShow:function(t){n(e).Service.$publicApi.onShow(t)},onHide:function(t){n(e).Service.$publicApi.onHide(t)},shutdown:function(){n(e).Service.$publicApi.shutdown(),t=null},update:function(t){t=t||window.ppSettings,n(e).Service.$publicApi.update(t)&&(i.shutdown(),i.boot(t))}};return i}function JQueryModule(){return function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=re.type(e);return"function"!==n&&!re.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e,t,n){if(re.isFunction(t))return re.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return re.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(he.test(t))return re.filter(t,e,n);t=re.filter(t,e)}return re.grep(e,function(e){return J.call(t,e)>-1!==n})}function o(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function r(e){var t={};return re.each(e.match(we)||[],function(e,n){t[n]=!0}),t}function a(){X.removeEventListener("DOMContentLoaded",a),e.removeEventListener("load",a),re.ready()}function s(){this.expando=re.expando+s.uid++}function p(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(Te,"-$&").toLowerCase(),
n=e.getAttribute(i),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:ke.test(n)?re.parseJSON(n):n)}catch(o){}$e.set(e,t,n)}else n=void 0;return n}function u(e,t,n,i){var o,r=1,a=20,s=i?function(){return i.cur()}:function(){return re.css(e,t,"")},p=s(),u=n&&n[3]||(re.cssNumber[t]?"":"px"),c=(re.cssNumber[t]||"px"!==u&&+p)&&Ie.exec(re.css(e,t));if(c&&c[3]!==u){u=u||c[3],n=n||[],c=+p||1;do r=r||".5",c/=r,re.style(e,t,c+u);while(r!==(r=s()/p)&&1!==r&&--a)}return n&&(c=+c||+p||0,o=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=o)),o}function c(e,t){var n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&re.nodeName(e,t)?re.merge([e],n):n}function l(e,t){for(var n=0,i=e.length;n<i;n++)Ee.set(e[n],"globalEval",!t||Ee.get(t[n],"globalEval"))}function d(e,t,n,i,o){for(var r,a,s,p,u,d,f=t.createDocumentFragment(),g=[],h=0,m=e.length;h<m;h++)if(r=e[h],r||0===r)if("object"===re.type(r))re.merge(g,r.nodeType?[r]:r);else if(Ue.test(r)){for(a=a||f.appendChild(t.createElement("div")),s=(De.exec(r)||["",""])[1].toLowerCase(),p=Oe[s]||Oe._default,a.innerHTML=p[1]+re.htmlPrefilter(r)+p[2],d=p[0];d--;)a=a.lastChild;re.merge(g,a.childNodes),a=f.firstChild,a.textContent=""}else g.push(t.createTextNode(r));for(f.textContent="",h=0;r=g[h++];)if(i&&re.inArray(r,i)>-1)o&&o.push(r);else if(u=re.contains(r.ownerDocument,r),a=c(f.appendChild(r),"script"),u&&l(a),n)for(d=0;r=a[d++];)Le.test(r.type||"")&&n.push(r);return f}function f(){return!0}function g(){return!1}function h(){try{return X.activeElement}catch(e){}}function m(e,t,n,i,o,r){var a,s;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(s in t)m(e,s,n,i,t[s],r);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),o===!1)o=g;else if(!o)return e;return 1===r&&(a=o,o=function(e){return re().off(e),a.apply(this,arguments)},o.guid=a.guid||(a.guid=re.guid++)),e.each(function(){re.event.add(this,t,o,i,n)})}function v(e,t){return re.nodeName(e,"table")&&re.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function x(e){var t=Ge.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function y(e,t){var n,i,o,r,a,s,p,u;if(1===t.nodeType){if(Ee.hasData(e)&&(r=Ee.access(e),a=Ee.set(t,r),u=r.events)){delete a.handle,a.events={};for(o in u)for(n=0,i=u[o].length;n<i;n++)re.event.add(t,o,u[o][n])}$e.hasData(e)&&(s=$e.access(e),p=re.extend({},s),$e.set(t,p))}}function w(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Me.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function C(e,t,n,i){t=K.apply([],t);var o,r,a,s,p,u,l=0,f=e.length,g=f-1,h=t[0],m=re.isFunction(h);if(m||f>1&&"string"==typeof h&&!ie.checkClone&&ze.test(h))return e.each(function(o){var r=e.eq(o);m&&(t[0]=h.call(this,o,r.html())),C(r,t,n,i)});if(f&&(o=d(t,e[0].ownerDocument,!1,e,i),r=o.firstChild,1===o.childNodes.length&&(o=r),r||i)){for(a=re.map(c(o,"script"),b),s=a.length;l<f;l++)p=o,l!==g&&(p=re.clone(p,!0,!0),s&&re.merge(a,c(p,"script"))),n.call(e[l],p,l);if(s)for(u=a[a.length-1].ownerDocument,re.map(a,x),l=0;l<s;l++)p=a[l],Le.test(p.type||"")&&!Ee.access(p,"globalEval")&&re.contains(u,p)&&(p.src?re._evalUrl&&re._evalUrl(p.src):re.globalEval(p.textContent.replace(We,"")))}return e}function S(e,t,n){for(var i,o=t?re.filter(t,e):e,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||re.cleanData(c(i)),i.parentNode&&(n&&re.contains(i.ownerDocument,i)&&l(c(i,"script")),i.parentNode.removeChild(i));return e}function _(e,t){var n=re(t.createElement(e)).appendTo(t.body),i=re.css(n[0],"display");return n.detach(),i}function E(e){var t=X,n=qe[e];return n||(n=_(e,t),"none"!==n&&n||(je=(je||re("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=je[0].contentDocument,t.write(),t.close(),n=_(e,t),je.detach()),qe[e]=n),n}function $(e,t,n){var i,o,r,a,s=e.style;return n=n||Qe(e),a=n?n.getPropertyValue(t)||n[t]:void 0,""!==a&&void 0!==a||re.contains(e.ownerDocument,e)||(a=re.style(e,t)),n&&!ie.pixelMarginRight()&&Xe.test(a)&&Ye.test(t)&&(i=s.width,o=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=o,s.maxWidth=r),void 0!==a?a+"":a}function k(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function T(e){if(e in it)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=nt.length;n--;)if(e=nt[n]+t,e in it)return e}function P(e,t,n){var i=Ie.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function I(e,t,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,a=0;r<4;r+=2)"margin"===n&&(a+=re.css(e,n+Ae[r],!0,o)),i?("content"===n&&(a-=re.css(e,"padding"+Ae[r],!0,o)),"margin"!==n&&(a-=re.css(e,"border"+Ae[r]+"Width",!0,o))):(a+=re.css(e,"padding"+Ae[r],!0,o),"padding"!==n&&(a+=re.css(e,"border"+Ae[r]+"Width",!0,o)));return a}function A(e,t,n){var i=!0,o="width"===t?e.offsetWidth:e.offsetHeight,r=Qe(e),a="border-box"===re.css(e,"boxSizing",!1,r);if(o<=0||null==o){if(o=$(e,t,r),(o<0||null==o)&&(o=e.style[t]),Xe.test(o))return o;i=a&&(ie.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+I(e,t,n||(a?"border":"content"),i,r)+"px"}function N(e,t){for(var n,i,o,r=[],a=0,s=e.length;a<s;a++)i=e[a],i.style&&(r[a]=Ee.get(i,"olddisplay"),n=i.style.display,t?(r[a]||"none"!==n||(i.style.display=""),""===i.style.display&&Ne(i)&&(r[a]=Ee.access(i,"olddisplay",E(i.nodeName)))):(o=Ne(i),"none"===n&&o||Ee.set(i,"olddisplay",o?n:re.css(i,"display"))));for(a=0;a<s;a++)i=e[a],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?r[a]||"":"none"));return e}function M(e,t,n,i,o){return new M.prototype.init(e,t,n,i,o)}function D(){return e.setTimeout(function(){ot=void 0}),ot=re.now()}function L(e,t){var n,i=0,o={height:e};for(t=t?1:0;i<4;i+=2-t)n=Ae[i],o["margin"+n]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function O(e,t,n){for(var i,o=(R.tweeners[t]||[]).concat(R.tweeners["*"]),r=0,a=o.length;r<a;r++)if(i=o[r].call(n,t,e))return i}function U(e,t,n){var i,o,r,a,s,p,u,c,l=this,d={},f=e.style,g=e.nodeType&&Ne(e),h=Ee.get(e,"fxshow");n.queue||(s=re._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,p=s.empty.fire,s.empty.fire=function(){s.unqueued||p()}),s.unqueued++,l.always(function(){l.always(function(){s.unqueued--,re.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],u=re.css(e,"display"),c="none"===u?Ee.get(e,"olddisplay")||E(e.nodeName):u,"inline"===c&&"none"===re.css(e,"float")&&(f.display="inline-block")),n.overflow&&(f.overflow="hidden",l.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(i in t)if(o=t[i],at.exec(o)){if(delete t[i],r=r||"toggle"===o,o===(g?"hide":"show")){if("show"!==o||!h||void 0===h[i])continue;g=!0}d[i]=h&&h[i]||re.style(e,i)}else u=void 0;if(re.isEmptyObject(d))"inline"===("none"===u?E(e.nodeName):u)&&(f.display=u);else{h?"hidden"in h&&(g=h.hidden):h=Ee.access(e,"fxshow",{}),r&&(h.hidden=!g),g?re(e).show():l.done(function(){re(e).hide()}),l.done(function(){var t;Ee.remove(e,"fxshow");for(t in d)re.style(e,t,d[t])});for(i in d)a=O(g?h[i]:0,i,l),i in h||(h[i]=a.start,g&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function V(e,t){var n,i,o,r,a;for(n in e)if(i=re.camelCase(n),o=t[i],r=e[n],re.isArray(r)&&(o=r[1],r=e[n]=r[0]),n!==i&&(e[i]=r,delete e[n]),a=re.cssHooks[i],a&&"expand"in a){r=a.expand(r),delete e[i];for(n in r)n in e||(e[n]=r[n],t[n]=o)}else t[i]=o}function R(e,t,n){var i,o,r=0,a=R.prefilters.length,s=re.Deferred().always(function(){delete p.elem}),p=function(){if(o)return!1;for(var t=ot||D(),n=Math.max(0,u.startTime+u.duration-t),i=n/u.duration||0,r=1-i,a=0,p=u.tweens.length;a<p;a++)u.tweens[a].run(r);return s.notifyWith(e,[u,r,n]),r<1&&p?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:re.extend({},t),opts:re.extend(!0,{specialEasing:{},easing:re.easing._default},n),originalProperties:t,originalOptions:n,startTime:ot||D(),duration:n.duration,tweens:[],createTween:function(t,n){var i=re.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),c=u.props;for(V(c,u.opts.specialEasing);r<a;r++)if(i=R.prefilters[r].call(u,e,c,u.opts))return re.isFunction(i.stop)&&(re._queueHooks(u.elem,u.opts.queue).stop=re.proxy(i.stop,i)),i;return re.map(c,O,u),re.isFunction(u.opts.start)&&u.opts.start.call(e,u),re.fx.timer(re.extend(p,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function H(e){return e.getAttribute&&e.getAttribute("class")||""}function B(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,r=t.toLowerCase().match(we)||[];if(re.isFunction(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function F(e,t,n,i){function o(s){var p;return r[s]=!0,re.each(e[s]||[],function(e,s){var u=s(t,n,i);return"string"!=typeof u||a||r[u]?a?!(p=u):void 0:(t.dataTypes.unshift(u),o(u),!1)}),p}var r={},a=e===$t;return o(t.dataTypes[0])||!r["*"]&&o("*")}function z(e,t){var n,i,o=re.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:i||(i={}))[n]=t[n]);return i&&re.extend(!0,e,i),e}function G(e,t,n){for(var i,o,r,a,s=e.contents,p=e.dataTypes;"*"===p[0];)p.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in s)if(s[o]&&s[o].test(i)){p.unshift(o);break}if(p[0]in n)r=p[0];else{for(o in n){if(!p[0]||e.converters[o+" "+p[0]]){r=o;break}a||(a=o)}r=r||a}if(r)return r!==p[0]&&p.unshift(r),n[r]}function W(e,t,n,i){var o,r,a,s,p,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(r=c.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!p&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),p=r,r=c.shift())if("*"===r)r=p;else if("*"!==p&&p!==r){if(a=u[p+" "+r]||u["* "+r],!a)for(o in u)if(s=o.split(" "),s[1]===r&&(a=u[p+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[o]:u[o]!==!0&&(r=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(l){return{state:"parsererror",error:a?l:"No conversion from "+p+" to "+r}}}return{state:"success",data:t}}function j(e,t,n,i){var o;if(re.isArray(t))re.each(t,function(t,o){n||It.test(e)?i(e,o):j(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,i)});else if(n||"object"!==re.type(t))i(e,t);else for(o in t)j(e+"["+o+"]",t[o],n,i)}function q(e){return re.isWindow(e)?e:9===e.nodeType&&e.defaultView}var Y=[],X=e.document,Q=Y.slice,K=Y.concat,Z=Y.push,J=Y.indexOf,ee={},te=ee.toString,ne=ee.hasOwnProperty,ie={},oe="2.2.4",re=function(e,t){return new re.fn.init(e,t)},ae=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/^-ms-/,pe=/-([\da-z])/gi,ue=function(e,t){return t.toUpperCase()};re.fn=re.prototype={jquery:oe,constructor:re,selector:"",length:0,toArray:function(){return Q.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:Q.call(this)},pushStack:function(e){var t=re.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return re.each(this,e)},map:function(e){return this.pushStack(re.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(Q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:Z,sort:Y.sort,splice:Y.splice},re.extend=re.fn.extend=function(){var e,t,n,i,o,r,a=arguments[0]||{},s=1,p=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||re.isFunction(a)||(a={}),s===p&&(a=this,s--);s<p;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],i=e[t],a!==i&&(u&&i&&(re.isPlainObject(i)||(o=re.isArray(i)))?(o?(o=!1,r=n&&re.isArray(n)?n:[]):r=n&&re.isPlainObject(n)?n:{},a[t]=re.extend(u,r,i)):void 0!==i&&(a[t]=i));return a},re.extend({expando:"jQuery"+(oe+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===re.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!re.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==re.type(e)||e.nodeType||re.isWindow(e))return!1;if(e.constructor&&!ne.call(e,"constructor")&&!ne.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||ne.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ee[te.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=re.trim(e),e&&(1===e.indexOf("use strict")?(t=X.createElement("script"),t.text=e,X.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(se,"ms-").replace(pe,ue)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,o=0;if(n(e))for(i=e.length;o<i&&t.call(e[o],o,e[o])!==!1;o++);else for(o in e)if(t.call(e[o],o,e[o])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ae,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?re.merge(i,"string"==typeof e?[e]:e):Z.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:J.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;i<n;i++)e[o++]=t[i];return e.length=o,e},grep:function(e,t,n){for(var i,o=[],r=0,a=e.length,s=!n;r<a;r++)i=!t(e[r],r),i!==s&&o.push(e[r]);return o},map:function(e,t,i){var o,r,a=0,s=[];if(n(e))for(o=e.length;a<o;a++)r=t(e[a],a,i),null!=r&&s.push(r);else for(a in e)r=t(e[a],a,i),null!=r&&s.push(r);return K.apply([],s)},guid:1,proxy:function(e,t){var n,i,o;if("string"==typeof t&&(n=e[t],t=e,e=n),re.isFunction(e))return i=Q.call(arguments,2),o=function(){return e.apply(t||this,i.concat(Q.call(arguments)))},o.guid=e.guid=e.guid||re.guid++,o},now:Date.now,support:ie}),"function"==typeof Symbol&&(re.fn[Symbol.iterator]=Y[Symbol.iterator]),re.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()});var ce=function(e){function t(e,t,n,i){var o,r,a,s,p,u,l,f,g=t&&t.ownerDocument,h=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==h&&9!==h&&11!==h)return n;if(!i&&((t?t.ownerDocument||t:H)!==N&&A(t),t=t||N,D)){if(11!==h&&(u=ve.exec(e)))if(o=u[1]){if(9===h){if(!(a=t.getElementById(o)))return n;if(a.id===o)return n.push(a),n}else if(g&&(a=g.getElementById(o))&&V(t,a)&&a.id===o)return n.push(a),n}else{if(u[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((o=u[3])&&w.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(o)),n}if(w.qsa&&!W[e+" "]&&(!L||!L.test(e))){if(1!==h)g=t,f=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(xe,"\\$&"):t.setAttribute("id",s=R),l=E(e),r=l.length,p=de.test(s)?"#"+s:"[id='"+s+"']";r--;)l[r]=p+" "+d(l[r]);f=l.join(","),g=be.test(e)&&c(t.parentNode)||t}if(f)try{return Z.apply(n,g.querySelectorAll(f)),n}catch(m){}finally{s===R&&t.removeAttribute("id")}}}return k(e.replace(se,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>C.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[R]=!0,e}function o(e){var t=N.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var n=e.split("|"),i=n.length;i--;)C.attrHandle[n[i]]=t}function a(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||q)-(~e.sourceIndex||q);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function p(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return i(function(t){return t=+t,i(function(n,i){for(var o,r=e([],n.length,t),a=r.length;a--;)n[o=r[a]]&&(n[o]=!(i[o]=n[o]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function l(){}function d(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,o=n&&"parentNode"===i,r=F++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,a){var s,p,u,c=[B,r];if(a){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||o){if(u=t[R]||(t[R]={}),p=u[t.uniqueID]||(u[t.uniqueID]={}),(s=p[i])&&s[0]===B&&s[1]===r)return c[2]=s[2];if(p[i]=c,c[2]=e(t,n,a))return!0}}}function g(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function h(e,n,i){for(var o=0,r=n.length;o<r;o++)t(e,n[o],i);return i}function m(e,t,n,i,o){for(var r,a=[],s=0,p=e.length,u=null!=t;s<p;s++)(r=e[s])&&(n&&!n(r,i,o)||(a.push(r),u&&t.push(s)));return a}function v(e,t,n,o,r,a){return o&&!o[R]&&(o=v(o)),r&&!r[R]&&(r=v(r,a)),i(function(i,a,s,p){var u,c,l,d=[],f=[],g=a.length,v=i||h(t||"*",s.nodeType?[s]:s,[]),b=!e||!i&&t?v:m(v,d,e,s,p),x=n?r||(i?e:g||o)?[]:a:b;if(n&&n(b,x,s,p),o)for(u=m(x,f),o(u,[],s,p),c=u.length;c--;)(l=u[c])&&(x[f[c]]=!(b[f[c]]=l));if(i){if(r||e){if(r){for(u=[],c=x.length;c--;)(l=x[c])&&u.push(b[c]=l);r(null,x=[],u,p)}for(c=x.length;c--;)(l=x[c])&&(u=r?ee(i,l):d[c])>-1&&(i[u]=!(a[u]=l))}}else x=m(x===a?x.splice(g,x.length):x),r?r(null,a,x,p):Z.apply(a,x)})}function b(e){for(var t,n,i,o=e.length,r=C.relative[e[0].type],a=r||C.relative[" "],s=r?1:0,p=f(function(e){return e===t},a,!0),u=f(function(e){return ee(t,e)>-1},a,!0),c=[function(e,n,i){var o=!r&&(i||n!==T)||((t=n).nodeType?p(e,n,i):u(e,n,i));return t=null,o}];s<o;s++)if(n=C.relative[e[s].type])c=[f(g(c),n)];else{if(n=C.filter[e[s].type].apply(null,e[s].matches),n[R]){for(i=++s;i<o&&!C.relative[e[i].type];i++);return v(s>1&&g(c),s>1&&d(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),n,s<i&&b(e.slice(s,i)),i<o&&b(e=e.slice(i)),i<o&&d(e))}c.push(n)}return g(c)}function x(e,n){var o=n.length>0,r=e.length>0,a=function(i,a,s,p,u){var c,l,d,f=0,g="0",h=i&&[],v=[],b=T,x=i||r&&C.find.TAG("*",u),y=B+=null==b?1:Math.random()||.1,w=x.length;for(u&&(T=a===N||a||u);g!==w&&null!=(c=x[g]);g++){if(r&&c){for(l=0,a||c.ownerDocument===N||(A(c),s=!D);d=e[l++];)if(d(c,a||N,s)){p.push(c);break}u&&(B=y)}o&&((c=!d&&c)&&f--,i&&h.push(c))}if(f+=g,o&&g!==f){for(l=0;d=n[l++];)d(h,v,a,s);if(i){if(f>0)for(;g--;)h[g]||v[g]||(v[g]=Q.call(p));v=m(v)}Z.apply(p,v),u&&!i&&v.length>0&&f+n.length>1&&t.uniqueSort(p)}return u&&(B=y,T=b),h};return o?i(a):a}var y,w,C,S,_,E,$,k,T,P,I,A,N,M,D,L,O,U,V,R="sizzle"+1*new Date,H=e.document,B=0,F=0,z=n(),G=n(),W=n(),j=function(e,t){return e===t&&(I=!0),0},q=1<<31,Y={}.hasOwnProperty,X=[],Q=X.pop,K=X.push,Z=X.push,J=X.slice,ee=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",re=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),se=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),pe=new RegExp("^"+ne+"*,"+ne+"*"),ue=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),le=new RegExp(re),de=new RegExp("^"+ie+"$"),fe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,he=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,xe=/'|\\/g,ye=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),we=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},Ce=function(){A()};try{Z.apply(X=J.call(H.childNodes),H.childNodes),X[H.childNodes.length].nodeType}catch(Se){Z={apply:X.length?function(e,t){K.apply(e,J.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}w=t.support={},_=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},A=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:H;return i!==N&&9===i.nodeType&&i.documentElement?(N=i,M=N.documentElement,D=!_(N),(n=N.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Ce,!1):n.attachEvent&&n.attachEvent("onunload",Ce)),w.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=o(function(e){return e.appendChild(N.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=me.test(N.getElementsByClassName),w.getById=o(function(e){return M.appendChild(e).id=R,!N.getElementsByName||!N.getElementsByName(R).length}),w.getById?(C.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&D){var n=t.getElementById(e);return n?[n]:[]}},C.filter.ID=function(e){var t=e.replace(ye,we);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(ye,we);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),C.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},C.find.CLASS=w.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&D)return t.getElementsByClassName(e)},O=[],L=[],(w.qsa=me.test(N.querySelectorAll))&&(o(function(e){M.appendChild(e).innerHTML="<a id='"+R+"'></a><select id='"+R+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&L.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||L.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+R+"-]").length||L.push("~="),e.querySelectorAll(":checked").length||L.push(":checked"),e.querySelectorAll("a#"+R+"+*").length||L.push(".#.+[+~]")}),o(function(e){var t=N.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&L.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||L.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),L.push(",.*:")})),(w.matchesSelector=me.test(U=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&o(function(e){w.disconnectedMatch=U.call(e,"div"),U.call(e,"[s!='']:x"),O.push("!=",re)}),L=L.length&&new RegExp(L.join("|")),O=O.length&&new RegExp(O.join("|")),t=me.test(M.compareDocumentPosition),V=t||me.test(M.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},j=t?function(e,t){if(e===t)return I=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===N||e.ownerDocument===H&&V(H,e)?-1:t===N||t.ownerDocument===H&&V(H,t)?1:P?ee(P,e)-ee(P,t):0:4&n?-1:1)}:function(e,t){if(e===t)return I=!0,0;var n,i=0,o=e.parentNode,r=t.parentNode,s=[e],p=[t];if(!o||!r)return e===N?-1:t===N?1:o?-1:r?1:P?ee(P,e)-ee(P,t):0;if(o===r)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)p.unshift(n);for(;s[i]===p[i];)i++;return i?a(s[i],p[i]):s[i]===H?-1:p[i]===H?1:0},N):N},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==N&&A(e),n=n.replace(ce,"='$1']"),w.matchesSelector&&D&&!W[n+" "]&&(!O||!O.test(n))&&(!L||!L.test(n)))try{var i=U.call(e,n);if(i||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(o){}return t(n,N,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==N&&A(e),V(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==N&&A(e);var n=C.attrHandle[t.toLowerCase()],i=n&&Y.call(C.attrHandle,t.toLowerCase())?n(e,t,!D):void 0;return void 0!==i?i:w.attributes||!D?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,o=0;if(I=!w.detectDuplicates,P=!w.sortStable&&e.slice(0),e.sort(j),I){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return P=null,e},S=t.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=S(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=S(t);return n},C=t.selectors={cacheLength:50,createPseudo:i,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ye,we),e[3]=(e[3]||e[4]||e[5]||"").replace(ye,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&le.test(n)&&(t=E(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ye,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(o){var r=t.attr(o,e);return null==r?"!="===n:!n||(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r.replace(ae," ")+" ").indexOf(i)>-1:"|="===n&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,p){var u,c,l,d,f,g,h=r!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!p&&!s,x=!1;if(m){if(r){for(;h;){for(d=t;d=d[h];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;g=h="only"===e&&!g&&"nextSibling"}return!0}if(g=[a?m.firstChild:m.lastChild],a&&b){for(d=m,l=d[R]||(d[R]={}),c=l[d.uniqueID]||(l[d.uniqueID]={}),u=c[e]||[],f=u[0]===B&&u[1],x=f&&u[2],d=f&&m.childNodes[f];d=++f&&d&&d[h]||(x=f=0)||g.pop();)if(1===d.nodeType&&++x&&d===t){c[e]=[B,f,x];break}}else if(b&&(d=t,l=d[R]||(d[R]={}),c=l[d.uniqueID]||(l[d.uniqueID]={}),u=c[e]||[],f=u[0]===B&&u[1],x=f),x===!1)for(;(d=++f&&d&&d[h]||(x=f=0)||g.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++x||(b&&(l=d[R]||(d[R]={}),c=l[d.uniqueID]||(l[d.uniqueID]={}),c[e]=[B,x]),d!==t)););return x-=o,x===i||x%i===0&&x/i>=0}}},PSEUDO:function(e,n){var o,r=C.pseudos[e]||C.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return r[R]?r(n):r.length>1?(o=[e,e,"",n],C.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,o=r(e,n),a=o.length;a--;)i=ee(e,o[a]),e[i]=!(t[i]=o[a])}):function(e){return r(e,0,o)}):r}},pseudos:{not:i(function(e){var t=[],n=[],o=$(e.replace(se,"$1"));return o[R]?i(function(e,t,n,i){for(var r,a=o(e,null,i,[]),s=e.length;s--;)(r=a[s])&&(e[s]=!(t[s]=r))}):function(e,i,r){return t[0]=e,o(t,null,r,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(ye,we),function(t){return(t.textContent||t.innerText||S(t)).indexOf(e)>-1}}),lang:i(function(e){return de.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ye,we).toLowerCase(),function(t){var n;do if(n=D?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===M},focus:function(e){return e===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return he.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[n<0?n+t:n]}),even:u(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e}),gt:u(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}},C.pseudos.nth=C.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[y]=s(y);for(y in{submit:!0,reset:!0})C.pseudos[y]=p(y);return l.prototype=C.filters=C.pseudos,C.setFilters=new l,E=t.tokenize=function(e,n){var i,o,r,a,s,p,u,c=G[e+" "];if(c)return n?0:c.slice(0);for(s=e,p=[],u=C.preFilter;s;){i&&!(o=pe.exec(s))||(o&&(s=s.slice(o[0].length)||s),p.push(r=[])),i=!1,(o=ue.exec(s))&&(i=o.shift(),r.push({value:i,type:o[0].replace(se," ")}),s=s.slice(i.length));for(a in C.filter)!(o=fe[a].exec(s))||u[a]&&!(o=u[a](o))||(i=o.shift(),r.push({value:i,type:a,matches:o}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):G(e,p).slice(0)},$=t.compile=function(e,t){var n,i=[],o=[],r=W[e+" "];if(!r){for(t||(t=E(e)),n=t.length;n--;)r=b(t[n]),r[R]?i.push(r):o.push(r);r=W(e,x(o,i)),r.selector=e}return r},k=t.select=function(e,t,n,i){var o,r,a,s,p,u="function"==typeof e&&e,l=!i&&E(e=u.selector||e);
if(n=n||[],1===l.length){if(r=l[0]=l[0].slice(0),r.length>2&&"ID"===(a=r[0]).type&&w.getById&&9===t.nodeType&&D&&C.relative[r[1].type]){if(t=(C.find.ID(a.matches[0].replace(ye,we),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(o=fe.needsContext.test(e)?0:r.length;o--&&(a=r[o],!C.relative[s=a.type]);)if((p=C.find[s])&&(i=p(a.matches[0].replace(ye,we),be.test(r[0].type)&&c(t.parentNode)||t))){if(r.splice(o,1),e=i.length&&d(r),!e)return Z.apply(n,i),n;break}}return(u||$(e,l))(i,t,!D,n,!t||be.test(e)&&c(t.parentNode)||t),n},w.sortStable=R.split("").sort(j).join("")===R,w.detectDuplicates=!!I,A(),w.sortDetached=o(function(e){return 1&e.compareDocumentPosition(N.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||r(te,function(e,t,n){var i;if(!n)return e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);re.find=ce,re.expr=ce.selectors,re.expr[":"]=re.expr.pseudos,re.uniqueSort=re.unique=ce.uniqueSort,re.text=ce.getText,re.isXMLDoc=ce.isXML,re.contains=ce.contains;var le=function(e,t,n){for(var i=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&re(e).is(n))break;i.push(e)}return i},de=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},fe=re.expr.match.needsContext,ge=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,he=/^.[^:#\[\.,]*$/;re.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?re.find.matchesSelector(i,e)?[i]:[]:re.find.matches(e,re.grep(t,function(e){return 1===e.nodeType}))},re.fn.extend({find:function(e){var t,n=this.length,i=[],o=this;if("string"!=typeof e)return this.pushStack(re(e).filter(function(){for(t=0;t<n;t++)if(re.contains(o[t],this))return!0}));for(t=0;t<n;t++)re.find(e,o[t],i);return i=this.pushStack(n>1?re.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&fe.test(e)?re(e):e||[],!1).length}});var me,ve=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,be=re.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||me,"string"==typeof e){if(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ve.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof re?t[0]:t,re.merge(this,re.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:X,!0)),ge.test(i[1])&&re.isPlainObject(t))for(i in t)re.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return o=X.getElementById(i[2]),o&&o.parentNode&&(this.length=1,this[0]=o),this.context=X,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):re.isFunction(e)?void 0!==n.ready?n.ready(e):e(re):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),re.makeArray(e,this))};be.prototype=re.fn,me=re(X);var xe=/^(?:parents|prev(?:Until|All))/,ye={children:!0,contents:!0,next:!0,prev:!0};re.fn.extend({has:function(e){var t=re(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(re.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,o=this.length,r=[],a=fe.test(e)||"string"!=typeof e?re(e,t||this.context):0;i<o;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&re.find.matchesSelector(n,e))){r.push(n);break}return this.pushStack(r.length>1?re.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?J.call(re(e),this[0]):J.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(re.uniqueSort(re.merge(this.get(),re(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),re.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return le(e,"parentNode")},parentsUntil:function(e,t,n){return le(e,"parentNode",n)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return le(e,"nextSibling")},prevAll:function(e){return le(e,"previousSibling")},nextUntil:function(e,t,n){return le(e,"nextSibling",n)},prevUntil:function(e,t,n){return le(e,"previousSibling",n)},siblings:function(e){return de((e.parentNode||{}).firstChild,e)},children:function(e){return de(e.firstChild)},contents:function(e){return e.contentDocument||re.merge([],e.childNodes)}},function(e,t){re.fn[e]=function(n,i){var o=re.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=re.filter(i,o)),this.length>1&&(ye[e]||re.uniqueSort(o),xe.test(e)&&o.reverse()),this.pushStack(o)}});var we=/\S+/g;re.Callbacks=function(e){e="string"==typeof e?r(e):re.extend({},e);var t,n,i,o,a=[],s=[],p=-1,u=function(){for(o=e.once,i=t=!0;s.length;p=-1)for(n=s.shift();++p<a.length;)a[p].apply(n[0],n[1])===!1&&e.stopOnFalse&&(p=a.length,n=!1);e.memory||(n=!1),t=!1,o&&(a=n?[]:"")},c={add:function(){return a&&(n&&!t&&(p=a.length-1,s.push(n)),function i(t){re.each(t,function(t,n){re.isFunction(n)?e.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==re.type(n)&&i(n)})}(arguments),n&&!t&&u()),this},remove:function(){return re.each(arguments,function(e,t){for(var n;(n=re.inArray(t,a,n))>-1;)a.splice(n,1),n<=p&&p--}),this},has:function(e){return e?re.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return o=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return o=s=[],n||(a=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=n||[],n=[e,n.slice?n.slice():n],s.push(n),t||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},re.extend({Deferred:function(e){var t=[["resolve","done",re.Callbacks("once memory"),"resolved"],["reject","fail",re.Callbacks("once memory"),"rejected"],["notify","progress",re.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return re.Deferred(function(n){re.each(t,function(t,r){var a=re.isFunction(e[t])&&e[t];o[r[1]](function(){var e=a&&a.apply(this,arguments);e&&re.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this===i?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?re.extend(e,i):i}},o={};return i.pipe=i.then,re.each(t,function(e,r){var a=r[2],s=r[3];i[r[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=a.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,i,o=0,r=Q.call(arguments),a=r.length,s=1!==a||e&&re.isFunction(e.promise)?a:0,p=1===s?e:re.Deferred(),u=function(e,n,i){return function(o){n[e]=this,i[e]=arguments.length>1?Q.call(arguments):o,i===t?p.notifyWith(n,i):--s||p.resolveWith(n,i)}};if(a>1)for(t=new Array(a),n=new Array(a),i=new Array(a);o<a;o++)r[o]&&re.isFunction(r[o].promise)?r[o].promise().progress(u(o,n,t)).done(u(o,i,r)).fail(p.reject):--s;return s||p.resolveWith(i,r),p.promise()}});var Ce;re.fn.ready=function(e){return re.ready.promise().done(e),this},re.extend({isReady:!1,readyWait:1,holdReady:function(e){e?re.readyWait++:re.ready(!0)},ready:function(e){(e===!0?--re.readyWait:re.isReady)||(re.isReady=!0,e!==!0&&--re.readyWait>0||(Ce.resolveWith(X,[re]),re.fn.triggerHandler&&(re(X).triggerHandler("ready"),re(X).off("ready"))))}}),re.ready.promise=function(t){return Ce||(Ce=re.Deferred(),"complete"===X.readyState||"loading"!==X.readyState&&!X.documentElement.doScroll?e.setTimeout(re.ready):(X.addEventListener("DOMContentLoaded",a),e.addEventListener("load",a))),Ce.promise(t)},re.ready.promise();var Se=function(e,t,n,i,o,r,a){var s=0,p=e.length,u=null==n;if("object"===re.type(n)){o=!0;for(s in n)Se(e,t,s,n[s],!0,r,a)}else if(void 0!==i&&(o=!0,re.isFunction(i)||(a=!0),u&&(a?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(re(e),n)})),t))for(;s<p;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return o?e:u?t.call(e):p?t(e[0],n):r},_e=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};s.uid=1,s.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!_e(e))return{};var t=e[this.expando];return t||(t={},_e(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,o=this.cache(e);if("string"==typeof t)o[t]=n;else for(i in t)o[i]=t[i];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,re.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,o,r=e[this.expando];if(void 0!==r){if(void 0===t)this.register(e);else{re.isArray(t)?i=t.concat(t.map(re.camelCase)):(o=re.camelCase(t),t in r?i=[t,o]:(i=o,i=i in r?[i]:i.match(we)||[])),n=i.length;for(;n--;)delete r[i[n]]}(void 0===t||re.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!re.isEmptyObject(t)}};var Ee=new s,$e=new s,ke=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Te=/[A-Z]/g;re.extend({hasData:function(e){return $e.hasData(e)||Ee.hasData(e)},data:function(e,t,n){return $e.access(e,t,n)},removeData:function(e,t){$e.remove(e,t)},_data:function(e,t,n){return Ee.access(e,t,n)},_removeData:function(e,t){Ee.remove(e,t)}}),re.fn.extend({data:function(e,t){var n,i,o,r=this[0],a=r&&r.attributes;if(void 0===e){if(this.length&&(o=$e.get(r),1===r.nodeType&&!Ee.get(r,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=re.camelCase(i.slice(5)),p(r,i,o[i])));Ee.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){$e.set(this,e)}):Se(this,function(t){var n,i;if(r&&void 0===t){if(n=$e.get(r,e)||$e.get(r,e.replace(Te,"-$&").toLowerCase()),void 0!==n)return n;if(i=re.camelCase(e),n=$e.get(r,i),void 0!==n)return n;if(n=p(r,i,void 0),void 0!==n)return n}else i=re.camelCase(e),this.each(function(){var n=$e.get(this,i);$e.set(this,i,t),e.indexOf("-")>-1&&void 0!==n&&$e.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){$e.remove(this,e)})}}),re.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=Ee.get(e,t),n&&(!i||re.isArray(n)?i=Ee.access(e,t,re.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=re.queue(e,t),i=n.length,o=n.shift(),r=re._queueHooks(e,t),a=function(){re.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete r.stop,o.call(e,a,r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Ee.get(e,n)||Ee.access(e,n,{empty:re.Callbacks("once memory").add(function(){Ee.remove(e,[t+"queue",n])})})}}),re.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?re.queue(this[0],e):void 0===t?this:this.each(function(){var n=re.queue(this,e,t);re._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&re.dequeue(this,e)})},dequeue:function(e){return this.each(function(){re.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=re.Deferred(),r=this,a=this.length,s=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=Ee.get(r[a],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),o.promise(t)}});var Pe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ie=new RegExp("^(?:([+-])=|)("+Pe+")([a-z%]*)$","i"),Ae=["Top","Right","Bottom","Left"],Ne=function(e,t){return e=t||e,"none"===re.css(e,"display")||!re.contains(e.ownerDocument,e)},Me=/^(?:checkbox|radio)$/i,De=/<([\w:-]+)/,Le=/^$|\/(?:java|ecma)script/i,Oe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Oe.optgroup=Oe.option,Oe.tbody=Oe.tfoot=Oe.colgroup=Oe.caption=Oe.thead,Oe.th=Oe.td;var Ue=/<|&#?\w+;/;!function(){var e=X.createDocumentFragment(),t=e.appendChild(X.createElement("div")),n=X.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),ie.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Ve=/^key/,Re=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,He=/^([^.]*)(?:\.(.+)|)/;re.event={global:{},add:function(e,t,n,i,o){var r,a,s,p,u,c,l,d,f,g,h,m=Ee.get(e);if(m)for(n.handler&&(r=n,n=r.handler,o=r.selector),n.guid||(n.guid=re.guid++),(p=m.events)||(p=m.events={}),(a=m.handle)||(a=m.handle=function(t){return"undefined"!=typeof re&&re.event.triggered!==t.type?re.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(we)||[""],u=t.length;u--;)s=He.exec(t[u])||[],f=h=s[1],g=(s[2]||"").split(".").sort(),f&&(l=re.event.special[f]||{},f=(o?l.delegateType:l.bindType)||f,l=re.event.special[f]||{},c=re.extend({type:f,origType:h,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&re.expr.match.needsContext.test(o),namespace:g.join(".")},r),(d=p[f])||(d=p[f]=[],d.delegateCount=0,l.setup&&l.setup.call(e,i,g,a)!==!1||e.addEventListener&&e.addEventListener(f,a)),l.add&&(l.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),o?d.splice(d.delegateCount++,0,c):d.push(c),re.event.global[f]=!0)},remove:function(e,t,n,i,o){var r,a,s,p,u,c,l,d,f,g,h,m=Ee.hasData(e)&&Ee.get(e);if(m&&(p=m.events)){for(t=(t||"").match(we)||[""],u=t.length;u--;)if(s=He.exec(t[u])||[],f=h=s[1],g=(s[2]||"").split(".").sort(),f){for(l=re.event.special[f]||{},f=(i?l.delegateType:l.bindType)||f,d=p[f]||[],s=s[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=r=d.length;r--;)c=d[r],!o&&h!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(d.splice(r,1),c.selector&&d.delegateCount--,l.remove&&l.remove.call(e,c));a&&!d.length&&(l.teardown&&l.teardown.call(e,g,m.handle)!==!1||re.removeEvent(e,f,m.handle),delete p[f])}else for(f in p)re.event.remove(e,f+t[u],n,i,!0);re.isEmptyObject(p)&&Ee.remove(e,"handle events")}},dispatch:function(e){e=re.event.fix(e);var t,n,i,o,r,a=[],s=Q.call(arguments),p=(Ee.get(this,"events")||{})[e.type]||[],u=re.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(a=re.event.handlers.call(this,e,p),t=0;(o=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(r.namespace)||(e.handleObj=r,e.data=r.data,i=((re.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,s),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,o,r,a=[],s=t.delegateCount,p=e.target;if(s&&p.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;p!==this;p=p.parentNode||this)if(1===p.nodeType&&(p.disabled!==!0||"click"!==e.type)){for(i=[],n=0;n<s;n++)r=t[n],o=r.selector+" ",void 0===i[o]&&(i[o]=r.needsContext?re(o,this).index(p)>-1:re.find(o,this,null,[p]).length),i[o]&&i.push(r);i.length&&a.push({elem:p,handlers:i})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,o,r=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||X,i=n.documentElement,o=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),e.which||void 0===r||(e.which=1&r?1:2&r?3:4&r?2:0),e}},fix:function(e){if(e[re.expando])return e;var t,n,i,o=e.type,r=e,a=this.fixHooks[o];for(a||(this.fixHooks[o]=a=Re.test(o)?this.mouseHooks:Ve.test(o)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new re.Event(r),t=i.length;t--;)n=i[t],e[n]=r[n];return e.target||(e.target=X),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,r):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===h()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&re.nodeName(this,"input"))return this.click(),!1},_default:function(e){return re.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},re.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},re.Event=function(e,t){return this instanceof re.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?f:g):this.type=e,t&&re.extend(this,t),this.timeStamp=e&&e.timeStamp||re.now(),void(this[re.expando]=!0)):new re.Event(e,t)},re.Event.prototype={constructor:re.Event,isDefaultPrevented:g,isPropagationStopped:g,isImmediatePropagationStopped:g,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=f,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=f,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=f,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},re.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){re.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,r=e.handleObj;return o&&(o===i||re.contains(i,o))||(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),re.fn.extend({on:function(e,t,n,i){return m(this,e,t,n,i)},one:function(e,t,n,i){return m(this,e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,re(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=g),this.each(function(){re.event.remove(this,e,n,t)})}});var Be=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Fe=/<script|<style|<link/i,ze=/checked\s*(?:[^=]|=\s*.checked.)/i,Ge=/^true\/(.*)/,We=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;re.extend({htmlPrefilter:function(e){return e.replace(Be,"<$1></$2>")},clone:function(e,t,n){var i,o,r,a,s=e.cloneNode(!0),p=re.contains(e.ownerDocument,e);if(!(ie.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||re.isXMLDoc(e)))for(a=c(s),r=c(e),i=0,o=r.length;i<o;i++)w(r[i],a[i]);if(t)if(n)for(r=r||c(e),a=a||c(s),i=0,o=r.length;i<o;i++)y(r[i],a[i]);else y(e,s);return a=c(s,"script"),a.length>0&&l(a,!p&&c(e,"script")),s},cleanData:function(e){for(var t,n,i,o=re.event.special,r=0;void 0!==(n=e[r]);r++)if(_e(n)){if(t=n[Ee.expando]){if(t.events)for(i in t.events)o[i]?re.event.remove(n,i):re.removeEvent(n,i,t.handle);n[Ee.expando]=void 0}n[$e.expando]&&(n[$e.expando]=void 0)}}}),re.fn.extend({domManip:C,detach:function(e){return S(this,e,!0)},remove:function(e){return S(this,e)},text:function(e){return Se(this,function(e){return void 0===e?re.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return C(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.appendChild(e)}})},prepend:function(){return C(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return C(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return C(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(re.cleanData(c(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return re.clone(this,e,t)})},html:function(e){return Se(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Fe.test(e)&&!Oe[(De.exec(e)||["",""])[1].toLowerCase()]){e=re.htmlPrefilter(e);try{for(;n<i;n++)t=this[n]||{},1===t.nodeType&&(re.cleanData(c(t,!1)),t.innerHTML=e);t=0}catch(o){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return C(this,arguments,function(t){var n=this.parentNode;re.inArray(this,e)<0&&(re.cleanData(c(this)),n&&n.replaceChild(t,this))},e)}}),re.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){re.fn[e]=function(e){for(var n,i=[],o=re(e),r=o.length-1,a=0;a<=r;a++)n=a===r?this:this.clone(!0),re(o[a])[t](n),Z.apply(i,n.get());return this.pushStack(i)}});var je,qe={HTML:"block",BODY:"block"},Ye=/^margin/,Xe=new RegExp("^("+Pe+")(?!px)[a-z%]+$","i"),Qe=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Ke=function(e,t,n,i){var o,r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];o=n.apply(e,i||[]);for(r in t)e.style[r]=a[r];return o},Ze=X.documentElement;!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Ze.appendChild(a);var t=e.getComputedStyle(s);n="1%"!==t.top,r="2px"===t.marginLeft,i="4px"===t.width,s.style.marginRight="50%",o="4px"===t.marginRight,Ze.removeChild(a)}var n,i,o,r,a=X.createElement("div"),s=X.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),re.extend(ie,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},pixelMarginRight:function(){return null==i&&t(),o},reliableMarginLeft:function(){return null==i&&t(),r},reliableMarginRight:function(){var t,n=s.appendChild(X.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",Ze.appendChild(a),t=!parseFloat(e.getComputedStyle(n).marginRight),Ze.removeChild(a),s.removeChild(n),t}}))}();var Je=/^(none|table(?!-c[ea]).+)/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"},nt=["Webkit","O","Moz","ms"],it=X.createElement("div").style;re.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=$(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,a,s=re.camelCase(t),p=e.style;return t=re.cssProps[s]||(re.cssProps[s]=T(s)||s),a=re.cssHooks[t]||re.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(o=a.get(e,!1,i))?o:p[t]:(r=typeof n,"string"===r&&(o=Ie.exec(n))&&o[1]&&(n=u(e,t,o),r="number"),null!=n&&n===n&&("number"===r&&(n+=o&&o[3]||(re.cssNumber[s]?"":"px")),ie.clearCloneStyle||""!==n||0!==t.indexOf("background")||(p[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(p[t]=n)),void 0)}},css:function(e,t,n,i){var o,r,a,s=re.camelCase(t);return t=re.cssProps[s]||(re.cssProps[s]=T(s)||s),a=re.cssHooks[t]||re.cssHooks[s],a&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=$(e,t,i)),"normal"===o&&t in tt&&(o=tt[t]),""===n||n?(r=parseFloat(o),n===!0||isFinite(r)?r||0:o):o}}),re.each(["height","width"],function(e,t){re.cssHooks[t]={get:function(e,n,i){if(n)return Je.test(re.css(e,"display"))&&0===e.offsetWidth?Ke(e,et,function(){return A(e,t,i)}):A(e,t,i)},set:function(e,n,i){var o,r=i&&Qe(e),a=i&&I(e,t,i,"border-box"===re.css(e,"boxSizing",!1,r),r);return a&&(o=Ie.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=re.css(e,t)),P(e,n,a)}}}),re.cssHooks.marginLeft=k(ie.reliableMarginLeft,function(e,t){if(t)return(parseFloat($(e,"marginLeft"))||e.getBoundingClientRect().left-Ke(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),re.cssHooks.marginRight=k(ie.reliableMarginRight,function(e,t){if(t)return Ke(e,{display:"inline-block"},$,[e,"marginRight"])}),re.each({margin:"",padding:"",border:"Width"},function(e,t){re.cssHooks[e+t]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];i<4;i++)o[e+Ae[i]+t]=r[i]||r[i-2]||r[0];return o}},Ye.test(e)||(re.cssHooks[e+t].set=P)}),re.fn.extend({css:function(e,t){return Se(this,function(e,t,n){var i,o,r={},a=0;if(re.isArray(t)){for(i=Qe(e),o=t.length;a<o;a++)r[t[a]]=re.css(e,t[a],!1,i);return r}return void 0!==n?re.style(e,t,n):re.css(e,t)},e,t,arguments.length>1)},show:function(){return N(this,!0)},hide:function(){return N(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ne(this)?re(this).show():re(this).hide()})}}),re.Tween=M,M.prototype={constructor:M,init:function(e,t,n,i,o,r){this.elem=e,this.prop=n,this.easing=o||re.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(re.cssNumber[n]?"":"px")},cur:function(){var e=M.propHooks[this.prop];return e&&e.get?e.get(this):M.propHooks._default.get(this)},run:function(e){var t,n=M.propHooks[this.prop];return this.options.duration?this.pos=t=re.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=re.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){re.fx.step[e.prop]?re.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[re.cssProps[e.prop]]&&!re.cssHooks[e.prop]?e.elem[e.prop]=e.now:re.style(e.elem,e.prop,e.now+e.unit)}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},re.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},re.fx=M.prototype.init,re.fx.step={};var ot,rt,at=/^(?:toggle|show|hide)$/,st=/queueHooks$/;re.Animation=re.extend(R,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return u(n.elem,e,Ie.exec(t),n),n}]},tweener:function(e,t){re.isFunction(e)?(t=e,e=["*"]):e=e.match(we);for(var n,i=0,o=e.length;i<o;i++)n=e[i],R.tweeners[n]=R.tweeners[n]||[],R.tweeners[n].unshift(t)},prefilters:[U],prefilter:function(e,t){t?R.prefilters.unshift(e):R.prefilters.push(e)}}),re.speed=function(e,t,n){var i=e&&"object"==typeof e?re.extend({},e):{complete:n||!n&&t||re.isFunction(e)&&e,duration:e,easing:n&&t||t&&!re.isFunction(t)&&t};return i.duration=re.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in re.fx.speeds?re.fx.speeds[i.duration]:re.fx.speeds._default,null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){re.isFunction(i.old)&&i.old.call(this),i.queue&&re.dequeue(this,i.queue)},i},re.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Ne).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=re.isEmptyObject(e),r=re.speed(t,n,i),a=function(){var t=R(this,re.extend({},e),r);(o||Ee.get(this,"finish"))&&t.stop(!0)};return a.finish=a,o||r.queue===!1?this.each(a):this.queue(r.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",r=re.timers,a=Ee.get(this);if(o)a[o]&&a[o].stop&&i(a[o]);else for(o in a)a[o]&&a[o].stop&&st.test(o)&&i(a[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(n),t=!1,r.splice(o,1));!t&&n||re.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=Ee.get(this),i=n[e+"queue"],o=n[e+"queueHooks"],r=re.timers,a=i?i.length:0;for(n.finish=!0,re.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<a;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),re.each(["toggle","show","hide"],function(e,t){var n=re.fn[t];re.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(L(t,!0),e,i,o)}}),re.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){re.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),re.timers=[],re.fx.tick=function(){var e,t=0,n=re.timers;for(ot=re.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||re.fx.stop(),ot=void 0},re.fx.timer=function(e){re.timers.push(e),e()?re.fx.start():re.timers.pop()},re.fx.interval=13,re.fx.start=function(){rt||(rt=e.setInterval(re.fx.tick,re.fx.interval))},re.fx.stop=function(){e.clearInterval(rt),rt=null},re.fx.speeds={slow:600,fast:200,_default:400},re.fn.delay=function(t,n){return t=re.fx?re.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,i){var o=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(o)}})},function(){var e=X.createElement("input"),t=X.createElement("select"),n=t.appendChild(X.createElement("option"));e.type="checkbox",ie.checkOn=""!==e.value,ie.optSelected=n.selected,t.disabled=!0,ie.optDisabled=!n.disabled,e=X.createElement("input"),e.value="t",e.type="radio",ie.radioValue="t"===e.value}();var pt,ut=re.expr.attrHandle;re.fn.extend({attr:function(e,t){return Se(this,re.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){re.removeAttr(this,e)})}}),re.extend({attr:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return"undefined"==typeof e.getAttribute?re.prop(e,t,n):(1===r&&re.isXMLDoc(e)||(t=t.toLowerCase(),o=re.attrHooks[t]||(re.expr.match.bool.test(t)?pt:void 0)),
void 0!==n?null===n?void re.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(i=o.get(e,t))?i:(i=re.find.attr(e,t),null==i?void 0:i))},attrHooks:{type:{set:function(e,t){if(!ie.radioValue&&"radio"===t&&re.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,o=0,r=t&&t.match(we);if(r&&1===e.nodeType)for(;n=r[o++];)i=re.propFix[n]||n,re.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)}}),pt={set:function(e,t,n){return t===!1?re.removeAttr(e,n):e.setAttribute(n,n),n}},re.each(re.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ut[t]||re.find.attr;ut[t]=function(e,t,i){var o,r;return i||(r=ut[t],ut[t]=o,o=null!=n(e,t,i)?t.toLowerCase():null,ut[t]=r),o}});var ct=/^(?:input|select|textarea|button)$/i,lt=/^(?:a|area)$/i;re.fn.extend({prop:function(e,t){return Se(this,re.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[re.propFix[e]||e]})}}),re.extend({prop:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&re.isXMLDoc(e)||(t=re.propFix[t]||t,o=re.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=re.find.attr(e,"tabindex");return t?parseInt(t,10):ct.test(e.nodeName)||lt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ie.optSelected||(re.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),re.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){re.propFix[this.toLowerCase()]=this});var dt=/[\t\r\n\f]/g;re.fn.extend({addClass:function(e){var t,n,i,o,r,a,s,p=0;if(re.isFunction(e))return this.each(function(t){re(this).addClass(e.call(this,t,H(this)))});if("string"==typeof e&&e)for(t=e.match(we)||[];n=this[p++];)if(o=H(n),i=1===n.nodeType&&(" "+o+" ").replace(dt," ")){for(a=0;r=t[a++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");s=re.trim(i),o!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,o,r,a,s,p=0;if(re.isFunction(e))return this.each(function(t){re(this).removeClass(e.call(this,t,H(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(we)||[];n=this[p++];)if(o=H(n),i=1===n.nodeType&&(" "+o+" ").replace(dt," ")){for(a=0;r=t[a++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");s=re.trim(i),o!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):re.isFunction(e)?this.each(function(n){re(this).toggleClass(e.call(this,n,H(this),t),t)}):this.each(function(){var t,i,o,r;if("string"===n)for(i=0,o=re(this),r=e.match(we)||[];t=r[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||(t=H(this),t&&Ee.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":Ee.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+H(n)+" ").replace(dt," ").indexOf(t)>-1)return!0;return!1}});var ft=/\r/g,gt=/[\x20\t\r\n\f]+/g;re.fn.extend({val:function(e){var t,n,i,o=this[0];{if(arguments.length)return i=re.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=i?e.call(this,n,re(this).val()):e,null==o?o="":"number"==typeof o?o+="":re.isArray(o)&&(o=re.map(o,function(e){return null==e?"":e+""})),t=re.valHooks[this.type]||re.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))});if(o)return t=re.valHooks[o.type]||re.valHooks[o.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(ft,""):null==n?"":n)}}}),re.extend({valHooks:{option:{get:function(e){var t=re.find.attr(e,"value");return null!=t?t:re.trim(re.text(e)).replace(gt," ")}},select:{get:function(e){for(var t,n,i=e.options,o=e.selectedIndex,r="select-one"===e.type||o<0,a=r?null:[],s=r?o+1:i.length,p=o<0?s:r?o:0;p<s;p++)if(n=i[p],(n.selected||p===o)&&(ie.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!re.nodeName(n.parentNode,"optgroup"))){if(t=re(n).val(),r)return t;a.push(t)}return a},set:function(e,t){for(var n,i,o=e.options,r=re.makeArray(t),a=o.length;a--;)i=o[a],(i.selected=re.inArray(re.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(e.selectedIndex=-1),r}}}}),re.each(["radio","checkbox"],function(){re.valHooks[this]={set:function(e,t){if(re.isArray(t))return e.checked=re.inArray(re(e).val(),t)>-1}},ie.checkOn||(re.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var ht=/^(?:focusinfocus|focusoutblur)$/;re.extend(re.event,{trigger:function(t,n,i,o){var r,a,s,p,u,c,l,d=[i||X],f=ne.call(t,"type")?t.type:t,g=ne.call(t,"namespace")?t.namespace.split("."):[];if(a=s=i=i||X,3!==i.nodeType&&8!==i.nodeType&&!ht.test(f+re.event.triggered)&&(f.indexOf(".")>-1&&(g=f.split("."),f=g.shift(),g.sort()),u=f.indexOf(":")<0&&"on"+f,t=t[re.expando]?t:new re.Event(f,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:re.makeArray(n,[t]),l=re.event.special[f]||{},o||!l.trigger||l.trigger.apply(i,n)!==!1)){if(!o&&!l.noBubble&&!re.isWindow(i)){for(p=l.delegateType||f,ht.test(p+f)||(a=a.parentNode);a;a=a.parentNode)d.push(a),s=a;s===(i.ownerDocument||X)&&d.push(s.defaultView||s.parentWindow||e)}for(r=0;(a=d[r++])&&!t.isPropagationStopped();)t.type=r>1?p:l.bindType||f,c=(Ee.get(a,"events")||{})[t.type]&&Ee.get(a,"handle"),c&&c.apply(a,n),c=u&&a[u],c&&c.apply&&_e(a)&&(t.result=c.apply(a,n),t.result===!1&&t.preventDefault());return t.type=f,o||t.isDefaultPrevented()||l._default&&l._default.apply(d.pop(),n)!==!1||!_e(i)||u&&re.isFunction(i[f])&&!re.isWindow(i)&&(s=i[u],s&&(i[u]=null),re.event.triggered=f,i[f](),re.event.triggered=void 0,s&&(i[u]=s)),t.result}},simulate:function(e,t,n){var i=re.extend(new re.Event,n,{type:e,isSimulated:!0});re.event.trigger(i,null,t)}}),re.fn.extend({trigger:function(e,t){return this.each(function(){re.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return re.event.trigger(e,t,n,!0)}}),re.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){re.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),re.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ie.focusin="onfocusin"in e,ie.focusin||re.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){re.event.simulate(t,e.target,re.event.fix(e))};re.event.special[t]={setup:function(){var i=this.ownerDocument||this,o=Ee.access(i,t);o||i.addEventListener(e,n,!0),Ee.access(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=Ee.access(i,t)-1;o?Ee.access(i,t,o):(i.removeEventListener(e,n,!0),Ee.remove(i,t))}}});var mt=e.location,vt=re.now(),bt=/\?/;re.parseJSON=function(e){return JSON.parse(e+"")},re.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(i){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||re.error("Invalid XML: "+t),n};var xt=/#.*$/,yt=/([?&])_=[^&]*/,wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ct=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,St=/^(?:GET|HEAD)$/,_t=/^\/\//,Et={},$t={},kt="*/".concat("*"),Tt=X.createElement("a");Tt.href=mt.href,re.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mt.href,type:"GET",isLocal:Ct.test(mt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":kt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":re.parseJSON,"text xml":re.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?z(z(e,re.ajaxSettings),t):z(re.ajaxSettings,e)},ajaxPrefilter:B(Et),ajaxTransport:B($t),ajax:function(t,n){function i(t,n,i,s){var u,l,b,x,w,S=n;2!==y&&(y=2,p&&e.clearTimeout(p),o=void 0,a=s||"",C.readyState=t>0?4:0,u=t>=200&&t<300||304===t,i&&(x=G(d,C,i)),x=W(d,x,C,u),u?(d.ifModified&&(w=C.getResponseHeader("Last-Modified"),w&&(re.lastModified[r]=w),w=C.getResponseHeader("etag"),w&&(re.etag[r]=w)),204===t||"HEAD"===d.type?S="nocontent":304===t?S="notmodified":(S=x.state,l=x.data,b=x.error,u=!b)):(b=S,!t&&S||(S="error",t<0&&(t=0))),C.status=t,C.statusText=(n||S)+"",u?h.resolveWith(f,[l,S,C]):h.rejectWith(f,[C,S,b]),C.statusCode(v),v=void 0,c&&g.trigger(u?"ajaxSuccess":"ajaxError",[C,d,u?l:b]),m.fireWith(f,[C,S]),c&&(g.trigger("ajaxComplete",[C,d]),--re.active||re.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var o,r,a,s,p,u,c,l,d=re.ajaxSetup({},n),f=d.context||d,g=d.context&&(f.nodeType||f.jquery)?re(f):re.event,h=re.Deferred(),m=re.Callbacks("once memory"),v=d.statusCode||{},b={},x={},y=0,w="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!s)for(s={};t=wt.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=x[n]=x[n]||e,b[e]=t),this},overrideMimeType:function(e){return y||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(y<2)for(t in e)v[t]=[v[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||w;return o&&o.abort(t),i(0,t),this}};if(h.promise(C).complete=m.add,C.success=C.done,C.error=C.fail,d.url=((t||d.url||mt.href)+"").replace(xt,"").replace(_t,mt.protocol+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=re.trim(d.dataType||"*").toLowerCase().match(we)||[""],null==d.crossDomain){u=X.createElement("a");try{u.href=d.url,u.href=u.href,d.crossDomain=Tt.protocol+"//"+Tt.host!=u.protocol+"//"+u.host}catch(S){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=re.param(d.data,d.traditional)),F(Et,d,n,C),2===y)return C;c=re.event&&d.global,c&&0===re.active++&&re.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!St.test(d.type),r=d.url,d.hasContent||(d.data&&(r=d.url+=(bt.test(r)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=yt.test(r)?r.replace(yt,"$1_="+vt++):r+(bt.test(r)?"&":"?")+"_="+vt++)),d.ifModified&&(re.lastModified[r]&&C.setRequestHeader("If-Modified-Since",re.lastModified[r]),re.etag[r]&&C.setRequestHeader("If-None-Match",re.etag[r])),(d.data&&d.hasContent&&d.contentType!==!1||n.contentType)&&C.setRequestHeader("Content-Type",d.contentType),C.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+kt+"; q=0.01":""):d.accepts["*"]);for(l in d.headers)C.setRequestHeader(l,d.headers[l]);if(d.beforeSend&&(d.beforeSend.call(f,C,d)===!1||2===y))return C.abort();w="abort";for(l in{success:1,error:1,complete:1})C[l](d[l]);if(o=F($t,d,n,C)){if(C.readyState=1,c&&g.trigger("ajaxSend",[C,d]),2===y)return C;d.async&&d.timeout>0&&(p=e.setTimeout(function(){C.abort("timeout")},d.timeout));try{y=1,o.send(b,i)}catch(S){if(!(y<2))throw S;i(-1,S)}}else i(-1,"No Transport");return C},getJSON:function(e,t,n){return re.get(e,t,n,"json")},getScript:function(e,t){return re.get(e,void 0,t,"script")}}),re.each(["get","post"],function(e,t){re[t]=function(e,n,i,o){return re.isFunction(n)&&(o=o||i,i=n,n=void 0),re.ajax(re.extend({url:e,type:t,dataType:o,data:n,success:i},re.isPlainObject(e)&&e))}}),re._evalUrl=function(e){return re.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},re.fn.extend({wrapAll:function(e){var t;return re.isFunction(e)?this.each(function(t){re(this).wrapAll(e.call(this,t))}):(this[0]&&(t=re(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return re.isFunction(e)?this.each(function(t){re(this).wrapInner(e.call(this,t))}):this.each(function(){var t=re(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=re.isFunction(e);return this.each(function(n){re(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){re.nodeName(this,"body")||re(this).replaceWith(this.childNodes)}).end()}}),re.expr.filters.hidden=function(e){return!re.expr.filters.visible(e)},re.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var Pt=/%20/g,It=/\[\]$/,At=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,Mt=/^(?:input|select|textarea|keygen)/i;re.param=function(e,t){var n,i=[],o=function(e,t){t=re.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=re.ajaxSettings&&re.ajaxSettings.traditional),re.isArray(e)||e.jquery&&!re.isPlainObject(e))re.each(e,function(){o(this.name,this.value)});else for(n in e)j(n,e[n],t,o);return i.join("&").replace(Pt,"+")},re.fn.extend({serialize:function(){return re.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=re.prop(this,"elements");return e?re.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!re(this).is(":disabled")&&Mt.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!Me.test(e))}).map(function(e,t){var n=re(this).val();return null==n?null:re.isArray(n)?re.map(n,function(e){return{name:t.name,value:e.replace(At,"\r\n")}}):{name:t.name,value:n.replace(At,"\r\n")}}).get()}}),re.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Dt={0:200,1223:204},Lt=re.ajaxSettings.xhr();ie.cors=!!Lt&&"withCredentials"in Lt,ie.ajax=Lt=!!Lt,re.ajaxTransport(function(t){var n,i;if(ie.cors||Lt&&!t.crossDomain)return{send:function(o,r){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");for(a in o)s.setRequestHeader(a,o[a]);n=function(e){return function(){n&&(n=i=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?r(0,"error"):r(s.status,s.statusText):r(Dt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),i=s.onerror=n("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(p){if(n)throw p}},abort:function(){n&&n()}}}),re.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return re.globalEval(e),e}}}),re.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),re.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,o){t=re("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),X.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Ot=[],Ut=/(=)\?(?=&|$)|\?\?/;re.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ot.pop()||re.expando+"_"+vt++;return this[e]=!0,e}}),re.ajaxPrefilter("json jsonp",function(t,n,i){var o,r,a,s=t.jsonp!==!1&&(Ut.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ut.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=re.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Ut,"$1"+o):t.jsonp!==!1&&(t.url+=(bt.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return a||re.error(o+" was not called"),a[0]},t.dataTypes[0]="json",r=e[o],e[o]=function(){a=arguments},i.always(function(){void 0===r?re(e).removeProp(o):e[o]=r,t[o]&&(t.jsonpCallback=n.jsonpCallback,Ot.push(o)),a&&re.isFunction(r)&&r(a[0]),a=r=void 0}),"script"}),re.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||X;var i=ge.exec(e),o=!n&&[];return i?[t.createElement(i[1])]:(i=d([e],t,o),o&&o.length&&re(o).remove(),re.merge([],i.childNodes))};var Vt=re.fn.load;re.fn.load=function(e,t,n){if("string"!=typeof e&&Vt)return Vt.apply(this,arguments);var i,o,r,a=this,s=e.indexOf(" ");return s>-1&&(i=re.trim(e.slice(s)),e=e.slice(0,s)),re.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&re.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){r=arguments,a.html(i?re("<div>").append(re.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,r||[e.responseText,t,e])})}),this},re.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){re.fn[t]=function(e){return this.on(t,e)}}),re.expr.filters.animated=function(e){return re.grep(re.timers,function(t){return e===t.elem}).length},re.offset={setOffset:function(e,t,n){var i,o,r,a,s,p,u,c=re.css(e,"position"),l=re(e),d={};"static"===c&&(e.style.position="relative"),s=l.offset(),r=re.css(e,"top"),p=re.css(e,"left"),u=("absolute"===c||"fixed"===c)&&(r+p).indexOf("auto")>-1,u?(i=l.position(),a=i.top,o=i.left):(a=parseFloat(r)||0,o=parseFloat(p)||0),re.isFunction(t)&&(t=t.call(e,n,re.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+o),"using"in t?t.using.call(e,d):l.css(d)}},re.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){re.offset.setOffset(this,e,t)});var t,n,i=this[0],o={top:0,left:0},r=i&&i.ownerDocument;if(r)return t=r.documentElement,re.contains(t,i)?(o=i.getBoundingClientRect(),n=q(r),{top:o.top+n.pageYOffset-t.clientTop,left:o.left+n.pageXOffset-t.clientLeft}):o},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===re.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),re.nodeName(e[0],"html")||(i=e.offset()),i.top+=re.css(e[0],"borderTopWidth",!0),i.left+=re.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-re.css(n,"marginTop",!0),left:t.left-i.left-re.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===re.css(e,"position");)e=e.offsetParent;return e||Ze})}}),re.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;re.fn[e]=function(i){return Se(this,function(e,i,o){var r=q(e);return void 0===o?r?r[t]:e[i]:void(r?r.scrollTo(n?r.pageXOffset:o,n?o:r.pageYOffset):e[i]=o)},e,i,arguments.length)}}),re.each(["top","left"],function(e,t){re.cssHooks[t]=k(ie.pixelPosition,function(e,n){if(n)return n=$(e,t),Xe.test(n)?re(e).position()[t]+"px":n})}),re.each({Height:"height",Width:"width"},function(e,t){re.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){re.fn[i]=function(i,o){var r=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||o===!0?"margin":"border");return Se(this,function(t,n,i){var o;return re.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?re.css(t,n,a):re.style(t,n,i,a)},t,r?i:void 0,r,null)}})}),re.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),re.fn.andSelf=re.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return re});var Rt=e.jQuery,Ht=e.$;return re.noConflict=function(t){return e.$===re&&(e.$=Ht),t&&e.jQuery===re&&(e.jQuery=Rt),re},t||(e.jQuery=e.$=re),re}),jQuery.noConflict(!0)}!function(){var e=window;!e||void 0!==e.PP&&null!==e.pp||(e.PP=PPModule(JQueryModule()),e.PP.boot())}()}();